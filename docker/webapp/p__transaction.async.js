(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[100],{T6Na:function(e,t,a){"use strict";a.r(t);a("bbsP");var n=a("/wGt"),l=(a("+L6B"),a("2/Rp")),r=(a("g9YV"),a("wCAj")),c=(a("/zsF"),a("PArb")),i=(a("Q9mQ"),a("diRs")),o=(a("miYZ"),a("tsqr")),s=a("2Taf"),u=a.n(s),d=a("vZ4D"),p=a.n(d),m=a("MhPg"),f=a.n(m),h=a("l4Ni"),y=a.n(h),g=a("ujKo"),E=a.n(g),v=(a("2qtc"),a("kLXV")),b=(a("5NDa"),a("5rEg")),w=(a("OaEy"),a("2fM7")),x=(a("y8nQ"),a("Vl3Y")),k=a("q1tI"),T=a.n(k),S=a("suEo"),C=a.n(S),A=a("wd/R"),M=a.n(A),F=a("MuoO"),L=a("P4xi"),_=a("6Hmz");function D(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=R(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){i=!0,r=e},f:function(){try{c||null==a.return||a.return()}finally{if(i)throw r}}}}function R(e,t){if(e){if("string"===typeof e)return I(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function N(e){var t=O();return function(){var a,n=E()(e);if(t){var l=E()(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return y()(this,a)}}function O(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Y=_["a"].eventFlow_SWGL_Search.key,q=_["a"].eventFlow_SWGL_Stop.key,V=_["a"].eventFlow_SWGL_Fzsw.key,j=_["a"].eventFlow_SWGL_Retry.key,B=_["a"].eventFlow_SWGL_Delete.key,z=x["a"].Item,G=w["a"].Option,H=(b["a"].TextArea,v["a"].confirm,function(e){f()(a,e);var t=N(a);function a(){var e;u()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l)),e.state={TsList:[],Tableloading:!0,visible:!1,type:"",drawerTitle:"",acldata:null,jsglVisible:!1,roleType:null,role:[],roleName:[],edit_role:[],edit_roleName:[],cxRole:[],cxRoleName:[],alltags:null,BranchList:null,status:0,rolesList:[]},e.query=function(){e.props.dispatch({type:"swglModel/listTrans",payload:{name:null,group:null,status:null,sortby:["createTime",-1],skip:0,limit:0},callback:function(t){if("0"!=t.code)return o["a"].error("\u67e5\u8be2\u4e8b\u52a1\u5217\u8868\u9519\u8bef\uff1a".concat(t.data));var a=t.data[1];setTimeout(function(){e.setState({Tableloading:!1,TsList:a})},100)}})},e.retry=function(t){var a=e.props.dispatch;console.log("branch",t.id),a({type:"swglModel/retry",payload:{id:t._id},callback:function(t){"0"==t.code?(e.query(),o["a"].success("\u5206\u6b65\u4e8b\u52a1\u8865\u507f\u6210\u529f\uff01")):o["a"].error("\u5206\u6b65\u4e8b\u52a1\u8865\u507f\u5931\u8d25 \uff01".concat(t.data))}})},e.stop=function(t){var a=e.props.dispatch;console.log("transaction",t.id),a({type:"swglModel/stop",payload:{txid:t._id},callback:function(t){"0"==t.code?(e.query(),o["a"].success("\u4e8b\u52a1\u505c\u6b62\u6210\u529f\uff01")):o["a"].error("\u505c\u6b62\u4e8b\u52a1\u5931\u8d25 \uff01".concat(t.data))}})},e.del=function(t){var a=e.props.dispatch;console.log("transaction",t.id),v["a"].confirm({title:"\u786e\u8ba4\u5220\u9664 '".concat(t.name,"' \u5417?"),content:"",okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){a({type:"swglModel/deleteTS",payload:{txid:t._id},callback:function(t){"0"==t.code?(e.query(),o["a"].success("\u4e8b\u52a1\u5220\u9664\u6210\u529f\uff01")):o["a"].error("\u5220\u9664\u4e8b\u52a1\u5931\u8d25 \uff01".concat(t.data))}})},onCancel:function(){}})},e.openDrawer=function(t,a,n){e.setState({visible:!0,type:t,drawerTitle:a,record:n}),e.setState({visible:!0,type:t,drawerTitle:a}),"03"==t&&(e.setState({drawerTitle:"\u5168\u5c40\u4e8b\u52a1\u540d\u79f0\uff1a ".concat(n.name)}),e.props.dispatch({type:"swglModel/listBranch",payload:{txid:n._id,initiator:null,status:null,sortby:["createTime",-1],skip:0,limit:0},callback:function(t){console.log(t),0==t.code?e.setState({BranchList:t.data[1]}):o["a"].error("\u5206\u6b65\u4e8b\u52a1\u67e5\u8be2\u51fa\u9519 ".concat(t.data))}}))},e.drawerClose=function(){e.setState({visible:!1,type:"",drawerTitle:"",acldata:null,scriptList:null})},e.showModal=function(t){e.setState({visible2:!0,shuju:JSON.stringify(t)})},e.handleCancel=function(t){e.setState({visible2:!1})},e.handleSearch=function(){var t=e.props,a=t.form,n=t.dispatch,l=(e.state.cxRole,a.getFieldValue("swname")?a.getFieldValue("swname"):null),r=a.getFieldValue("group")?a.getFieldValue("group"):null,c=a.getFieldValue("status")?a.getFieldValue("status"):null;console.log("\u67e5\u8be2\u53c2\u6570",l,c),n({type:"swglModel/listTrans",payload:{name:l,group:r,status:c,sortby:["createTime",-1],skip:0,limit:0},callback:function(t){"0"==t.code?(o["a"].success("\u67e5\u8be2\u6210\u529f\uff01"),e.setState({TsList:t.data[1]}),console.log(t)):o["a"].error("\u67e5\u8be2\u51fa\u9519 ".concat(t.data))}})},e.handel=function(t){var a,n=e.state.rolesList,l=D(n);try{for(l.s();!(a=l.n()).done;){var r=a.value;if(r._id==t)return r.name}}catch(e){l.e(e)}finally{l.f()}return t},e}return p()(a,[{key:"componentDidMount",value:function(){this.query()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,s=(a.acldata,a.alltags),u=(a.roleType,a.TsList),d=(a.rolesList,a.edit_roleName,a.roleName,a.cxRoleName,a.edit_role,a.role,a.cxRole,s&&s.map(function(e){return T.a.createElement(G,{key:e},e)}),[{title:"\u4e8b\u52a1\u53d1\u8d77\u8005",align:"center",dataIndex:"initiator"},{title:"\u4e8b\u52a1\u9636\u6bb5",dataIndex:"stage",align:"center",render:function(e){return 0===e?T.a.createElement("span",null,"Try"):1===e?T.a.createElement("span",null,"Confirm"):-1===e?T.a.createElement("span",null,"Cancel"):-2===e?T.a.createElement("span",null,"\u8d85\u65f6"):-3===e?T.a.createElement("span",null,"\u7ec8\u6b62"):void 0}},{title:"\u4e8b\u52a1\u72b6\u6001",align:"center",render:function(e){return 0===e.status?T.a.createElement("span",null,"\u672a\u7ed3\u675f"):1===e.status?T.a.createElement("span",null,"\u6210\u529f"):-1===e.status?T.a.createElement(i["a"],{content:e.error},T.a.createElement("span",{style:{color:"red"}}," \u5931\u8d25")):void 0}},{title:"\u9636\u6bb5\u65f6\u95f4",dataIndex:"stageTime",align:"center",render:function(e){return T.a.createElement("span",null,e&&M()(e).format("YYYY-MM-DD"),T.a.createElement("br",null),e&&M()(e).format("HH:mm:ss"))}},{title:"Confirm/Cancel\u63d0\u4ea4\u70b9",dataIndex:"submit",align:"center",render:function(e){return 0===e?T.a.createElement("span",null,"\u4e0d\u63d0\u4ea4"):1===e?T.a.createElement("span",null,"\u53d1\u8d77\u8005"):2===e?T.a.createElement("span",null,"\u4efb\u610f\u5b9e\u4f8b"):void 0}},{title:"\u8865\u507f\u6b21\u6570",align:"center",dataIndex:"retry"},{title:"\u64cd\u4f5c",align:"center",width:"15%",render:function(t){return T.a.createElement(T.a.Fragment,null,T.a.createElement("a",{onClick:function(a){a&&a.preventDefault(),L["a"].checkAuthAndExecute(e.props.dispatch,j,e.showModal(t.data),[null])}},"\u6570\u636e"),T.a.createElement(c["a"],{type:"vertical"}),-1==t.status?T.a.createElement("a",{onClick:function(a){a&&a.preventDefault(),L["a"].checkAuthAndExecute(e.props.dispatch,j,e.retry(t),[null])}},"\u8865\u507f"):null)}}]),p=[{title:"\u4e8b\u52a1\u540d\u79f0",align:"center",render:function(t){return T.a.createElement("span",null,T.a.createElement("a",{style:{userSelect:"none"},onClick:function(a){a&&a.preventDefault(),L["a"].checkAuthAndExecute(e.props.dispatch,V,e.openDrawer("03","\u5206\u6b65\u4e8b\u52a1\u7ba1\u7406",t),[null])}},t.name))}},{title:"\u4e8b\u52a1\u5206\u7ec4",align:"center",dataIndex:"group"},{title:"\u4e8b\u52a1\u9636\u6bb5",dataIndex:"stage",align:"center",render:function(e){return 0===e?T.a.createElement("span",null,"Try"):1===e?T.a.createElement("span",null,"Confirm"):-1===e?T.a.createElement("span",null,"Cancel"):-2===e?T.a.createElement("span",null,"\u8d85\u65f6"):-3===e?T.a.createElement("span",null,"\u7ec8\u6b62"):void 0}},{title:"\u4e8b\u52a1\u72b6\u6001",dataIndex:"status",align:"center",render:function(e){return 0===e?T.a.createElement("span",null,"\u672a\u7ed3\u675f"):1===e?T.a.createElement("span",null,"\u6210\u529f"):-1===e?T.a.createElement("span",{style:{color:"red"}},"\u5931\u8d25"):void 0}},{title:"\u8d85\u65f6\u65f6\u95f4",dataIndex:"timeout",align:"center"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime",align:"center",render:function(e){return T.a.createElement("span",null,e&&M()(e).format("YYYY-MM-DD"),T.a.createElement("br",null),e&&M()(e).format("HH:mm:ss"))}},{title:"\u64cd\u4f5c",align:"center",width:"15%",render:function(t){return T.a.createElement(T.a.Fragment,null,0==t.status?T.a.createElement("div",null,T.a.createElement("a",{onClick:function(a){a&&a.preventDefault(),L["a"].checkAuthAndExecute(e.props.dispatch,q,e.stop(t),[null])}},"\u505c\u6b62"),T.a.createElement(c["a"],{type:"vertical"})):null,t.stage>=0&&1==t.status?T.a.createElement("a",{onClick:function(a){a&&a.preventDefault(),L["a"].checkAuthAndExecute(e.props.dispatch,B,e.del(t),[null])}},"\u5220\u9664"):null)}}],m={pageSize:15},f=T.a.createElement("div",null,T.a.createElement("span",null,this.state.shuju)),h=T.a.createElement(T.a.Fragment,null,"03"==this.state.type?T.a.createElement(r["a"],{pagination:m,columns:d,dataSource:this.state.BranchList,size:"small"}):null);return T.a.createElement("div",null,T.a.createElement("div",{className:C.a.header},T.a.createElement(x["a"],{onSubmit:this.handleSearch,layout:"inline"},T.a.createElement("div",{className:C.a.search},T.a.createElement("div",null,T.a.createElement("div",{className:C.a.cols},T.a.createElement(z,{label:T.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u4e8b\u52a1\u540d\u79f0")},t("swname")(T.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165\u4e8b\u52a1\u540d\u79f0",style:{width:200}}))),T.a.createElement(z,{label:T.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u4e8b\u52a1\u5206\u7ec4")},t("group")(T.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165\u4e8b\u52a1\u5206\u7ec4",style:{width:200}}))),T.a.createElement(z,{label:T.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u72b6\u6001")},t("status")(T.a.createElement(w["a"],{style:{width:100},placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001\uff01",allowClear:!0},T.a.createElement(G,{value:null},"\u5168\u90e8"),T.a.createElement(G,{value:0},"\u672a\u7ed3\u675f"),T.a.createElement(G,{value:1},"\u5df2\u7ed3\u675f"),T.a.createElement(G,{value:-1},"\u975e\u6b63\u5e38\u7ed3\u675f")))))),T.a.createElement("span",{className:C.a.submitButtons},T.a.createElement(l["a"],{type:"primary",onClick:function(t){t&&t.preventDefault(),L["a"].checkAuthAndExecute(e.props.dispatch,Y,e.handleSearch(),[null])}},"\u67e5\u8be2"),T.a.createElement(l["a"],{style:{marginLeft:8},onClick:function(){e.props.form.resetFields(),e.query(),e.setState({cxRole:[]}),o["a"].success("\u91cd\u7f6e\u6210\u529f")}},"\u91cd\u7f6e"))))),T.a.createElement("div",{className:C.a.content},T.a.createElement("div",null,T.a.createElement(r["a"],{pagination:m,columns:p,dataSource:u,loading:this.state.Tableloading,size:"small"}))),T.a.createElement(n["a"],{title:T.a.createElement(T.a.Fragment,null,this.state.drawerTitle),onClose:this.drawerClose,visible:this.state.visible,destroyOnClose:!0},h,"03"!=this.state.type?T.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},T.a.createElement(l["a"],{onClick:this.drawerClose,style:{marginRight:8}},"\u53d6\u6d88"),T.a.createElement(l["a"],{type:"primary",onClick:this.handleSubmit},"\u786e\u5b9a")):null),T.a.createElement(v["a"],{title:"\u6570\u636e",visible:this.state.visible2,onCancel:this.handleCancel,footer:null,destroyOnClose:!0}," ",f))}}]),a}(k["Component"]));t["default"]=Object(F["connect"])(function(e){return e.qxglModel})(x["a"].create()(H))},suEo:function(e,t,a){e.exports={header:"antd-pro-pages-transaction-index-header",search:"antd-pro-pages-transaction-index-search",cols:"antd-pro-pages-transaction-index-cols",content:"antd-pro-pages-transaction-index-content",btns:"antd-pro-pages-transaction-index-btns",modelMsg:"antd-pro-pages-transaction-index-modelMsg"}}}]);