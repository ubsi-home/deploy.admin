(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[110],{"7TrO":function(e,_,t){"use strict";t("bbsP");var a,n,l=t("/wGt"),s=(t("g9YV"),t("wCAj")),o=(t("+L6B"),t("2/Rp")),r=(t("5NDa"),t("5rEg")),i=(t("+BJd"),t("mr32")),u=(t("qVdP"),t("jsC+")),d=(t("lUTK"),t("BvKs")),c=t("2Taf"),E=t.n(c),m=t("vZ4D"),p=t.n(m),M=t("MhPg"),g=t.n(M),D=t("l4Ni"),b=t.n(D),h=t("ujKo"),O=t.n(h),y=(t("OaEy"),t("2fM7")),P=(t("y8nQ"),t("Vl3Y")),f=t("q1tI"),C=t.n(f),T=t("MuoO"),A=t("ne2a"),R=t.n(A),B=t("jehZ"),I=t.n(B),w=t("p0pE"),U=t.n(w),L=(t("miYZ"),t("tsqr"));function K(e){var _=k();return function(){var t,a=O()(e);if(_){var n=O()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return b()(this,t)}}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var W=y["a"].Option,v=y["a"].OptGroup,S=(a=Object(T["connect"])(function(e){var _=e.tag2,t=e.loading;return{tag2:_,loading:t.models.tag2}}),a(n=function(e){g()(t,e);var _=K(t);function t(e){var a;E()(this,t),a=_.call(this,e),a.initSelectData=function(e){var _=e.code,t=e.datas;if(_&&_>=200&&_<300){var n=t?t.tags:[];a.setState({tags:n})}else a.showMessage("\u9519\u8bef\uff1a\u83b7\u53d6select Tags\u5931\u8d25\uff01",1)},a.handleChange=function(e){a.setState({value:e}),a.triggerChange(e)},a.triggerChange=function(e){var _=a.props.onChange;_&&_(e)};var n=e.defaultValue||[],l=n||[];return n&&Array.isArray(n)&&n.length>0&&a.handleChange(n),a.state={defaultValue:n,value:l||[],tags:[]},a}return p()(t,[{key:"componentDidMount",value:function(){var e=this,_=this.props,t=_.param,a=_.dispatch;if(t&&t.length>0){var n="";t&&Array.isArray(t)&&t.map(function(e,_){_==t.length-1?n+=e:n+=e+","});var l={env:n};try{a({type:"tag2/commonList",payload:l,callback:function(_){e.initSelectData(_)}})}catch(e){}}}},{key:"showMessage",value:function(e,_){_||(_=1),1===_?L["a"].error(e):2===_?L["a"].warning(e):3===_?L["a"].success(e):L["a"].error("\u9519\u8bef\uff1a\u9519\u8bef\u53c2\u6570\uff1alevel="+_)}},{key:"render",value:function(){var e=this.props,_=(e.name,e.size),t=e.style,a=(e.multiple,e.showArrow,e.width),n=e.disabled,l=this.state.defaultValue,s=this.state.tags,o={size:_||"default",style:U()({},t),width:a||"100%",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9",disabled:n||!1},r=this.props.value;return C.a.createElement("div",null,C.a.createElement(y["a"],I()({},o,{onChange:this.handleChange,defaultValue:l||[],value:r,placeholder:"\u8bf7\u9009\u62e9"}),s?s.map(function(e){e._id,e.name;return C.a.createElement(v,{label:e.name,key:e._id},e.tagValue?e.tagValue.map(function(e){return C.a.createElement(W,{value:e.value,key:e.value},e.value)}):"")}):""))}}],[{key:"getDerivedStateFromProps",value:function(e,_){var t,a=e.defaultValue;e.value;return a!=_.defaultValue&&(t||(t={},t.props={}),t.defaultValue=a,t.props.defaultValue=a),null}}]),t}(f["Component"]))||n),q=S;function x(e){var _=j();return function(){var t,a=O()(e);if(_){var n=O()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return b()(this,t)}}function j(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var N=P["a"].Item,V=y["a"].Option,Y=function(e){g()(t,e);var _=x(t);function t(e){var a;return E()(this,t),a=_.call(this,e),a.state={children:[],tagList:[]},a}return p()(t,[{key:"componentDidMount",value:function(){var e=this,_=this.props,t=_.dispatch,a=_.authUsers;console.log(">>>>>>>> authUsers = ",a);var n=[];a.map(function(e){return n.push(e.id)}),this.setState({rows:a||[],selectedRowKeys:n}),console.log(">>>>>>>>>> this.state.rows = "+this.state.rows);var l=new Array;l.push("account",1),t({type:"common_yhgl/index",payload:{name:null,types:null,tags:null,roles:null,domain:"system",props:null,sortBy:l,skip:0,limit:0},callback:function(_){var t=_,a=[];t.map(function(e){a.push(C.a.createElement(V,{key:e},e))}),e.setState({tagList:a})}})}},{key:"showDxmb",value:function(){this.setState({dxmbListStaus:!0})}},{key:"handleChange",value:function(e){this.setState({children:e})}},{key:"changeList",value:function(){this.setState({dxmbListStaus:!1})}},{key:"getList",value:function(e){this.setState({dxmbListStaus:!1});var _=[];e.map(function(e){_.push(e.name)}),this.setState({children:_})}},{key:"handleSearch",value:function(){var e=this.props,_=e.form,t=e.dispatch,a=_.getFieldValue("yhm")?_.getFieldValue("yhm"):null,n=_.getFieldValue("mz")?_.getFieldValue("mz"):null,l=_.getFieldValue("bq")?_.getFieldValue("bq"):[],s={},o="$regex";if(null==a||"null"==a);else{var r={};r[o]=a,console.log("====_account===",r),s.account=r}var i=new Array;i.push("account",1),t({type:"common_yhgl/dem",payload:{limit:0,skip:0,name:null==n?null:"/"+n,tags:0===l.length?null:l,domain:"system",props:0===Object.keys(s).length?null:s,sortBy:i,roles:null,types:null}})}},{key:"handleFormReset",value:function(){var e=this.props,_=e.form,t=e.dispatch;_.resetFields();var a=new Array;a.push("account",1),t({type:"common_yhgl/index",payload:{name:null,types:null,tags:null,roles:null,domain:"system",props:null,sortBy:a,skip:0,limit:0}})}},{key:"render",value:function(){var e=this,_=this.props,t=_.form,a=_.data,n=_.yhglVisible,c=_.handleSelectedYhgl,E=_.handleYhglVisible,m=this.state,p=(m.dxmbListStaus,m.children,m.tagList,m.rows),M=(m.selectStaus,t.getFieldDecorator);console.log("===========rows ",p);var g={selectedRowKeys:this.state.selectedRowKeys,type:void 0===this.props.type?"checkbox":this.props.type,onChange:function(_,t){console.log("selectedRowKeys: ".concat(_),"selectedRows: ",t),console.log("========= selectedRows = ",t),e.setState({selectedRowKeys:_,rows:t})},getCheckboxProps:function(e){if(e.disables)return{disabled:!0}}},D=function(e){return C.a.createElement(d["a"],{style:{padding:"5px 10px"}},"\u68c0\u67e5\u5bf9\u8c61\u63cf\u8ff0\uff1a",e)},b=new Array;console.log("=======data===",a),a.map(function(e,_){"admin"==e.yname?(e.disables=!0,b.push(e)):(e.disables=!1,b.push(e))}),console.log("=======datalist===",b);var h=[{title:"\u7528\u6237\u540d",dataIndex:"yname",key:"yname",align:"center"},{title:"\u59d3\u540d",dataIndex:"name",key:"name",align:"center",render:function(e,_){return C.a.createElement(u["a"],{overlay:D(_.spt)},C.a.createElement("span",null,e))}},{title:"\u7528\u6237\u6807\u7b7e",key:"tags",align:"center",dataIndex:"tags",render:function(e){return C.a.createElement("span",null,e.map(function(e){return C.a.createElement(i["a"],{color:"blue",key:e},e.toUpperCase())}))}}],O=function(_){c(e.state.rows)};return C.a.createElement("div",null,C.a.createElement(l["a"],{title:"\u7528\u6237\u5217\u8868",width:"80%",onClose:function(){return E()},visible:n,destroyOnClose:!0},C.a.createElement("div",{className:R.a.header},C.a.createElement(P["a"],{onSubmit:this.handleSearch,layout:"inline"},C.a.createElement("div",{className:R.a.search},C.a.createElement("div",null,C.a.createElement("div",{className:R.a.cols},C.a.createElement(N,{label:C.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u7528\u6237\u540d")},M("yhm")(C.a.createElement(r["a"],{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",style:{width:300}}))),C.a.createElement(N,{label:C.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u540d\u5b57")},M("mz")(C.a.createElement(r["a"],{placeholder:"\u8bf7\u8f93\u5165\u540d\u5b57",style:{width:300}})))),C.a.createElement("div",{className:R.a.cols},C.a.createElement(N,{label:C.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u6807\u7b7e")},M("bq")(C.a.createElement(q,{style:{width:300},param:["dev"]}))),C.a.createElement("div",null,C.a.createElement("span",{className:R.a.submitButtons},C.a.createElement(o["a"],{type:"primary",onClick:this.handleSearch.bind(this)},"\u67e5\u8be2"),C.a.createElement(o["a"],{style:{marginLeft:8},onClick:this.handleFormReset.bind(this)},"\u91cd\u7f6e")))))))),C.a.createElement("div",null,C.a.createElement("div",null,C.a.createElement(s["a"],{rowKey:function(e){return e.id},rowSelection:g,columns:h,dataSource:b,size:"small"})),C.a.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},C.a.createElement(o["a"],{onClick:function(){return E()},style:{marginRight:8}},"\u53d6\u6d88"),C.a.createElement(o["a"],{onClick:O,type:"primary"},"\u786e\u5b9a")))))}}]),t}(f["Component"]);_["a"]=Object(T["connect"])(function(e){return e.common_yhgl})(P["a"].create()(Y))},BRye:function(e,_,t){e.exports={content:"antd-pro-pages-xtgl-sqgl-index-content",btn:"antd-pro-pages-xtgl-sqgl-index-btn",checkList:"antd-pro-pages-xtgl-sqgl-index-checkList"}},lm1q:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var antd_es_table_style__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("g9YV"),antd_es_table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("wCAj"),antd_es_form_style__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("y8nQ"),antd_es_form__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Vl3Y"),antd_es_input_style__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5NDa"),antd_es_input__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5rEg"),antd_es_icon_style__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Pwec"),antd_es_icon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("CtXQ"),antd_es_button_style__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("+L6B"),antd_es_button__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("2/Rp"),antd_es_popconfirm_style__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("P2fV"),antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("NJEC"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("p0pE"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12__),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("jehZ"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13__),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("gWZ8"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__),antd_es_message_style__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("miYZ"),antd_es_message__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("tsqr"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("2Taf"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_17__),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("vZ4D"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_18__),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("MhPg"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_19__),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("l4Ni"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_20__),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("ujKo"),D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_21__),antd_es_tree_style__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("ozfa"),antd_es_tree__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("MJZm"),antd_es_layout_style__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("B9cy"),antd_es_layout__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("Ol7k"),react__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__("q1tI"),react__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_26__),dva__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__("MuoO"),dva__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(dva__WEBPACK_IMPORTED_MODULE_27__),_index_less__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__("BRye"),_index_less__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_28__),_components_Yhgl__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__("7TrO"),_pages_CommonUtils__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__("P4xi"),_pages_Keys__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__("6Hmz");function _createSuper(e){var _=_isNativeReflectConstruct();return function(){var t,a=D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_21___default()(e);if(_){var n=D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_21___default()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_20___default()(this,t)}}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var Content=antd_es_layout__WEBPACK_IMPORTED_MODULE_25__["a"].Content,Sider=antd_es_layout__WEBPACK_IMPORTED_MODULE_25__["a"].Sider,TreeNode=antd_es_tree__WEBPACK_IMPORTED_MODULE_23__["a"].TreeNode,keyUsers=_pages_Keys__WEBPACK_IMPORTED_MODULE_31__["a"].xtgl_sqgl_users.key,Sqgl=function(_Component){D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_19___default()(Sqgl,_Component);var _super=_createSuper(Sqgl);function Sqgl(){var e;D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_17___default()(this,Sqgl);for(var _=arguments.length,t=new Array(_),a=0;a<_;a++)t[a]=arguments[a];return e=_super.call.apply(_super,[this].concat(t)),e.state={treeStatus:!1,tableStatus:!1,yhglVisible:"false",loadStatus:!0,treeID:[],jsStyle:[],treeChecked:[],jsArr:[],dataT:[],tree:[],node:"",row:[],treeCheckedOld:null,jsArrOld:null},e.submit=function(){var _=e.props.dispatch;if(console.log("1111111111111111111111111:",e.state.treeStatus),e.state.treeStatus&&(e.state.isSet?(console.log(e.state.jsStyle),console.log(e.state.treeChecked),_({type:"sqglModel/set",payload:{actions:"2",domain:"system",value:0,roles:e.state.jsStyle,aclId:e.state.treeChecked.join(","),reqData:e.state.treeCheckedOld},callback:function(t){0===t.code?(console.log(t),_({type:"sqglModel/getMsg",payload:{domain:"system",roles:e.state.jsStyle,targetIds:null},callback:function(e){0===e.code||antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}}),antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01")):antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}})):_({type:"sqglModel/submit",payload:{actions:"2",domain:"system",targetType:"menu",value:0,roles:e.state.jsStyle,targetId:e.state.treeChecked.join(",")},callback:function(t){0===t.code?(console.log(t),antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01"),_({type:"sqglModel/getMsg",payload:{domain:"system",roles:e.state.jsStyle,targetIds:null},callback:function(_){if(0===_.code){var a=_.data.length>0;e.setState({treeChecked:_.data,isSet:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}})):antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}})),e.state.tableStatus){console.log("185====",e.state.treeID);var t=new Set(e.state.jsArr);console.log("=====187==",t);var a=D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default()(t);console.log("====189===",a),e.setState({loadStatus:!0}),_({type:"sqglModel/listAcl",payload:{targetTypes:null,targetIds:e.state.treeID,roles:null,domain:"system"},callback:function(t){if(console.log("=====201===",t),0===t.code)if(t.data.length>0){var n=t.data[0];console.log("=====205===",n);var l=n._id,s=n.auths[0];s.roles=a,console.log("=====209===",s);var o=[];o.push(s),_({type:"sqglModel/usersetAcl",payload:{aclId:l,auths:o,reqData:e.state.jsArrOld},callback:function(t){console.log("===219===",t),0===t.code?(antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].success("\u4fee\u6539\u6743\u9650\u6210\u529f\uff01"),e.setState({loadStatus:!1},function(){_({type:"sqglModel/getMsg",payload:{domain:"system",roles:null,targetIds:e.state.treeID[0]},callback:function(e){0===e.code||antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(t.message))}})})):antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u4fee\u6539\u6743\u9650\u5931\u8d25\uff01")}})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u6743\u9650\u8282\u70b9\u67e5\u8be2\u5931\u8d25\uff01")}})}},e.onSelect=function(_,t){console.log("info========================:",t),t.selected&&e.setState({treeStatus:!1,tableStatus:!0,jsStyle:null,treeID:_,tableThree:!1,loadStatus:!0});var a=e.props.dispatch;a({type:"sqglModel/getMsg",payload:{domain:"system",targetIds:t.selected?_.join(","):e.state.treeID.join(","),roles:null},callback:function(_){if(0===_.code){var t=_.data.length>0;e.setState({jsArrOld:_.data,jsArr:_.data,isSet:t,loadStatus:!1})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}})},e.onCheck=function(_,t){var a=e.state.treeChecked;e.setState({treeChecked:_,treeCheckedOld:a})},e.getJs=function(_){console.log("====e=====",_),e.setState({jsStyle:_.node,treeStatus:!0,tableStatus:!1,tableThree:!0,tableThreeName:_.name,tableThreeNode:_.node,node:_.node});var t=e.props.dispatch,a=new Array;a.push("account",1);var n=new Array;n.push(_.node),t({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:n,domain:"system",props:null,sortBy:a,skip:0,limit:0},callback:function(t){if(console.log("=====272====",t),0===t.code){var a=[];t.data[1].map(function(e){a.push({key:e._id,account:e.account,name:e.name})}),e.setState({dataT:a,dataAu:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}}),t({type:"sqglModel/getMsg",payload:{domain:"system",roles:_.node,targetIds:null},callback:function(_){if(0===_.code){console.log(_);var t=_.data.length>0;e.setState({treeChecked:_.data,isSet:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}})},e.renderTreeNodes=function(_){return _.map(function(_){return _.children?react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(TreeNode,{title:_.title,key:_.key,dataRef:_},e.renderTreeNodes(_.children)):react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(TreeNode,D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_extends__WEBPACK_IMPORTED_MODULE_13___default()({key:_.key},_))})},e}return D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_18___default()(Sqgl,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this,dispatch=this.props.dispatch,url="/publicJson/aclMenu.json";console.log("===msg===",url),fetch(url).then(function(e){return e.json()}).then(function(data){console.log("===data===",JSON.stringify(data));var reg=/[\r\n]/g,datas=JSON.stringify(data),datamenu=eval("("+datas+")"),tr=datamenu.menu;console.log("===tr===",tr),_this2.setState({tree:tr})}).catch(function(e){return console.log("Oops, error",e)}),dispatch({type:"sqglModel/getRoleTree",payload:{tags:null,depth:0,name:null,domain:"system"},callback:function(){_this2.setState({loadStatus:!1})}})}},{key:"cxjs",value:function(){var e=this.props,_=e.form,t=e.dispatch,a=_.getFieldValue("jsName")?_.getFieldValue("jsName"):null;t({type:"sqglModel/dem",payload:{tags:null,depth:0,name:a,domain:"system"}})}},{key:"cxjsReset",value:function(){var e=this,_=this.props,t=_.form,a=_.dispatch;t.resetFields(),a({type:"sqglModel/getRoleTree",payload:{tags:null,depth:0,name:null,domain:"system"},callback:function(){e.setState({loadStatus:!1})}})}},{key:"cxyh",value:function(){var e=this,_=this.props,t=_.form,a=_.dispatch,n=t.getFieldValue("yhName")?t.getFieldValue("yhName"):null,l="$regex",s={},o=new Array;if(o.push("account",1),null==n||"null"==n);else{var r={};r[l]=n,console.log("====_account===",r),s.account=r}a({type:"sqglModel/listUser",payload:{limit:0,skip:0,name:null,types:null,tags:null,roles:null,domain:"system",props:0===Object.keys(s).length?null:s,sortBy:o},callback:function(_){if(console.log("====380====",_),0===_.code){var t=[];_.data[1].map(function(e){t.push({key:e._id,account:e.account,name:e.name})}),e.setState({dataT:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}})}},{key:"cxyhReset",value:function(){var e=this,_=this.props,t=_.form,a=_.dispatch;t.resetFields();var n=new Array;n.push("account",1);var l=new Array;l.push(this.state.tableThreeNode),a({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:l,domain:"system",props:null,sortBy:n,skip:0,limit:0},callback:function(_){if(0===_.code){var t=[];_.data[1].map(function(e){t.push({key:e._id,account:e.account,name:e.name})}),e.setState({dataT:t,dataAu:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(_.message))}})}},{key:"confirm",value:function(e){var _=this,t=this.state.dataT.filter(function(_){return _!==e}),a=this.props.dispatch,n=[];t.map(function(e){n.push(e.key)}),a({type:"sqglModel/addUser",payload:{roleID:this.state.tableThreeNode,userID:n?n.join(","):null,domain:"system",reqData:this.state.dataT},callback:function(e){if(0===e.code){var t=new Array;t.push("account",1);var n=new Array;n.push(_.state.tableThreeNode),antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].success("\u5220\u9664\u7528\u6237\u6210\u529f"),a({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:n,domain:"system",props:null,sortBy:t,skip:0,limit:0},callback:function(t){if(0===t.code){var a=[];t.data[1].map(function(e){a.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:a,dataAu:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5220\u9664\u7528\u6237\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}},{key:"showYh",value:function(e){console.log("========authUsers = ",e),!e||e.length<1?e=[]:e.map(function(_,t){var a=D_MyCode_npmgit_noauditlog_rewin_web_ubsi_admin_node_modules_babel_preset_umi_node_modules_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_12___default()({id:_.key},_);e[t]=a}),console.log("========authUsers = ",e),this.setState({yhglVisible:"true",authUsers:e})}},{key:"getYhglMsg",value:function(e){var _=this,t=this.props.dispatch;this.setState({yhglVisible:"false"});var a=[];e.map(function(e){a.push(e.id)}),console.log("=====this.state.jsStyle===",this.state.jsStyle);var n=this.state.jsStyle;0!==n.length?t({type:"sqglModel/addUser",payload:{roleID:this.state.jsStyle,userID:a?a.join(","):null,domain:"system",reqData:this.state.authUsers},callback:function(e){if(0===e.code){antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].success("\u6dfb\u52a0/\u4fee\u6539\u7528\u6237\u6210\u529f");var a=new Array;a.push("account",1);var n=new Array;n.push(_.state.jsStyle),t({type:"sqglModel/listUserByNode",payload:{name:null,types:null,tags:null,roles:n,domain:"system",props:null,sortBy:a,skip:0,limit:0},callback:function(t){if(0===e.code){var a=[];t.data[1].map(function(e){a.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:a,dataAu:a})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u6dfb\u52a0/\u4fee\u6539\u7528\u6237\u5931\u8d25,\u539f\u56e0\u4e3a\uff1a".concat(e.message))}}):antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u8bf7\u5148\u9009\u62e9\u89d2\u8272\uff01")}},{key:"close",value:function(){this.setState({yhglVisible:"false"})}},{key:"showYhTable",value:function(e){var _=this;console.log("showYhTable===========",e);var t=this.props.dispatch;this.setState({tableThree:!0,tableThreeName:e.name,tableThreeNode:e.node,jsStyle:e.node}),t({type:"sqglModel/listUserByNode",payload:{node:e.node},callback:function(e){if(0===e.code){console.log("====519----",e);var t=[];e.data[1].map(function(e){t.push({key:e._id,account:e.account,name:e.name})}),_.setState({dataT:t,dataAu:t})}else antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].error("\u5931\u8d25\uff0c\u539f\u56e0\u4e3a\uff1a".concat(e.message))}})}},{key:"closeYhTable",value:function(){this.setState({tableThree:!1})}},{key:"render",value:function(){var e=this,_=this.props,t=_.form,a=_.jsList;console.log("===jsList===",a);var n=this.state,l=n.tableStatus,s=n.treeStatus,o=n.treeChecked,r=n.jsStyle,i=n.jsArr,u=(n.tableThree,n.dataT),d=n.dataAu,c=n.tree,E=n.tableThreeName,m=t.getFieldDecorator;console.log("===tableStatus==",l);var p=[{title:"\u89d2\u8272",render:function(_){return react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("a",{style:r===_.node?{color:"#fa541c"}:{color:"rgba(0,0,0,.65)"},onClick:function(t){t&&t.preventDefault(),_pages_CommonUtils__WEBPACK_IMPORTED_MODULE_30__["a"].checkAuthAndExecute(e.props.dispatch,keyUsers,e.getJs,[_])}},_.name)}}],M=[{title:"\u7528\u6237\u540d",align:"center",render:function(e){return react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",null,e.account)}},{title:"\u59d3\u540d",align:"center",render:function(e){return react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",null,e.name)}},{title:"\u64cd\u4f5c",align:"center",key:"action",render:function(_){return react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_popconfirm__WEBPACK_IMPORTED_MODULE_11__["a"],{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u7528\u6237?",onConfirm:e.confirm.bind(e,_),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",disabled:"admin"==_.account},"admin"==_.account?react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("a",{onClick:function(){return antd_es_message__WEBPACK_IMPORTED_MODULE_16__["a"].warning("\u8d85\u7ea7\u7528\u6237\u4e0d\u80fd\u5220\u9664\uff01")}},"\u5220\u9664"):react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("a",{href:"javaSrcipt:;"},"\u5220\u9664")))}}],g={selectedRowKeys:i,onChange:function(_,t){console.log("===selectedRowKeys==",_),console.log("===selectedRows==",t),e.setState({jsArr:_,row:t})},getCheckboxProps:function(e){return{defaultChecked:i.includes(e.node)}}};return console.log(c),console.log("====dataAu===",this.state.dataAu),console.log("====dataT1111===",u),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",{style:{width:"100%",background:"#fff",marginBottom:".3%",display:"flex",justifyContent:"flex-start"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{type:"primary",style:{margin:"5px",width:"20%"},onClick:this.submit.bind(this)},"\u63d0\u4ea4")),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",{className:_index_less__WEBPACK_IMPORTED_MODULE_28___default.a.content},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_layout__WEBPACK_IMPORTED_MODULE_25__["a"],null,react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(Sider,{width:300,style:{background:"#fff"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_tree__WEBPACK_IMPORTED_MODULE_23__["a"],{checkable:s,showLine:!0,switcherIcon:react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"down"}),onSelect:this.onSelect,onCheck:this.onCheck,checkedKeys:o||[]},this.renderTreeNodes(c))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_layout__WEBPACK_IMPORTED_MODULE_25__["a"],{style:{padding:"0 5px"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(Content,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"],{style:{display:"flex",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"].Item,null,m("jsName")(react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_5__["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u89d2\u8272\u540d",style:{width:170}}))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",{className:_index_less__WEBPACK_IMPORTED_MODULE_28___default.a.submitButtons},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{type:"primary",style:{margin:"0 10px"},onClick:this.cxjs.bind(this)},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"search"})),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{onClick:this.cxjsReset.bind(this)},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"reload"}))))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_table__WEBPACK_IMPORTED_MODULE_1__["a"],{rowSelection:l?g:null,columns:p,dataSource:a,size:"small",loading:this.state.loadStatus,rowKey:function(e){return e.node}})))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_layout__WEBPACK_IMPORTED_MODULE_25__["a"],{style:{padding:"0"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(Content,{style:{background:"#fff",padding:24,margin:0,minHeight:280}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",{style:{marginBottom:10}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"],{style:{display:"flex",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"].Item,null,m("yhName")(react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_input__WEBPACK_IMPORTED_MODULE_5__["a"],{placeholder:"\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u7684\u7528\u6237\u540d",style:{width:170}}))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",{className:_index_less__WEBPACK_IMPORTED_MODULE_28___default.a.submitButtons},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{type:"primary",style:{margin:"0 10px"},onClick:this.cxyh.bind(this)},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"search"})),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{onClick:this.cxyhReset.bind(this)},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_icon__WEBPACK_IMPORTED_MODULE_7__["a"],{type:"reload"})))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",{style:{display:"flex",justifyContent:" space-between",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",null,"\u6240\u5c5e\u89d2\u8272\uff1a"),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement("span",null,E)),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_button__WEBPACK_IMPORTED_MODULE_9__["a"],{style:{margin:"5px 0 2px"},onClick:this.showYh.bind(this,d),disabled:""==E||void 0==E||"undefined"==E},"\u6dfb\u52a0/\u4fee\u6539\u7528\u6237"))),react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(antd_es_table__WEBPACK_IMPORTED_MODULE_1__["a"],{columns:M,dataSource:u,size:"small"})))))),"true"==this.state.yhglVisible?react__WEBPACK_IMPORTED_MODULE_26___default.a.createElement(_components_Yhgl__WEBPACK_IMPORTED_MODULE_29__["a"],{yhglVisible:this.state.yhglVisible,authUsers:this.state.authUsers||[],handleSelectedYhgl:this.getYhglMsg.bind(this),handleYhglVisible:this.close.bind(this)}):null)}}]),Sqgl}(react__WEBPACK_IMPORTED_MODULE_26__["Component"]);__webpack_exports__["default"]=Object(dva__WEBPACK_IMPORTED_MODULE_27__["connect"])(function(e){return e.sqglModel})(antd_es_form__WEBPACK_IMPORTED_MODULE_3__["a"].create()(Sqgl))},ne2a:function(e,_,t){e.exports={header:"antd-pro-pages-xtgl-sqgl-components-yhgl-header",search:"antd-pro-pages-xtgl-sqgl-components-yhgl-search",cols:"antd-pro-pages-xtgl-sqgl-components-yhgl-cols",content:"antd-pro-pages-xtgl-sqgl-components-yhgl-content",btns:"antd-pro-pages-xtgl-sqgl-components-yhgl-btns",modelMsg:"antd-pro-pages-xtgl-sqgl-components-yhgl-modelMsg",check:"antd-pro-pages-xtgl-sqgl-components-yhgl-check",arrow:"antd-pro-pages-xtgl-sqgl-components-yhgl-arrow"}}}]);