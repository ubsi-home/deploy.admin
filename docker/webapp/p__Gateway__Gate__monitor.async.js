(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{Bmu8:function(e,t,a){e.exports={tableList:"antd-pro-pages-gateway-gate-gate-tableList",tableListOperator:"antd-pro-pages-gateway-gate-gate-tableListOperator",tableListForm:"antd-pro-pages-gateway-gate-gate-tableListForm",submitButtons:"antd-pro-pages-gateway-gate-gate-submitButtons",tableListFormAdd:"antd-pro-pages-gateway-gate-gate-tableListFormAdd"}},UPt0:function(e,t,a){e.exports={standardList:"antd-pro-pages-gateway-gate-rqlb-standardList",headerInfo:"antd-pro-pages-gateway-gate-rqlb-headerInfo",listContent:"antd-pro-pages-gateway-gate-rqlb-listContent",listContentItem:"antd-pro-pages-gateway-gate-rqlb-listContentItem",extraContentSearch:"antd-pro-pages-gateway-gate-rqlb-extraContentSearch",listCard:"antd-pro-pages-gateway-gate-rqlb-listCard",standardListForm:"antd-pro-pages-gateway-gate-rqlb-standardListForm",formResult:"antd-pro-pages-gateway-gate-rqlb-formResult"}},qBqJ:function(e,t,a){"use strict";a.r(t);a("bbsP");var n=a("/wGt"),r=(a("g9YV"),a("wCAj")),o=(a("IzEo"),a("bx4M")),l=(a("jCWc"),a("kPKH")),i=(a("14J3"),a("BMrR")),s=(a("+L6B"),a("2/Rp")),c=a("p0pE"),u=a.n(c),p=a("eHn4"),d=a.n(p),m=(a("miYZ"),a("tsqr")),f=(a("2qtc"),a("kLXV")),h=(a("/zsF"),a("PArb")),g=(a("Pwec"),a("CtXQ")),v=a("2Taf"),y=a.n(v),b=a("vZ4D"),E=a.n(b),w=a("rlhR"),x=a.n(w),k=a("MhPg"),S=a.n(k),C=a("l4Ni"),F=a.n(C),M=a("ujKo"),A=a.n(M),R=(a("y8nQ"),a("Vl3Y")),V=(a("OaEy"),a("2fM7")),D=(a("fu2T"),a("gK9i")),T=(a("5NDa"),a("5rEg")),z=a("q1tI"),I=a.n(z),O=a("MuoO"),Y=a("wd/R"),P=a.n(Y),L=a("zHco"),q=a("vQLQ"),G=a.n(q),B=a("Bmu8"),j=a.n(B),H=a("UPt0"),N=a.n(H),_=(a("Znn+"),a("ZTPi")),K=a("yP6+"),Q=(a("1Gbu"),a("cQSq")),J=a.n(Q),W=a("gWZ8"),U=a.n(W);function Z(e){var t=X();return function(){var a,n=A()(e);if(t){var r=A()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return F()(this,a)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $,ee,te=function(e){S()(a,e);var t=Z(a);function a(e){return y()(this,a),t.call(this,e)}return E()(a,[{key:"render",value:function(){var e=function(e,t){var a=U()(e);return a.sort(function(e,a){var n=e[t]||"",r=a[t]||"";return n<r?1:n===r?0:-1}),a},t=J.a.DataView,a=K["Guide"].Html,n=e(this.props.salesPieData,"count").length,r=n<=10?e(this.props.salesPieData,"count"):e(this.props.salesPieData,"count").slice(0,10),o=new t;o.source(r).transform({type:"percent",field:"count",dimension:"item",as:"percent"});return I.a.createElement("div",null,I.a.createElement(K["Chart"],{data:o,padding:[12,50,200,50],forceFit:!0},I.a.createElement(K["Coord"],{type:"theta",radius:1,innerRadius:.7}),I.a.createElement(K["Axis"],{name:"percent"}),I.a.createElement(K["Tooltip"],{showTitle:!1,itemTpl:'<li><span style="background-color:{color};" class="g2-tooltip-marker"></span>{name}: {value}</li>'}),I.a.createElement(K["Guide"],null,I.a.createElement(a,{position:["50%","50%"],html:'<div style="color:#8c8c8c;font-size:1em;text-align: center;width: 10em">\n              \u7d2f\u8ba1\u8bbf\u95ee\u91cf<br>\n              <span style="color:#262626;font-size:1.5em;text-align: center;">'.concat(this.props.Amount,'</span>\n              <br><span>\u6700\u8fd1\u8bbf\u95ee\u91cf</span><br>\n              <span style="color:#262626;font-size:1.5em;text-align: center;">').concat(this.props.zuixinamount,"</span>\n              </div>")})),I.a.createElement(K["Geom"],{type:"intervalStack",position:"percent",color:"item",tooltip:["item*percent",function(e,t){return t=(100*t).toFixed(2)+"%",{name:e,value:t}}],style:{lineWidth:.7,stroke:"#fff"}})))}}]),a}(I.a.Component),ae=te;function ne(e){var t=re();return function(){var a,n=A()(e);if(t){var r=A()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return F()(this,a)}}function re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var oe,le,ie,se=_["a"].TabPane,ce=($=Object(O["connect"])(function(e){var t=e.gate,a=e.loading;return{gate:t,loading:a.models.gate}}),$(ee=function(e){S()(a,e);var t=ne(a);function a(e){var n;return y()(this,a),n=t.call(this,e),n.state={accessData:"",time:0,titlemsg:"",timeagin:0,zuixinamount:0,salesType:"all",wfwlbvisible:!1,timeKey:0},n.tick=function(e){var t=n.props.dispatch;t({type:"gate/groupAccessFetch",payload:{time:e},callback:function(e){if(0==e.code){var t=n.state.accessData,a=new Array;a=e.data;var r=a[a.length-1];t.push(r);var o=n.state.timeKey;for(var l in 1==o?t.length>1440&&t.shift():2==o?t.length>720&&t.shift():3==o?t.length>360&&t.shift():4==o?t.length>180&&t.shift():5==o&&t.length>60&&t.shift(),n.setState({accessData:t}),r)n.setState({time:r[l].time})}}})},n.callback=function(e){var t=0,a=n.state.time;t=2==e?a-432e5:3==e?a-216e5:4==e?a-108e5:5==e?a-36e5:0,n.setState({timeagin:t,timeKey:e});var r=n.props.dispatch;r({type:"gate/groupAccessFetch",payload:{time:t},callback:function(e){if(0==e.code){var t=new Array;t=e.data;var a=t[t.length-1];for(var r in n.setState({accessData:e.data}),a)n.setState({time:a[r].time})}else m["a"].error(e.data)}})},n.wfwlbshowModal=function(){n.setState({wfwlbvisible:!0})},n.wfwlbhandleCancel=function(e){n.setState({wfwlbvisible:!1})},n}return E()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"gate/groupAccessFetch",payload:{time:this.state.time},callback:function(t){if(0==t.code){var a=new Array;a=t.data;var n=a[a.length-1];e.setState({accessData:t.data}),n&&n.map(function(t){console.log("lastAccess==================:",t.time),e.setState({time:t.time,timeKey:1})})}}}),this.interval=setInterval(function(){return e.tick(e.state.time)},6e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,t=(e.title,e.height,e.padding,e.titleMap,e.borderWidth,e.loading,e.xzoptions),a=(this.state.salesType,new Array),n=new Array,c=this.state.accessData,u=new Array,p=new Map,d=0,m=c.length;u=c[m-1];var h=0;for(var g in u){var v=u[g];t.includes(v._id)&&(h+=v.curCount)}for(var y=new Map,b=0;b<c.length;b++){var E=c[b],w=0;for(var g in E)t.includes(E[g]._id)&&(d+=E[g].curCount,y.has(E[g].host+":"+E[g].port)?(w=y.get(E[g].host+":"+E[g].port)+E[g].curCount,y.set(E[g].host+":"+E[g].port,w)):y.set(E[g].host+":"+E[g].port,E[g].curCount),p.set("key",0))}var x=Array.from(y);p.delete("key");for(var k=Array.from(p),S=new Array,C=new Array,F=0,M=0;M<k.length;M++)""!=k[M][0]&&t.includes(k[M][0])&&(F+=k[M][1]);for(b=0;b<k.length;b++){var A=new Map,R=new Map;""!=k[b][0]&&(1*k[b][1]!==0&&t.includes(k[b][0])&&(A.item=k[b][0],A.count=k[b][1],R.name=k[b][0],R.amount=k[b][1],R.Percentage=(k[b][1]/F*100).toFixed(2)+"%",C.push(R),S.push(A)))}var V,D,T=new Array,z=new Array;for(b=0;b<x.length;b++){var O=new Map,Y=new Map;O.item=x[b][0],O.count=x[b][1],Y.name=x[b][0],Y.amount=x[b][1],Y.Percentage=0!=d?(x[b][1]/d*100).toFixed(2)+"%":(0).toFixed(2)+"%",T.push(Y),z.push(O)}var P=[];"1"==this.props.msgflag?(D=S,V=C,this.state.titlemsg="\u7f51\u5173\u8bbf\u95ee\u91cf\u7edf\u8ba1",P=[{title:"\u5fae\u670d\u52a1\u540d",dataIndex:"name"},{title:"\u8bbf\u95ee\u6570\u91cf",dataIndex:"amount",defaultSortOrder:"descend",sorter:function(e,t){return e.amount-t.amount}},{title:"\u767e\u5206\u6bd4",dataIndex:"Percentage"}]):"2"==this.props.msgflag&&(D=z,V=T,this.state.titlemsg="\u7f51\u5173\u8bbf\u95ee\u91cf\u7edf\u8ba1",P=[{title:"\u7f51\u5173",dataIndex:"name"},{title:"\u8bbf\u95ee\u6570\u91cf",dataIndex:"amount",defaultSortOrder:"descend",sorter:function(e,t){return e.amount-t.amount}},{title:"\u767e\u5206\u6bd4",dataIndex:"Percentage"}]);for(var L=0;L<c.length;L++){var q=0,G=new Map;for(var g in c[L]){var B=c[L][g];t.includes(B._id)&&(q+=B.curCount);var j=c[L][g].time}G.fwamount=q,G.timestamp=j,a.push(G)}0==n.length&&(n=[{timestamp:0,amount:0}]),0==a.length&&(a=[{timestamp:0,fwamount:0}]);var H=null;H=a,this.setState({zuixinamount:h,zAmount:d});var N=new J.a({state:{start:H[0].timestamp,end:H[H.length-1].timestamp}}),Q=N.createView();Q.source(H).transform({type:"filter",callback:function(e){var t=e.timestamp;return t<=N.state.end&&t>=N.state.start}}),Q.transform({type:"fold",fields:["fwamount"],key:"city",value:"\u8bbf\u95ee\u91cf"});var W={timestamp:{type:"time",mask:"HH:mm",range:[0,1]},"\u8bbf\u95ee\u91cf":{minTickInterval:1}},U=I.a.createElement("div",null,I.a.createElement(s["a"],{key:"cancel",type:"primary",style:{marginRight:"20px"},onClick:this.wfwlbshowModal},"\u5217\u8868"));return I.a.createElement("div",null,I.a.createElement(i["a"],{span:24},I.a.createElement(l["a"],{span:15,style:{marginTop:"24px"}},I.a.createElement(o["a"],{bordered:!1,style:{height:"430px"}},I.a.createElement(_["a"],{defaultActiveKey:"1",onChange:this.callback.bind(this)},I.a.createElement(se,{tab:"24\u5c0f\u65f6",key:"1"}),I.a.createElement(se,{tab:"12\u5c0f\u65f6",key:"2"}),I.a.createElement(se,{tab:"6\u5c0f\u65f6",key:"3"}),I.a.createElement(se,{tab:"3\u5c0f\u65f6",key:"4"}),I.a.createElement(se,{tab:"1\u5c0f\u65f6",key:"5"})),I.a.createElement("div",{style:{textAlign:"center"}},I.a.createElement("span",null,this.props.msg)),I.a.createElement(K["Chart"],{height:350,data:Q,scale:W,forceFit:!0,style:{marginLeft:"-40px",paddingTop:"10px"}},I.a.createElement(K["Legend"],null),I.a.createElement(K["Axis"],{name:"timestamp"}),I.a.createElement(K["Axis"],{name:""}),I.a.createElement(K["Tooltip"],{crosshairs:{type:"y"}}),I.a.createElement(K["Geom"],{type:"line",position:"timestamp*\u8bbf\u95ee\u91cf",size:2})))),I.a.createElement(l["a"],{span:9,style:{marginTop:"24px"}},I.a.createElement(o["a"],{title:this.props.YBmsg,extra:U,bordered:!1,style:{marginLeft:"6%",height:"430px"}},I.a.createElement(ae,{Amount:this.state.zAmount,salesPieData:D,zuixinamount:this.state.zuixinamount})))),I.a.createElement(f["a"],{title:this.state.titlemsg,visible:this.state.wfwlbvisible,onCancel:this.wfwlbhandleCancel,footer:null},I.a.createElement(r["a"],{columns:P,dataSource:V,size:"small"})))}}]),a}(z["PureComponent"]))||ee),ue=ce,pe=(a("BSQV"),a("3a4m")),de=a.n(pe);function me(e){var t=fe();return function(){var a,n=A()(e);if(t){var r=A()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return F()(this,a)}}function fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var he=R["a"].Item,ge=f["a"].confirm,ve=V["a"].Option,ye=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")};oe=Object(O["connect"])(function(e){var t=e.gate,a=e.loading;return{gate:t,loading:a.models.gate}}),le=R["a"].create(),oe(ie=le(ie=function(e){S()(a,e);var t=me(a);function a(){var e;y()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),e.state={modalVisible:!1,formValues:{},options:[],modalVisible2:!1,groupOpt:""},e.columns=[{title:"\u7f51\u5173\u5206\u7ec4",dataIndex:"group",align:"center"},{title:"\u4e3b\u673a\u5730\u5740",dataIndex:"host",align:"center"},{title:"\u76d1\u542c\u7aef\u53e3",dataIndex:"port",align:"center"},{title:"\u6d3b\u52a8\u65f6\u95f4\u6233",dataIndex:"timeActive",align:"center",render:function(e){return I.a.createElement("span",null,P()(e).format("YYYY-MM-DD"),I.a.createElement("br",null),P()(e).format("HH:mm:ss"))}},{title:"\u542f\u52a8\u65f6\u95f4\u6233",dataIndex:"timeStart",align:"center",render:function(e){return I.a.createElement("span",null,P()(e).format("YYYY-MM-DD"),I.a.createElement("br",null),P()(e).format("HH:mm:ss"))}},{title:"\u64cd\u4f5c",align:"center",render:function(t){return I.a.createElement("span",null,I.a.createElement("a",{href:"javaSrcipt:;",onClick:function(){return e.handleMenuClick(t._id)}},"\u5220\u9664"),I.a.createElement(h["a"],{type:"vertical"}),I.a.createElement("a",{href:"javaSrcipt:;",onClick:function(){return e.handleModalVisible2(!0,t)}},"\u8bf7\u6c42\u7edf\u8ba1"))}}],e.handleStandardTableChange=function(t,a,n){var r=e.props.dispatch,o=e.state.formValues,l=Object.keys(a).reduce(function(e,t){var n=u()({},e);return n[t]=ye(a[t]),n},{}),i=u()({skip:(t.current-1)*t.pageSize,limit:t.pageSize},o,l);n.field&&(i.sorter="".concat(n.field,"_").concat(n.order)),r({type:"gate/fetch",payload:i})},e.previewItem=function(e){de.a.push("/profile/basic/".concat(e))},e.handleFormReset=function(){var t=e.props,a=t.form,n=t.dispatch;a.resetFields(),e.setState({formValues:{}}),n({type:"gate/fetch",payload:{limit:0,skip:0}})},e.handleMenuClick=function(t){var a=e.props,n=a.dispatch;a.form;ge({title:"\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u5df2\u9009\u4e2d\u7f51\u5173\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u653e\u5f03",onOk:function(){n({type:"gate/remove",payload:{id:t},callback:function(){n({type:"gate/fetch",payload:{limit:0,skip:0}})}})},onCancel:function(){}})},e.setGroupOpt=function(){var t=e.props.gate.group;console.log(e.props.gate);var a=[];void 0!=t&&t.length>0&&t.forEach(function(e,t){a.push(I.a.createElement(ve,{key:e},e))}),e.setState({groupOpt:a})},e.handleSearch=function(t){t&&t.preventDefault();var a=e.props,n=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r={group:a.group,host:a.host,limit:0,skip:0};e.setState({formValues:r}),n({type:"gate/fetch",payload:r})}})},e.handleModalVisible=function(t){e.setState({modalVisible:!!t})},e.handleModalVisible2=function(t,a){e.setState({modalVisible2:!!t,record:a})},e.showModal2=function(t){e.setState({visible2:!0,jid_jcgx:t})},e.handleCancel2=function(t){e.setState({visible2:!1}),e.handleSearch(t)},e.showModal3=function(t){e.setState({visible3:!0,jid_jarbq:t})},e.handleCancel3=function(t){e.setState({visible3:!1}),e.handleSearch(t)},e}return E()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;this.props.gate.group;e({type:"gate/fetch",payload:{limit:0,skip:0}}),e({type:"gate/fetchGroupInGate",payload:{}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return I.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},I.a.createElement(i["a"],{gutter:{md:8,lg:24,xl:48}},I.a.createElement(l["a"],{md:8,sm:24},I.a.createElement(he,{label:"\u7f51\u5173\u5206\u7ec4"},e("group",{rules:[{required:!1,message:"\u7f51\u5173\u5206\u7ec4!"}]})(I.a.createElement(V["a"],{style:{width:"100%"},onFocus:this.setGroupOpt},this.state.groupOpt)))),I.a.createElement(l["a"],{md:8,sm:24},I.a.createElement(he,{label:"\u4e3b\u673a\u5730\u5740"},e("host",{rules:[{required:!1,message:"\u4e3b\u673a\u5730\u5740!"}]})(I.a.createElement(T["a"],null)))),I.a.createElement(l["a"],{md:8,sm:24},I.a.createElement("span",{className:j.a.submitButtons},I.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))))}},{key:"renderForm",value:function(){return this.renderSimpleForm(this.state)}},{key:"render",value:function(){var e=this.props,t=e.gate,a=t.data,n=t.pagination,l=e.loading,i=this.state,s=(i.modalVisible,i.modalVisible2),c=i.record,p=(this.handleAdd,this.handleModalVisible,u()({showSizeChanger:!0,showQuickJumper:!0},n));return I.a.createElement(L["a"],{title:"\u67e5\u8be2\u8868\u683c"},I.a.createElement(o["a"],{bordered:!1},I.a.createElement("div",{className:j.a.tableList},I.a.createElement("div",{className:j.a.tableListForm},this.renderForm()),I.a.createElement(r["a"],{rowKey:"_id",loading:l,dataSource:void 0==a?[]:a[1],columns:this.columns,pagination:p,size:"small"}))),s?I.a.createElement(Ce,{handleUpdate:this.handleUpdate,value:c,handleModalVisible:this.handleModalVisible2,modalVisible:s}):null)}}]),a}(z["PureComponent"]))||ie);function be(e){var t=Ee();return function(){var a,n=A()(e);if(t){var r=A()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return F()(this,a)}}function Ee(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}V["a"].Option,V["a"].OptGroup,T["a"].TextArea,R["a"].Item;var we,xe,ke,Se=function(e){S()(a,e);var t=be(a);function a(e){var n;y()(this,a),n=t.call(this,e),n.expandedRowRender=function(e){var t=[{title:"\u63a5\u53e3\u540d\u79f0",dataIndex:"entry",key:"entry",render:function(e){if("activeGate"!=e)return I.a.createElement("span",null,e)}},{title:"\u8bf7\u6c42\u6570\u91cf",key:"count",render:function(e){if("activeGate"!=e.entry)return I.a.createElement("span",null,e.count)}}],a=[];for(var n in e.value)a.push({key:n,entry:n,count:e.value[n]});return I.a.createElement(r["a"],{columns:t,dataSource:a,pagination:!1})};var o=n.props.value;return console.log(o),n}return E()(a,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=(e.form,e.handleUpdate,e.handleModalVisible),o=e.value,l=this.props.form;l.getFieldDecorator,l.getFieldValue;console.log(this.state),console.log(this.props);var i=[{title:"\u670d\u52a1\u540d\u79f0",dataIndex:"service",key:"service"}],s=[];for(var c in o.request)console.log(o.request[c]),console.log(c),s.push({key:c,service:c,value:o.request[c]});return console.log("data==================:",s),I.a.createElement(n["a"],{title:o.host+":"+o.port+"\u8bf7\u6c42\u7edf\u8ba1",width:900,destroyOnClose:!0,visible:t,onClose:function(){return a()}}," ",I.a.createElement(r["a"],{className:"components-table-demo-nested",columns:i,expandedRowRender:this.expandedRowRender,dataSource:s,defaultExpandAllRows:!0}))}}]),a}(z["PureComponent"]),Ce=R["a"].create()(Se),Fe=a("P4xi"),Me=a("6Hmz");function Ae(e){var t=Re();return function(){var a,n=A()(e);if(t){var r=A()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return F()(this,a)}}function Re(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}T["a"].Search;var Ve=T["a"].TextArea,De=D["a"].Panel,Te=(Me["a"].WGGL_WGYXJK_DEL.key,Me["a"].WGGL_WGYXJK_QQTJ.key),ze=V["a"].Option,Ie=R["a"].Item,Oe=(we=Object(O["connect"])(function(e){var t=e.gate,a=e.loading;return{gate:t,loading:a.effects["gate/fetch"]}}),xe=R["a"].create(),we(ke=xe(ke=function(e){S()(a,e);var t=Ae(a);function a(){var e;y()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),e.state={groupOpt:"",div3:"none",div1:"block",div2:"none",div4:"none",modalVisible:!1,formValues:{},modalVisible2:!1,status:0,xzoptions:[]},e.columns=[{title:"\u7f51\u5173\u5206\u7ec4",dataIndex:"group",align:"center"},{title:"\u5730\u5740",align:"center",render:function(e){return"http://".concat(e.host,":").concat(e.port).concat(e.path)}},{title:"\u5065\u5eb7\u72b6\u6001",align:"center",render:function(e){return 1==e.status?I.a.createElement("span",null,I.a.createElement(g["a"],{type:"bulb",theme:"filled",twoToneColor:"#33FF33",style:{fontSize:"16px",color:"#33FF33"}}),P()(e.timeActive).format("YYYY-MM-DD"),I.a.createElement("br",null),P()(e.timeActive).format("HH:mm:ss")):2==e.status?I.a.createElement("span",null,I.a.createElement(g["a"],{type:"bulb",theme:"filled",twoToneColor:"#CC00FF",style:{fontSize:"16px",color:"#FF1111"}}),P()(e.timeActive).format("YYYY-MM-DD"),I.a.createElement("br",null),P()(e.timeActive).format("HH:mm:ss")):3==e.status?I.a.createElement("span",null,I.a.createElement(g["a"],{type:"bulb",theme:"filled",twoToneColor:"#F8F819",style:{fontSize:"16px",color:"#F8F819"}}),P()(e.timeActive).format("YYYY-MM-DD"),I.a.createElement("br",null),P()(e.timeActive).format("HH:mm:ss")):void 0}},{title:"\u542f\u52a8\u65f6\u95f4",dataIndex:"timeStart",align:"center",render:function(e){return I.a.createElement("span",null,P()(e).format("YYYY-MM-DD"),I.a.createElement("br",null),P()(e).format("HH:mm:ss"))}},{title:"\u64cd\u4f5c",align:"center",render:function(t){return I.a.createElement("span",null,I.a.createElement("a",{href:"javaSrcipt:;",onClick:function(){return e.handleMenuClick(t)}},"\u5220\u9664"),I.a.createElement(h["a"],{type:"vertical"}),I.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),Fe["a"].checkAuthAndExecute(e.props.dispatch,Te,e.handleModalVisible2(!0,t),[])}},"\u8bf7\u6c42\u7edf\u8ba1"),I.a.createElement(h["a"],{type:"vertical"}),I.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),Fe["a"].checkAuthAndExecute(e.props.dispatch,Te,e.yxxxshowModal.bind(x()(e),t),[])}},"\u8fd0\u884c\u4fe1\u606f"),I.a.createElement(h["a"],{type:"vertical"}),I.a.createElement("a",{href:"javaSrcipt:;",onClick:function(){return window.open("http://".concat(t.host,":").concat(t.port).concat(t.path,"/swagger-ui.html"))}},"\u63a5\u53e3\u6587\u6863"))}}],e.tick=function(t){e.props.dispatch},e.yxxxshowModal=function(t){console.log("===key===",t);var a=e.props.dispatch,n="\u8fd0\u884c\u4fe1\u606f\uff1ahttp://".concat(t.host,":").concat(t.port).concat(t.path);a({type:"gate/gateYxxx",payload:{url:"http://".concat(t.host,":").concat(t.port).concat(t.path,"/runtime/info")},callback:function(t){e.setState({yxxxvisible:!0,YxxxMessage:JSON.stringify(t,null,"\t"),servicename:n})}})},e.yxxxhandleCancel=function(t){e.setState({yxxxvisible:!1},function(){return e.handleSearch()})},e.handleFormReset=function(){var t=e.props,a=t.form,n=t.dispatch;a.resetFields(),e.setState({formValues:{}}),n({type:"gate/monitor",payload:{group:null,sortby:["group",-1,"timeStart",-1],host:null,port:null,limit:0,skip:0,status:0},callback:function(){var t=e.props,a=(t.loading,t.gate),n=new Array;if(void 0!=a.data&&a.data[0]>0)for(var r=0;r<a.data[1].length;r++)n.push(a.data[1][r]._id);e.setState({xzoptions:n})}})},e.handleMenuClick=function(t){e.handleFormReset();var a=e.props,n=a.dispatch;a.form;f["a"].confirm({title:"\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u5df2\u9009\u4e2d\u7f51\u5173\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u653e\u5f03",onOk:function(){n({type:"gate/remove",payload:{id:1*t._id,reqData:t},callback:function(t){"0"==t.code?(m["a"].success("\u7f51\u5173\u5220\u9664\u6210\u529f\uff01"),e.handleSearch()):m["a"].error("\u7f51\u5173\u5220\u9664\u5931\u8d25\uff01")}})},onCancel:function(){}})},e.setGroupOpt=function(){var t=e.props.gate.group,a=[];void 0!=t&&t.length>0&&t.forEach(function(e,t){a.push(I.a.createElement(ze,{key:e},e))}),e.setState({groupOpt:a})},e.handleChangeSalesType=function(t){e.setState({salesType:t.target.value})},e.handleModalVisible2=function(t,a){e.setState({modalVisible2:!!t,record:a})},e.showModal=function(t){e.setState({visible:!0,YxxxMessage:t})},e.handleCancel=function(t){e.setState({visible:!1})},e.handleCancel1=function(t){e.setState({visible1:!1})},e.handleCancel2=function(t){e.setState({visible2:!1})},e.showDrawer=function(){e.setState({cspzvisibleDrawer:!0})},e.onClose=function(){e.setState({cspzvisibleDrawer:!1})},e.div1=function(t){e.setState({div1:"block",div3:"none",div2:"none",div4:"none",newstatus:"",newtimeout:"0"});var a=e.props,n=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r={group:void 0==a.group?null:a.group,host:void 0==a.host?null:a.group,port:void 0==a.port?null:a.port,sortby:["group",-1,"timeStart",-1],limit:0,skip:0,status:0};e.setState({formValues:r}),n({type:"gate/monitor",payload:r})}})},e.div2=function(t){e.setState({div1:"none",div2:"block",div3:"none",div4:"none",newstatus:"1",newtimeout:"0"});var a=e.props,n=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r={group:void 0==a.group?null:a.group,host:void 0==a.host?null:a.group,port:void 0==a.port?null:a.port,limit:0,skip:0,status:1,sortby:["group",-1,"timeStart",-1]};e.setState({formValues:r}),n({type:"gate/monitor",payload:r})}})},e.div3=function(t){e.setState({div1:"none",div2:"none",div3:"block",div4:"none",newtimeout:"-1"});var a=e.props,n=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r={group:void 0==a.group?null:a.group,host:void 0==a.host?null:a.group,port:void 0==a.port?null:a.port,limit:0,skip:0,status:3,sortby:["group",-1,"timeStart",-1]};e.setState({formValues:r}),n({type:"gate/monitor",payload:r})}})},e.div4=function(t){e.setState({div1:"none",div2:"none",div3:"none",div4:"block",newtimeout:"0"});var a=e.props,n=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r={group:void 0==a.group?null:a.group,host:void 0==a.host?null:a.group,port:void 0==a.port?null:a.port,limit:0,skip:0,status:2,sortby:["group",-1,"timeStart",-1]};e.setState({formValues:r}),n({type:"gate/monitor",payload:r})}})},e.onTabChange=function(t,a){e.setState(d()({},a,t))},e.handleSearch=function(t){t&&t.preventDefault();var a=e.props,n=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r={group:void 0==a.group?null:a.group,host:void 0==a.host?null:a.group,port:void 0==a.port?null:a.port,limit:0,skip:0,status:e.state.status,sortby:["group",-1,"timeStart",-1]};e.setState({formValues:r}),n({type:"gate/monitor",payload:r,callback:function(){var t=e.props,a=(t.loading,t.gate),n=new Array;if(void 0!=a.data&&a.data[0]>0)for(var r=0;r<a.data[1].length;r++)n.push(a.data[1][r]._id);e.setState({xzoptions:n})}})}})},e}return E()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"gate/monitor",payload:{group:null,sortby:["group",-1,"timeStart",-1],host:null,port:null,limit:0,skip:0,status:0},callback:function(){var t=e.props,a=(t.loading,t.gate),n=new Array;if(void 0!=a.data&&a.data[0]>0)for(var r=0;r<a.data[1].length;r++)n.push(a.data[1][r]._id);e.setState({xzoptions:n})}}),t({type:"gate/fetchGroupInGate"})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=(e.salesType,e.icontype,e.icontype1,e.record),a=e.modalVisible2,c=this.props,p=(c.rule,c.loading),d=(c.chart,c.access,c.form.getFieldDecorator),m=this.props.gate,f=m.data,h=m.pagination,g=u()({showSizeChanger:!0,showQuickJumper:!0},h),v=function(e){var t=e.title,a=e.value,n=e.bordered;return I.a.createElement("div",{className:N.a.headerInfo},I.a.createElement("span",null,t),I.a.createElement("p",null,a),n&&I.a.createElement("em",null))};s["a"];return I.a.createElement(L["a"],null,I.a.createElement("div",null,I.a.createElement(i["a"],{span:24},I.a.createElement(D["a"],null,I.a.createElement(De,{header:"\u7f51\u5173\u8bbf\u95ee\u91cf\u8be6\u60c5\u56fe"},I.a.createElement(ue,{msg:"\u8bbf\u95ee\u91cf\u7edf\u8ba1",msgflag:"2",YBmsg:"\u7f51\u5173\u8bbf\u95ee\u91cf\u5206\u5e03TOP10",xzoptions:this.state.xzoptions})))),I.a.createElement(i["a"],{span:24},I.a.createElement(o["a"],{style:{marginTop:12}},I.a.createElement("div",{className:j.a.tableList},I.a.createElement("div",{className:j.a.tableListForm},I.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline",onReset:this.handleFormReset},I.a.createElement(i["a"],{gutter:{md:8,lg:24,xl:48}},I.a.createElement(l["a"],{span:5},I.a.createElement(Ie,{label:"\u7f51\u5173\u5206\u7ec4"},d("group",{rules:[{required:!1,message:"\u7f51\u5173\u5206\u7ec4!"}]})(I.a.createElement(V["a"],{style:{width:"110px"},onFocus:this.setGroupOpt},this.state.groupOpt)))),I.a.createElement(l["a"],{span:5},I.a.createElement(Ie,{label:"\u4e3b\u673a\u5730\u5740"},d("host",{rules:[{required:!1,message:"\u4e3b\u673a\u5730\u5740!"}]})(I.a.createElement(T["a"],{style:{width:"110px"}})))),I.a.createElement(l["a"],{span:5},I.a.createElement(Ie,{label:"\u4e3b\u673a\u7aef\u53e3"},d("port",{rules:[{required:!1,message:"\u4e3b\u673a\u7aef\u53e3!"}]})(I.a.createElement(T["a"],{style:{width:"110px"}})))),I.a.createElement(l["a"],{span:7,className:G.a.submitButtons},I.a.createElement("span",{style:{margin:"10px"}},I.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),I.a.createElement("span",{style:{margin:"10px"}},I.a.createElement(s["a"],{type:"primary",htmlType:"reset"},"\u91cd\u7f6e")),I.a.createElement("span",{style:{margin:"10px"}},I.a.createElement(s["a"],{onClick:this.handleSearch},"\u5237\u65b0"))))))))),I.a.createElement(i["a"],{span:24,style:{marginTop:"24px"}},I.a.createElement("div",{className:N.a.standardList},I.a.createElement(o["a"],{bordered:!1},I.a.createElement(i["a"],null,I.a.createElement(l["a"],{onClick:this.div1.bind(this),style:{width:"25%",cursor:"pointer"},xs:24},I.a.createElement(v,{title:"\u7f51\u5173\u603b\u6570",value:void 0==f?[]:void 0!=f[2]?f[2].total:0,bordered:!0}),I.a.createElement("div",{style:{display:this.state.div1},className:G.a.hx})),I.a.createElement(l["a"],{onClick:this.div2.bind(this),style:{width:"25%",cursor:"pointer"},xs:24},I.a.createElement(v,{title:"\u6b63\u5e38",value:void 0==f?[]:void 0!=f[2]?f[2].normal:0,bordered:!0}),I.a.createElement("div",{style:{display:this.state.div2},className:G.a.hx})),I.a.createElement(l["a"],{onClick:this.div3.bind(this),style:{width:"25%",cursor:"pointer"},xs:24},I.a.createElement(v,{title:"\u5ef6\u65f6",value:void 0==f?[]:void 0!=f[2]?f[2].delay:0,bordered:!0}),I.a.createElement("div",{style:{display:this.state.div3},className:G.a.hx})),I.a.createElement(l["a"],{onClick:this.div4.bind(this),style:{width:"25%",cursor:"pointer"},xs:24},I.a.createElement(v,{title:"\u5931\u6548",value:void 0==f?[]:void 0!=f[2]?f[2].invalid:0,bordered:!0}),I.a.createElement("div",{style:{display:this.state.div4},className:G.a.hx})))))),I.a.createElement(i["a"],{span:24,style:{marginTop:"24px"}},I.a.createElement(o["a"],{bordered:!1},I.a.createElement("div",{className:G.a.tableList},I.a.createElement(r["a"],{rowKey:"_id",loading:p,dataSource:void 0==f?[]:f[1],columns:this.columns,pagination:g,size:"small"}))))),a?I.a.createElement(Ce,{handleUpdate:this.handleUpdate,value:t,handleModalVisible:this.handleModalVisible2,modalVisible:a}):null,I.a.createElement(n["a"],{title:I.a.createElement("span",null,this.state.servicename),placement:"right",visible:this.state.yxxxvisible,onClose:this.yxxxhandleCancel},I.a.createElement("code",null,I.a.createElement(Ve,{autoSize:{minRows:20,maxRows:30},value:this.state.YxxxMessage}))))}}]),a}(z["PureComponent"]))||ke)||ke);t["default"]=Oe},vQLQ:function(e,t,a){e.exports={card:"antd-pro-pages-gateway-gate-style-card",heading:"antd-pro-pages-gateway-gate-style-heading",steps:"antd-pro-pages-gateway-gate-style-steps",errorIcon:"antd-pro-pages-gateway-gate-style-errorIcon",errorPopover:"antd-pro-pages-gateway-gate-style-errorPopover",errorListItem:"antd-pro-pages-gateway-gate-style-errorListItem",errorField:"antd-pro-pages-gateway-gate-style-errorField",editable:"antd-pro-pages-gateway-gate-style-editable",advancedForm:"antd-pro-pages-gateway-gate-style-advancedForm",optional:"antd-pro-pages-gateway-gate-style-optional",hx:"antd-pro-pages-gateway-gate-style-hx",antmodel:"antd-pro-pages-gateway-gate-style-antmodel",antformitem:"antd-pro-pages-gateway-gate-style-antformitem",anttablethead:"antd-pro-pages-gateway-gate-style-anttablethead",antcolsmoffset4:"antd-pro-pages-gateway-gate-style-antcolsmoffset4",antformitemcontrol:"antd-pro-pages-gateway-gate-style-antformitemcontrol"}}}]);