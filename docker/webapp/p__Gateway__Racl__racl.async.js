(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[21],{"5p9s":function(e,a,t){"use strict";t.r(a);var l=t("jehZ"),r=t.n(l),n=(t("IzEo"),t("bx4M")),o=(t("g9YV"),t("wCAj")),i=t("p0pE"),c=t.n(i),s=(t("+L6B"),t("2/Rp")),u=(t("14J3"),t("BMrR")),p=(t("jCWc"),t("kPKH")),d=(t("miYZ"),t("tsqr")),m=(t("/zsF"),t("PArb")),h=(t("+BJd"),t("mr32")),f=t("2Taf"),v=t.n(f),g=t("vZ4D"),E=t.n(g),b=t("MhPg"),y=t.n(b),k=t("l4Ni"),C=t.n(k),V=t("ujKo"),F=t.n(V),w=(t("7Kak"),t("9yH6")),A=(t("5NDa"),t("5rEg")),L=(t("OaEy"),t("2fM7")),O=(t("2qtc"),t("kLXV")),D=(t("y8nQ"),t("Vl3Y")),S=t("q1tI"),G=t.n(S),x=t("MuoO"),M=(t("wd/R"),t("3a4m")),R=t.n(M),_=t("zHco"),q=t("BSQV"),I=t.n(q);function J(e){var a=B();return function(){var t,l=F()(e);if(a){var r=F()(this).constructor;t=Reflect.construct(l,arguments,r)}else t=l.apply(this,arguments);return C()(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var N,P,T,Z=L["a"].Option,j=(L["a"].OptGroup,A["a"].TextArea,D["a"].Item),Y=function(e){y()(t,e);var a=J(t);function t(e){var l;v()(this,t),l=a.call(this,e);var r=l.props.value;return console.log(r),l}return E()(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.modalVisible,l=a.form,r=a.handleUpdate,n=a.handleModalVisible,o=a.value,i=a.appDate,c=a.groupDate,s=[];void 0!=i&&i[0]>0&&i[1].forEach(function(e,a){s.push(G.a.createElement(Z,{key:e._id},e._id))});var u=[];u.push(G.a.createElement(Z,{value:""},"\u5168\u90e8")),void 0!=i&&c.length>0&&c.forEach(function(e,a){u.push(G.a.createElement(Z,{key:e},e))});var p=function(a){var t=e.props.value;l.validateFields(function(e,a){e||(a.id=t._id,r(a),l.resetFields())})},d=function(e){var a=e.target.value;l.setFieldsValue({authAdd:a})},m=function(e){var a=e.target.value;l.setFieldsValue({enabledAdd:a})};return G.a.createElement(O["a"],{destroyOnClose:!0,title:"\u8fdc\u7a0b\u4e3b\u673a\u8be6\u60c5",visible:t,onOk:p,onCancel:function(){return n()},width:"640px"},G.a.createElement("div",{className:I.a.tableListForm},G.a.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7f51\u5173\u5206\u7ec4"},l.getFieldDecorator("group",{initialValue:void 0==o.group?"":o.group,rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7f51\u5173\u5206\u7ec4\uff01"}]})(G.a.createElement(L["a"],{style:{width:"100%"}},u))),G.a.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5ba2\u6237\u4e3b\u673a"},l.getFieldDecorator("remote",{initialValue:o.remote,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u4e3b\u673a\uff01"}]})(G.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165"}))),G.a.createElement(j,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e94\u7528\u5217\u8868"},l.getFieldDecorator("apps",{rules:[{required:!1,message:"\u5e94\u7528\u5217\u8868!",type:"array"}],initialValue:"{}"!==JSON.stringify(o.apps)?o.apps:""})(G.a.createElement(L["a"],{mode:"multiple",style:{width:"100%"},placeholder:""},s))),G.a.createElement(j,{labelCol:{span:5},wrapperCol:{span:18},label:"\u662f\u5426\u5141\u8bb8\u8bbf\u95ee"},l.getFieldDecorator("auth",{initialValue:o.auth})(G.a.createElement(w["a"].Group,{onChange:d},G.a.createElement(w["a"],{value:!0},"\u662f"),G.a.createElement(w["a"],{value:!1},"\u5426")))),G.a.createElement(j,{labelCol:{span:5},wrapperCol:{span:18},label:"\u53ef\u7528\u72b6\u6001"},l.getFieldDecorator("enabled",{initialValue:o.enabled})(G.a.createElement(w["a"].Group,{onChange:m},G.a.createElement(w["a"],{value:!0},"\u6b63\u5e38"),G.a.createElement(w["a"],{value:!1},"\u505c\u7528"))))))}}]),t}(S["PureComponent"]),z=D["a"].create()(Y),H=t("hoGH"),K=t.n(H),U=t("P4xi"),W=t("6Hmz");function Q(e){var a=X();return function(){var t,l=F()(e);if(a){var r=F()(this).constructor;t=Reflect.construct(l,arguments,r)}else t=l.apply(this,arguments);return C()(this,t)}}function X(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var $=W["a"].WGGL_YCZJGL_ZJYCZJ.key,ee=W["a"].WGGL_YCZJGL_DEL.key,ae=W["a"].WGGL_YCZJGL_DETAIL.key,te=D["a"].Item,le=O["a"].confirm,re=L["a"].Option,ne=D["a"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.appDate,o=e.groupDate,i=[];i.push(G.a.createElement(re,{key:"app",value:""},"\u5168\u90e8")),void 0!=n&&n[0]>0&&n[1].forEach(function(e,a){i.push(G.a.createElement(re,{key:e._id},e._id))});var c=[];c.push(G.a.createElement(re,{key:"group",value:""},"\u5168\u90e8")),void 0!=o&&o.length>0&&o.forEach(function(e,a){c.push(G.a.createElement(re,{key:e},e))});var s=function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})},u=function(e){var a=e.target.value;t.setFieldsValue({authAdd:a})},p=function(e){var a=e.target.value;t.setFieldsValue({enabledAdd:a})};return G.a.createElement(O["a"],{destroyOnClose:!0,title:"\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a",visible:a,onOk:s,onCancel:function(){return r()},width:"640px"},G.a.createElement("div",{className:I.a.tableListFormAdd},G.a.createElement(te,{labelCol:{span:5},wrapperCol:{span:18},label:"\u7f51\u5173\u5206\u7ec4"},t.getFieldDecorator("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7f51\u5173\u5206\u7ec4\uff01"}]})(G.a.createElement(L["a"],{style:{width:"100%"}},c))),G.a.createElement(te,{labelCol:{span:5},wrapperCol:{span:18},label:"\u8fdc\u7a0b\u4e3b\u673a"},t.getFieldDecorator("remote",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u4e3b\u673a\uff01"}]})(G.a.createElement(A["a"],{placeholder:""}))),G.a.createElement(te,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5e94\u7528\u5217\u8868"},t.getFieldDecorator("apps",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528!",type:"array"}]})(G.a.createElement(L["a"],{mode:"multiple",style:{width:"100%"},placeholder:""},i)),"\u4e0d\u586b\u5199\u4e3a\u5168\u90e8"),G.a.createElement(te,{labelCol:{span:5},wrapperCol:{span:18},label:"\u8bbf\u95ee\u8bb8\u53ef"},t.getFieldDecorator("authAdd",{initialValue:!0})(G.a.createElement(w["a"].Group,{onChange:u},G.a.createElement(w["a"],{value:!0},"\u662f"),G.a.createElement(w["a"],{value:!1},"\u5426")))),G.a.createElement(te,{labelCol:{span:5},wrapperCol:{span:18},label:"\u53ef\u7528\u72b6\u6001"},t.getFieldDecorator("enabledAdd",{initialValue:!0})(G.a.createElement(w["a"].Group,{onChange:p},G.a.createElement(w["a"],{value:!0},"\u6b63\u5e38"),G.a.createElement(w["a"],{value:!1},"\u505c\u7528"))))))}),oe=(N=Object(x["connect"])(function(e){var a=e.racl,t=e.loading;return{racl:a,loading:t.models.racl}}),P=D["a"].create(),N(T=P(T=function(e){y()(t,e);var a=Q(t);function t(){var e;v()(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return e=a.call.apply(a,[this].concat(r)),e.state={modalVisible:!1,formValues:{},options:[],modalVisible2:!1,data:[],apps:[],appOpt:[],groupOpt:[],auth:"",enabled:"",raclList:[],applist:[],groupList:[]},e.columns=[{title:"\u7f51\u5173\u5206\u7ec4",dataIndex:"group",align:"center",render:function(e){return e?G.a.createElement("span",null,e):G.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u5ba2\u6237\u4e3b\u673a",dataIndex:"remote",align:"center"},{title:"\u5e94\u7528\u5217\u8868",dataIndex:"apps",align:"center",render:function(e){return e?G.a.createElement("span",null,e.map(function(e){return G.a.createElement(h["a"],{key:e},e)})):G.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u8bbf\u95ee\u8bb8\u53ef",dataIndex:"auth",align:"center",render:function(e){return e?G.a.createElement("span",null,"\u662f"):G.a.createElement("span",null,"\u5426")}},{title:"\u53ef\u7528\u72b6\u6001",dataIndex:"enabled",align:"center",render:function(e){return e?G.a.createElement("span",null,"\u6b63\u5e38"):G.a.createElement("span",null,"\u505c\u7528")}},{title:"\u64cd\u4f5c",align:"center",render:function(a){return G.a.createElement("span",null,G.a.createElement("a",{href:"javaSrcipt:;",onClick:function(t){t&&t.preventDefault(),U["a"].checkAuthAndExecute(e.props.dispatch,ee,function(){return e.handleMenuClick(a._id)},[])}},"\u5220\u9664"),G.a.createElement(m["a"],{type:"vertical"}),G.a.createElement("a",{href:"javaSrcipt:;",onClick:function(t){t&&t.preventDefault(),U["a"].checkAuthAndExecute(e.props.dispatch,ae,function(){return e.handleModalVisible2(!0,a)},[])}},"\u8be6\u60c5"))}}],e.previewItem=function(e){R.a.push("/profile/basic/".concat(e))},e.handleFormReset=function(){var a=e.props,t=a.form,l=a.dispatch;t.resetFields(),e.setState({formValues:{}});var r=new Array;r=["group",-1,"remote",-1],l({type:"racl/fetch",payload:{group:null,remote:null,app:null,enabled:null,auth:null,sortby:r,limit:0,skip:0},callback:function(a){0===a.code?e.setState({raclList:a.data}):d["a"].error("\u67e5\u8be2\u8fdc\u7a0b\u4e3b\u673a\u5217\u8868\u5931\u8d25\uff01")}})},e.handleMenuClick=function(a){var t=e.props,l=t.dispatch;t.form;console.log(e.state),le({title:"\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u5df2\u9009\u4e2d\u7684\u8fdc\u7a0b\u4e3b\u673a\u8bbf\u95ee\u6743\u9650\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u653e\u5f03",onOk:function(){l({type:"racl/remove",payload:{id:a},callback:function(a){0===a.code?(d["a"].success("\u5220\u9664\u4e00\u4e2a\u8fdc\u7a0b\u4e3b\u673a\u7684\u8bbf\u95ee\u6743\u9650\u6210\u529f!"),e.handleFormReset()):d["a"].success("\u5220\u9664\u4e00\u4e2a\u8fdc\u7a0b\u4e3b\u673a\u7684\u8bbf\u95ee\u6743\u9650\u5931\u8d25!")}})},onCancel:function(){}})},e.handleSearch=function(a){a&&a.preventDefault();var t=new Array;t=["group",-1,"remote",-1];var l=e.props,r=l.dispatch,n=l.form;n.validateFields(function(a,l){if(!a){console.log("======453===",l);var n={group:""==l.group?null:l.group,remote:void 0==l.remote?null:l.remote,app:""==l.app?null:l.app,enabled:l.enabled,auth:l.auth,sortby:t,limit:0,skip:0};e.setState({formValues:n}),r({type:"racl/fetch",payload:n,callback:function(a){0===a.code?e.setState({raclList:a.data}):d["a"].error("\u67e5\u8be2\u8fdc\u7a0b\u4e3b\u673a\u5217\u8868\u5931\u8d25\uff01")}})}})},e.setAppOpt=function(){console.log(e.props.racl);e.props.racl.apps;var a=e.state.applist,t=[];t.push(G.a.createElement(re,{value:"",key:"app"},"\u5168\u90e8")),void 0!=a&&a[0]>0&&a[1].forEach(function(e,a){t.push(G.a.createElement(re,{value:e._id,key:"app"+a},e._id))}),e.setState({appOpt:t},function(){})},e.setGroupOpt=function(){e.props.racl.group;var a=e.state.groupList;console.log(e.props.racl);var t=[];t.push(G.a.createElement(re,{value:"",key:"group"},"\u5168\u90e8")),void 0!=a&&a.length>0&&a.forEach(function(e,a){t.push(G.a.createElement(re,{value:e,key:"group"+a},e))}),e.setState({groupOpt:t})},e.handleModalVisible=function(a){e.setState({modalVisible:!!a})},e.handleModalVisible2=function(a,t){e.setState({modalVisible2:!!a,record:t})},e.handleAdd=function(a){var t=e.props.dispatch;e.state.formValues;t({type:"racl/add",payload:{id:0,group:void 0==a.group?null:a.group,apps:void 0==a.apps?null:a.apps,remote:void 0==a.remote?null:a.remote,auth:a.authAdd,enabled:a.enabledAdd},callback:function(a){0===a.code?(d["a"].success("\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a\u6210\u529f\uff01"),e.handleFormReset(),e.handleModalVisible()):d["a"].error("\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a\u5931\u8d25\uff01")}})},e.handleUpdate=function(a){var t=e.props.dispatch;e.state.formValues;t({type:"racl/set",payload:{id:a.id,group:"null"==a.group?null:a.group,apps:void 0==a.apps?null:a.apps,remote:void 0==a.remote?null:a.remote,auth:a.auth,enabled:a.enabled},callback:function(a){0===a.code?(d["a"].success("\u4fee\u6539\u8fdc\u7a0b\u4e3b\u673a\u6210\u529f\uff01"),e.handleFormReset(),e.handleModalVisible2()):d["a"].error("\u4fee\u6539\u8fdc\u7a0b\u4e3b\u673a\u5931\u8d25\uff01")}})},e.handleCancel2=function(a){e.setState({visible2:!1}),e.handleSearch(a)},e.handleCancel3=function(a){e.setState({visible3:!1}),e.handleSearch(a)},e.onChangeAuth=function(a){var t=e.props.form;t.setFieldsValue({auth:a.target.value})},e.onChangeEnabled=function(a){var t=e.props.form;t.setFieldsValue({enabled:a.target.value})},e}return E()(t,[{key:"componentDidMount",value:function(){var e=this;this.setAppOpt(),this.setGroupOpt();var a=this.props.dispatch,t=this.props.racl,l=(t.apps,t.group,new Array);l=["group",-1,"remote",-1],a({type:"racl/fetch",payload:{group:null,remote:null,app:null,enabled:null,auth:null,sortby:l,limit:0,skip:0},callback:function(a){0===a.code?e.setState({raclList:a.data}):d["a"].error("\u67e5\u8be2\u8fdc\u7a0b\u4e3b\u673a\u5217\u8868\u5931\u8d25\uff01")}});var r=new Array;r=["_id",1],a({type:"racl/fetchApp",payload:{name:null,sortby:r,tags:null,limit:0,skip:0,status:0},callback:function(a){console.log("===e223===",a),0===a.code&&e.setState({applist:a.data})}}),a({type:"racl/fetchGroupInRAcl",callback:function(a){0===a.code&&e.setState({groupList:a.data})}})}},{key:"renderSimpleForm",value:function(e){var a=this.props.form.getFieldDecorator;return G.a.createElement(D["a"],{onSubmit:this.handleSearch,layout:"inline",onReset:this.handleFormReset},G.a.createElement(u["a"],{gutter:{md:8,lg:24,xl:48}},G.a.createElement(p["a"],{md:8,sm:24},G.a.createElement(te,{labelCol:{span:5},wrapperCol:{span:18},label:"\u7f51\u5173\u5206\u7ec4"},a("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(G.a.createElement(L["a"],{style:{width:"100%"},onFocus:this.setGroupOpt},this.state.groupOpt)))),G.a.createElement(p["a"],{md:8,sm:24},G.a.createElement(te,{label:"\u8fdc\u7a0b\u4e3b\u673a"},a("remote",{rules:[{required:!1,message:"\u5ba2\u6237\u4e3b\u673a!"}]})(G.a.createElement(A["a"],null)))),G.a.createElement(p["a"],{md:8,sm:24},G.a.createElement(te,{label:"\u5e94\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u7528"},a("app",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(G.a.createElement(L["a"],{style:{width:"100%"},onFocus:this.setAppOpt},this.state.appOpt))))),G.a.createElement(u["a"],{gutter:{md:8,lg:24,xl:48}},G.a.createElement(p["a"],{md:8,sm:24},G.a.createElement(te,{label:"\u8bbf\u95ee\u8bb8\u53ef"},a("auth",{initialValue:null})(G.a.createElement(w["a"].Group,{onChange:this.onChangeAuth},G.a.createElement(w["a"],{value:null,key:0},"\u4e0d\u9650"),G.a.createElement(w["a"],{value:!0,key:1},"\u662f"),G.a.createElement(w["a"],{value:!1,key:2},"\u5426"))))),G.a.createElement(p["a"],{md:8,sm:24},G.a.createElement(te,{label:"\u53ef\u7528\u72b6\u6001"},a("enabled",{initialValue:null})(G.a.createElement(w["a"].Group,{onChange:this.onChangeEnabled},G.a.createElement(w["a"],{value:null,key:3},"\u4e0d\u9650"),G.a.createElement(w["a"],{value:"true",key:4},"\u6b63\u5e38"),G.a.createElement(w["a"],{value:"false",key:5},"\u505c\u7528"))))),G.a.createElement(p["a"],{md:8,sm:24},G.a.createElement("span",null,G.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),G.a.createElement("span",{style:{margin:"10px"}},G.a.createElement(s["a"],{type:"primary",htmlType:"reset"},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(e){return this.renderSimpleForm(e)}},{key:"render",value:function(){var e=this,a=this.props,t=a.racl,l=(t.data,t.pagination),i=a.loading,u=this.state,p=u.modalVisible,d=u.modalVisible2,m=u.record,h=u.raclList,f=u.applist,v=u.groupList,g={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,appDate:f,groupDate:v},E=c()({showSizeChanger:!0,showQuickJumper:!0},l);return G.a.createElement(_["a"],{title:"\u67e5\u8be2\u8868\u683c"},G.a.createElement(n["a"],{bordered:!1},G.a.createElement("div",{className:K.a.tableList},G.a.createElement("div",{className:K.a.tableListForm},this.renderForm(this.state)),G.a.createElement("div",{className:K.a.tableListOperator},G.a.createElement(s["a"],{icon:"plus",type:"primary",onClick:function(a){a&&a.preventDefault(),U["a"].checkAuthAndExecute(e.props.dispatch,$,function(){return e.handleModalVisible(!0)},[])}},"\u589e\u52a0\u8fdc\u7a0b\u4e3b\u673a")),G.a.createElement(o["a"],{rowKey:"_id",loading:i,dataSource:void 0==h?[]:h[1],columns:this.columns,pagination:E,size:"small"}))),G.a.createElement(ne,r()({},g,{modalVisible:p})),d?G.a.createElement(z,{handleUpdate:this.handleUpdate,value:m,handleModalVisible:this.handleModalVisible2,appDate:f,groupDate:v,modalVisible:d}):null)}}]),t}(S["PureComponent"]))||T)||T);a["default"]=oe},hoGH:function(e,a,t){e.exports={tableList:"antd-pro-pages-gateway-racl-racl-tableList",tableListOperator:"antd-pro-pages-gateway-racl-racl-tableListOperator",tableListForm:"antd-pro-pages-gateway-racl-racl-tableListForm",submitButtons:"antd-pro-pages-gateway-racl-racl-submitButtons",tableListFormAdd:"antd-pro-pages-gateway-racl-racl-tableListFormAdd"}}}]);