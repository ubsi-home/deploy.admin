(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[94],{"/Rjn":function(e,t,a){e.exports={header:"antd-pro-pages-script-fwzfqx-jsgl-header",search:"antd-pro-pages-script-fwzfqx-jsgl-search",cols:"antd-pro-pages-script-fwzfqx-jsgl-cols",content:"antd-pro-pages-script-fwzfqx-jsgl-content",btns:"antd-pro-pages-script-fwzfqx-jsgl-btns",modelMsg:"antd-pro-pages-script-fwzfqx-jsgl-modelMsg",check:"antd-pro-pages-script-fwzfqx-jsgl-check",arrow:"antd-pro-pages-script-fwzfqx-jsgl-arrow"}},A9rn:function(e,t,a){e.exports={header:"antd-pro-pages-script-fwzfqx-index-header",search:"antd-pro-pages-script-fwzfqx-index-search",cols:"antd-pro-pages-script-fwzfqx-index-cols",content:"antd-pro-pages-script-fwzfqx-index-content",btns:"antd-pro-pages-script-fwzfqx-index-btns",modelMsg:"antd-pro-pages-script-fwzfqx-index-modelMsg"}},gP6X:function(e,t,a){"use strict";a.r(t);a("bbsP");var n,l,r=a("/wGt"),o=(a("+L6B"),a("2/Rp")),s=(a("g9YV"),a("wCAj")),i=a("jehZ"),c=a.n(i),u=(a("Q9mQ"),a("diRs")),d=(a("Pwec"),a("CtXQ")),p=(a("7Kak"),a("9yH6")),m=(a("14J3"),a("BMrR")),f=(a("jCWc"),a("kPKH")),h=(a("/zsF"),a("PArb")),g=(a("+BJd"),a("mr32")),y=(a("miYZ"),a("tsqr")),v=a("gWZ8"),E=a.n(v),b=a("2Taf"),x=a.n(b),w=a("vZ4D"),S=a.n(w),k=a("MhPg"),C=a.n(k),_=a("l4Ni"),V=a.n(_),R=a("ujKo"),q=a.n(R),T=(a("2qtc"),a("kLXV")),A=(a("5NDa"),a("5rEg")),j=(a("OaEy"),a("2fM7")),F=(a("y8nQ"),a("Vl3Y")),D=a("q1tI"),M=a.n(D),L=a("A9rn"),I=a.n(L),N=a("wd/R"),z=a.n(N),O=a("MuoO"),J=(a("qVdP"),a("jsC+")),W=(a("lUTK"),a("BvKs")),B=(a("/Rjn"),a("p0pE")),P=a.n(B);function Y(e){var t=Q();return function(){var a,n=q()(e);if(t){var l=q()(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return V()(this,a)}}function Q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var X=j["a"].Option,G=j["a"].OptGroup;n=Object(O["connect"])(function(e){var t=e.tag2,a=e.loading;return{tag2:t,loading:a.models.tag2}}),n(l=function(e){C()(a,e);var t=Y(a);function a(e){var n;x()(this,a),n=t.call(this,e),n.initSelectData=function(e){var t=e.code,a=e.datas;if(t&&t>=200&&t<300){var l=a?a.tags:[];n.setState({tags:l})}else n.showMessage("\u9519\u8bef\uff1a\u83b7\u53d6select Tags\u5931\u8d25\uff01",1)},n.handleChange=function(e){n.setState({value:e}),n.triggerChange(e)},n.triggerChange=function(e){var t=n.props.onChange;t&&t(e)};var l=e.defaultValue||[],r=l||[];return l&&Array.isArray(l)&&l.length>0&&n.handleChange(l),n.state={defaultValue:l,value:r||[],tags:[]},n}return S()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.param,n=t.dispatch;if(a&&a.length>0){var l="";a&&Array.isArray(a)&&a.map(function(e,t){t==a.length-1?l+=e:l+=e+","});var r={env:l};try{n({type:"tag2/commonList",payload:r,callback:function(t){e.initSelectData(t)}})}catch(e){}}}},{key:"showMessage",value:function(e,t){t||(t=1),1===t?y["a"].error(e):2===t?y["a"].warning(e):3===t?y["a"].success(e):y["a"].error("\u9519\u8bef\uff1a\u9519\u8bef\u53c2\u6570\uff1alevel="+t)}},{key:"render",value:function(){var e=this.props,t=(e.name,e.size),a=e.style,n=(e.multiple,e.showArrow,e.width),l=e.disabled,r=this.state.defaultValue,o=this.state.tags,s={size:t||"default",style:P()({},a),width:n||"100%",mode:"multiple",placeholder:"\u8bf7\u9009\u62e9",disabled:l||!1},i=this.props.value;return M.a.createElement("div",null,M.a.createElement(j["a"],c()({},s,{onChange:this.handleChange,defaultValue:r||[],value:i,placeholder:"\u8bf7\u9009\u62e9"}),o?o.map(function(e){e._id,e.name;return M.a.createElement(G,{label:e.name,key:e._id},e.tagValue?e.tagValue.map(function(e){return M.a.createElement(X,{value:e.value,key:e.value},e.value)}):"")}):""))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a,n=e.defaultValue;e.value;return n!=t.defaultValue&&(a||(a={},a.props={}),a.defaultValue=n,a.props.defaultValue=n),null}}]),a}(D["Component"]));function K(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=H(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function H(e,t){if(e){if("string"===typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Z(e){var t=$();return function(){var a,n=q()(e);if(t){var l=q()(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return V()(this,a)}}function $(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}F["a"].Item;var ee=j["a"].Option,te=function(e){C()(a,e);var t=Z(a);function a(){var e;x()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l)),e.state={children:[],tagList:[],row:[],listDomain:[],tagslist:[],tablelist:[],namelists:[]},e.handleSearch=function(){for(var t=e.props,a=t.form,n=t.dispatch,l=a.getFieldValue("name")?a.getFieldValue("name"):null,r=a.getFieldValue("tags")?a.getFieldValue("tags").join(","):null,o=null==a.getFieldValue("domain")||0===a.getFieldValue("domain").length?e.state.listDomain:a.getFieldValue("domain"),s=new Array,i=0;i<o.length;i++)n({type:"common_jsgl/demlRoleTree",payload:{depth:0,name:l,domain:o[i],tags:r},callback:function(e){e.length>0&&e.map(function(e){s.push(e)})}});setTimeout(function(){e.setState({tablelist:s})},300)},e}return S()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.selectName;console.log("===selectName===",n);var l=[];n&&n.map(function(e){return l.push(e._id)}),console.log("===24===",l),this.setState({namelists:l,row:n}),a({type:"common_jsgl/xtgllistTags",payload:{type:2},callback:function(t){0===t.code&&e.setState({tagslist:t.data})}}),a({type:"common_jsgl/listDomain",callback:function(t){0===t.code&&e.setState({listDomain:t.data},function(){e.handleSearch()})}})}},{key:"showDxmb",value:function(){this.setState({dxmbListStaus:!0})}},{key:"handleChange",value:function(e){this.setState({children:e})}},{key:"changeList",value:function(){this.setState({dxmbListStaus:!1})}},{key:"getList",value:function(e){this.setState({dxmbListStaus:!1});var t=[];e.map(function(e){t.push(e._id)}),this.setState({children:t})}},{key:"handleFormReset",value:function(){var e=this.props,t=e.form;e.dispatch;t.resetFields(),this.handleSearch()}},{key:"render",value:function(){var e=this,t=this.props,a=t.form,n=(t.data,t.jsglVisible),l=t.handleSelectedJsgl,i=t.handleJsglVisible,c=(t.selectName,t.roleType),u=this.state,d=(u.dxmbListStaus,u.children,u.tagList,u.row),p=u.listDomain,m=u.tagslist,f=u.tablelist,h=u.namelists;a.getFieldDecorator;console.log("====namelists==",h),console.log("===row===",d),console.log("===roleType===",c);var y={type:void 0===this.props.type?"checkbox":this.props.type,onChange:function(t,a){e.setState({row:a,namelists:t})},getCheckboxProps:function(e){return{defaultChecked:h.includes(e._id)}}},v=[];m.forEach(function(e){v.push(M.a.createElement(ee,{key:e},e))});var E=[];p.forEach(function(e){E.push(M.a.createElement(ee,{key:e},e))});var b=function(e){return M.a.createElement(W["a"],{style:{padding:"5px 10px"}},"\u68c0\u67e5\u5bf9\u8c61\u63cf\u8ff0\uff1a",e)},x=[{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,t){return M.a.createElement(J["a"],{overlay:b(t.spt)},M.a.createElement("span",null,e))}},{title:"\u6570\u636e\u57df",dataIndex:"domain",key:"domain"},{title:"\u89d2\u8272\u6807\u7b7e",key:"tags",align:"center",dataIndex:"tags",render:function(e){return M.a.createElement("span",null,e?e.map(function(e){return M.a.createElement(g["a"],{color:"blue",key:e},e.toUpperCase())}):null)}}],w=function(t){var a=e.state.row;console.log("226===",a);var n=e.props.selectName;n&&n.map(function(e){e.name.startsWith("system:")&&a.push(e)}),console.log("234===",a);var r,o=[],s=K(a);try{for(s.s();!(r=s.n()).done;){var i,c=r.value,u=!0,d=K(o);try{for(d.s();!(i=d.n()).done;){var p=i.value;c._id==p._id&&(u=!1)}}catch(e){d.e(e)}finally{d.f()}u&&o.push(c)}}catch(e){s.e(e)}finally{s.f()}console.log("======183===",o),l(o)};return M.a.createElement("div",null,M.a.createElement(r["a"],{title:"\u89d2\u8272\u6a21\u677f\u5217\u8868",width:"75%",onClose:function(){return i()},visible:n},M.a.createElement("div",null,M.a.createElement("div",null,M.a.createElement(s["a"],{rowSelection:y,columns:x,dataSource:f,size:"small",rowKey:function(e){return e._id}})),M.a.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},M.a.createElement(o["a"],{onClick:function(){return i()},style:{marginRight:8}},"\u53d6\u6d88"),M.a.createElement(o["a"],{onClick:w,type:"primary"},"\u786e\u5b9a")))))}}]),a}(D["Component"]),ae=Object(O["connect"])(function(e){return e.common_jsgl})(F["a"].create()(te)),ne=a("P4xi"),le=a("6Hmz");function re(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=oe(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw r}}}}function oe(e,t){if(e){if("string"===typeof e)return se(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ie(e){var t=ce();return function(){var a,n=q()(e);if(t){var l=q()(this).constructor;a=Reflect.construct(n,arguments,l)}else a=n.apply(this,arguments);return V()(this,a)}}function ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var ue=le["a"].WebFW_FWDYQX_CX.key,de=le["a"].WebFW_FWDYQX_ADD.key,pe=le["a"].WebFW_FWDYQX_Up.key,me=le["a"].WebFW_FWDYQX_SC.key,fe=F["a"].Item,he=j["a"].Option,ge=(A["a"].TextArea,T["a"].confirm),ye=function(e){C()(a,e);var t=ie(a);function a(){var e;x()(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l)),e.state={AclList:[],Tableloading:!0,visible:!1,type:"",drawerTitle:"",acldata:null,jsglVisible:!1,roleType:null,role:[],roleName:[],edit_role:[],edit_roleName:[],cxRole:[],cxRoleName:[],alltags:null,scriptList:null,status:0,roleStatus:1,rolesList:[]},e.query=function(){console.log("\u67e5\u8be2\u8f6c\u53d1\u5217\u8868===========\uff1a"),e.props.dispatch({type:"qxglModel/listReq",payload:{service:null,roles:null,status:null,skip:0,limit:0},callback:function(t){if("0"!=t.code)return y["a"].error("\u67e5\u8be2\u6743\u9650\u5217\u8868\u9519\u8bef\uff1a".concat(t.data));var a=t.data[1],n=[];a.forEach(function(e){e.roles&&n.push.apply(n,E()(e.roles))}),e.queryNameById(n),setTimeout(function(){e.setState({Tableloading:!1,AclList:a})},100)}})},e.queryNameById=function(t){t=Array.from(new Set(t));var a=[];t.map(function(t){var n=t.split(":");e.props.dispatch({type:"qxglModel/getRoles",payload:{domain:n[0],nodes:[n[1]]},callback:function(t){0==t.code&&(t.data[0]&&a.push(t.data[0]),e.setState({rolesList:a}))}})})},e.queryTags=function(){e.props.dispatch({type:"qxglModel/getTags",payload:{},callback:function(t){"0"==t.code?e.setState({alltags:t.data}):y["a"].error("\u67e5\u8be2\u6807\u7b7e\u51fa\u9519 ".concat(t.data))}})},e.del=function(t){var a=e.props.dispatch;T["a"].confirm({title:"\u786e\u8ba4\u5220\u9664 '".concat(t.service,"' \u5417?"),content:"",okText:"\u662f",okType:"danger",cancelText:"\u5426",onOk:function(){a({type:"qxglModel/delReq",payload:{id:t._id,reqData:t},callback:function(t){"0"==t.code?(e.query(),y["a"].success("\u6743\u9650\u5220\u9664\u6210\u529f\uff01")):y["a"].error("\u5220\u9664\u6743\u9650\u5931\u8d25 \uff01".concat(t.data))}})},onCancel:function(){}})},e.handelRoles=function(t){var a,n=e.state.rolesList,l={},r=re(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o._id==t)return l._id=o._id,l.name=o.name,l}}catch(e){r.e(e)}finally{r.f()}return l._id=t,l.name=t,l},e.openDrawer=function(t,a,n){e.state.rolesList;if(n){var l=n.roles,r=n&&null==n.roles?0:0==n.roles.length?-1:1,o=[];l&&l.forEach(function(t){o.push(e.handelRoles(t))}),console.log("===200===",o),setTimeout(function(){e.setState({visible:!0,type:t,drawerTitle:a,acldata:n,edit_role:o,roleStatus:r})},100)}else e.setState({visible:!0,type:t,drawerTitle:a});"03"==t&&(e.setState({drawerTitle:"\u8c03\u7528\u6743\u9650\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a ".concat(n.name)}),e.props.dispatch({type:"qxglModel/getScript",payload:{name:n.name,tags:n.tags?n.tags:null,status:null,sortby:["name",1],skip:0,limit:0},callback:function(t){console.log(t),0==t.code?e.setState({scriptList:t.data[1]}):y["a"].error("\u811a\u672c\u67e5\u8be2\u51fa\u9519 ".concat(t.data))}}))},e.drawerClose=function(){e.setState({visible:!1,type:"",drawerTitle:"",acldata:null,scriptList:null,roleStatus:1,role:[],edit_role:[]})},e.handleSearch=function(){var t=e.props,a=t.form,n=t.dispatch,l=e.state,r=l.cxRole,o=l.roleStatus,s=0==o?null:-1==o?[]:null,i=[];r.map(function(e){return i.push(e._id)});var c=a.getFieldValue("cx_name")?a.getFieldValue("cx_name"):null,u=a.getFieldValue("cx_status");u=0==u?0:-1==u?-1:null,i=i.length>0?i:null,console.log("\u67e5\u8be2\u53c2\u6570",c,i,u),n({type:"qxglModel/listReq",payload:{service:c,roles:i&&i.length>0?i:s,status:u,skip:0,limit:0},callback:function(t){"0"==t.code?(y["a"].success("\u67e5\u8be2\u6210\u529f\uff01"),e.setState({AclList:t.data[1]}),console.log(t)):y["a"].error("\u67e5\u8be2\u51fa\u9519 ".concat(t.data))}})},e.handleSubmit=function(){var t=e.props,a=t.form,n=t.dispatch,l=e.state,r=l.role,o=l.edit_role,s=l.roleStatus,i=0==s?null:-1==s?[]:void 0;console.log("rolesRideo================:",i);var c=[],u=[];if(r.map(function(e){return c.push(e._id)}),o.map(function(e){return u.push(e._id)}),"01"==e.state.type){console.log("roleIDS",c);var d=a.getFieldValue("service")?a.getFieldValue("service"):null,p=a.getFieldValue("entry")?a.getFieldValue("entry"):null,m=e.state.status;console.log("status",m),n({type:"qxglModel/setReq",payload:{req:{entry:p,service:d,roles:c.length>0?c:u.length>0?u:i,status:m}},callback:function(t){"0"==t.code?(e.query(),y["a"].success("\u6743\u9650\u6dfb\u52a0\u6210\u529f\uff01"),e.setState({visible:!1})):y["a"].error("\u6743\u9650\u6dfb\u52a0\u5931\u8d25 \uff01".concat(t.data))}})}else if("02"==e.state.type){var f=a.getFieldValue("service")?a.getFieldValue("service"):null,h=a.getFieldValue("entry")?a.getFieldValue("entry"):null,g=e.state.status;console.log("edit_roleIDS",u),n({type:"qxglModel/setReq",payload:{req:{_id:e.state.acldata._id,entry:h,service:f,roles:c.length>0?c:u.length>0?u:i,status:g},reqData:e.state.acldata},callback:function(t){"0"==t.code?(e.query(),y["a"].success("\u6743\u9650\u4fee\u6539\u6210\u529f\uff01"),e.setState({visible:!1})):y["a"].error("\u4fee\u6539\u6743\u9650\u5931\u8d25 \uff01".concat(t.data))}})}},e.changeRoleStatus=function(t){var a=t.target.value;e.setState({roleStatus:a,role:[],edit_role:[],cxRole:[]})},e.changeStatus=function(t){var a=t.target.value;console.log("status",a);var n=e.state.type;"02"==n&&ge(0==a?{title:"\u8b66\u544a",content:'\u8be5\u6b63\u670d\u52a1\u540d\u79f0\u72b6\u6001\u4fee\u6539\u4e3a"\u6b63\u5e38"\uff0c\u5219\u6b64\u6b63\u5219\u8868\u8fbe\u5f0f\u6240\u5bf9\u5e94\u7684\u63a5\u53e3\u5747\u53ef\u4ee5\u4f7f\u7528\uff0c\u662f\u5426\u7ee7\u7eed\u6388\u6743',okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){e.setState({status:a})},onCancel:function(){}}:{title:"\u8b66\u544a",content:'\u8be5\u670d\u52a1\u540d\u79f0\u72b6\u6001\u4fee\u6539\u4e3a"\u505c\u7528"\uff0c\u5219\u6b64\u6b63\u5219\u8868\u8fbe\u5f0f\u6240\u5bf9\u5e94\u7684\u63a5\u53e3\u5747\u5c06\u65e0\u6cd5\u4f7f\u7528\uff0c\u662f\u5426\u7ee7\u7eed\u6388\u6743',okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){e.setState({status:a})},onCancel:function(){}})},e.handel=function(t){var a,n=e.state.rolesList,l=re(n);try{for(l.s();!(a=l.n()).done;){var r=a.value;if(r._id==t)return r.name}}catch(e){l.e(e)}finally{l.f()}return t},e}return S()(a,[{key:"componentDidMount",value:function(){this.query(),this.queryTags()}},{key:"getJsglMsg",value:function(e){console.log("\u6dfb\u52a0role",e);var t=this.state,a=t.roleType;t.edit_role,t.cxRole,t.role;console.log("roleType",a);var n=[];e.length>0&&e.forEach(function(e){var t={};"01"==a?(t._id=e._id,t.name=e.name,n.push(t)):"02"==a?(t._id=e._id,t.name=e.name,n.push(t)):"03"==a&&(t._id=e._id,t.name=e.name,n.push(t))}),"01"==a?this.setState({cxRole:n,roleStatus:1}):"02"==a?this.setState({role:n,roleStatus:1}):"03"==a&&this.setState({edit_role:n,roleStatus:1}),this.setState({jsglVisible:!1,roleStatus:1})}},{key:"closeJsgl",value:function(){this.setState({jsglVisible:!1})}},{key:"handleChange",value:function(e,t){console.log("\u5220\u9664role",e);var a=this.state,n=a.edit_role,l=a.role,r=a.cxRole;if(console.log("==edit_role==",n),"01"==t){var o=[];e.map(function(e){r.map(function(t){e==t.name&&o.push(t)})}),this.setState({cxRoleName:e,cxRole:o})}else if("02"==t){var s=[];e.map(function(e){l.map(function(t){e==t.name&&s.push(t)})}),this.setState({roleName:e,role:s})}else if("03"==t){var i=[];e.map(function(e){n.map(function(t){e==t.name&&i.push(t)})}),console.log("======431===",i),this.setState({edit_roleName:e,edit_role:i})}}},{key:"showJsgl",value:function(e){console.log(e),this.setState({jsglVisible:!0,roleType:e})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.acldata,l=a.alltags,i=a.roleType,v=a.AclList,E=(a.rolesList,a.edit_roleName,a.roleName,a.cxRoleName,a.edit_role),b=a.role,x=a.cxRole,w=(l&&l.map(function(e){return M.a.createElement(he,{key:e},e)}),[{title:"\u811a\u672c\u540d\u79f0",align:"center",dataIndex:"name"},{title:"\u8bf4\u660e",dataIndex:"desc",align:"center"},{title:"\u6807\u7b7e",align:"center",dataIndex:"tags",render:function(e){return M.a.createElement("span",null,e?e.map(function(e){return M.a.createElement(g["a"],{color:"blue",key:e},e)}):[])}},{title:"\u72b6\u6001",dataIndex:"status",align:"center",render:function(e){return M.a.createElement("span",null,"0"==e?"\u6b63\u5e38":"\u505c\u7528")}},{title:"\u65f6\u95f4",dataIndex:"updateTime",align:"center",render:function(e){return M.a.createElement("span",null,e&&z()(e).format("YYYY-MM-DD"),"\xa0",e&&z()(e).format("HH:mm:ss"))}}]),S=[{title:"\u670d\u52a1\u540d\u79f0",align:"center",dataIndex:"service"},{title:"\u63a5\u53e3\u540d\u79f0",align:"center",dataIndex:"entry"},{title:"\u89d2\u8272",align:"center",dataIndex:"roles",width:"25%",render:function(t){return M.a.createElement("span",null,t&&t.length>0?t.map(function(t){return M.a.createElement(g["a"],{color:"blue"},e.handel(t))}):null==t?M.a.createElement(g["a"],{color:"red"},"\u4e0d\u9650"):M.a.createElement(g["a"],{color:"red"},"\u533f\u540d\u7528\u6237"))}},{title:"\u72b6\u6001",dataIndex:"status",align:"center",render:function(e){return M.a.createElement("span",null,"0"==e?"\u6b63\u5e38":"\u505c\u7528")}},{title:"\u64cd\u4f5c",align:"center",width:"15%",render:function(t){return M.a.createElement(M.a.Fragment,null,M.a.createElement("a",{onClick:function(a){a&&a.preventDefault(),ne["a"].checkAuthAndExecute(e.props.dispatch,pe,function(){return e.openDrawer("02","\u6743\u9650\u8be6\u60c5",t)},[null])}},"\u4fee\u6539"),M.a.createElement(h["a"],{type:"vertical"}),M.a.createElement("a",{onClick:function(a){a&&a.preventDefault(),ne["a"].checkAuthAndExecute(e.props.dispatch,me,function(){return e.del(t)},[null])}},"\u5220\u9664"))}}],k={pageSize:15},C={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},_=M.a.createElement(M.a.Fragment,null,"01"==this.state.type?M.a.createElement(F["a"],c()({},C,{onSubmit:this.handleSubmit}),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"80px",display:"inline-block"}},"\u670d\u52a1\u540d\u79f0 ")},t("service")(M.a.createElement("div",null,M.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165\u670d\u52a1\u540d\u79f0",style:{width:360}})))))),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"80px",display:"inline-block"}},"\u63a5\u53e3\u540d\u79f0 ")},t("entry")(M.a.createElement("div",null,M.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0",style:{width:360}})))))),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272")},M.a.createElement(j["a"],{mode:"tags",style:{width:360},placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272\uff01",onFocus:function(){return e.showJsgl("02")},dropdownStyle:{display:"none"},onChange:function(t){e.handleChange(t,"02")},value:b?b.map(function(e){return e.name}):void 0,allowClear:!0}))),M.a.createElement(f["a"],{span:1}),M.a.createElement(f["a"],{span:8},M.a.createElement(p["a"].Group,{onChange:this.changeRoleStatus,value:this.state.roleStatus,defaultValue:this.state.roleStatus},M.a.createElement(p["a"],{value:0},"\u4e0d\u9650"),M.a.createElement(p["a"],{value:-1},"\u533f\u540d")),M.a.createElement(u["a"],{placement:"top",content:"\u6587\u672c\u6846\u548c\u5355\u9009\u6309\u94ae\u53ea\u80fd\u9009\u62e9\u4e00\u9879",title:"\u5e2e\u52a9",style:{display:"inline-block"}},M.a.createElement("a",{href:"javaSrcipt:;"},M.a.createElement(d["a"],{type:"question-circle"}))))),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u72b6\u6001")},M.a.createElement(p["a"].Group,{onChange:this.changeStatus,defaultValue:0,style:{width:360}},M.a.createElement(p["a"],{value:0},"\u6b63\u5e38"),M.a.createElement(p["a"],{value:-1},"\u505c\u7528")))))):"02"==this.state.type?M.a.createElement(F["a"],c()({},C,{onSubmit:this.handleSubmit}),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"80px",display:"inline-block"}},"\u670d\u52a1\u540d\u79f0")},t("service",{initialValue:n&&n.service})(M.a.createElement("div",null,M.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165\u670d\u52a1\u540d\u79f0",defaultValue:n&&n.service,style:{width:360}})))))),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"80px",display:"inline-block"}},"\u63a5\u53e3\u540d\u79f0")},t("entry",{initialValue:n&&n.entry})(M.a.createElement("div",null,M.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d\u79f0",defaultValue:n&&n.entry,style:{width:360}})))))),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272")},M.a.createElement(j["a"],{mode:"tags",style:{width:360},placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272\uff01",onFocus:function(){return e.showJsgl("03")},dropdownStyle:{display:"none"},onChange:function(t){e.handleChange(t,"03")},value:E?E.map(function(e){return e.name}):void 0,allowClear:!0}))),M.a.createElement(f["a"],{span:1}),M.a.createElement(f["a"],{span:8},M.a.createElement(p["a"].Group,{onChange:this.changeRoleStatus,value:this.state.roleStatus,defaultValue:this.state.roleStatus},M.a.createElement(p["a"],{value:0},"\u4e0d\u9650"),M.a.createElement(p["a"],{value:-1},"\u533f\u540d")),M.a.createElement(u["a"],{placement:"top",content:"\u6587\u672c\u6846\u548c\u5355\u9009\u6309\u94ae\u53ea\u80fd\u9009\u62e9\u4e00\u9879",title:"\u5e2e\u52a9",style:{display:"inline-block"}},M.a.createElement("a",{href:"javaSrcipt:;"},M.a.createElement(d["a"],{type:"question-circle"}))))),M.a.createElement(m["a"],null,M.a.createElement(f["a"],{span:12},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u72b6\u6001")},M.a.createElement(p["a"].Group,{onChange:this.changeStatus,defaultValue:n?n.status:null,style:{width:360}},M.a.createElement(p["a"],{checked:0==this.state.status,value:0},"\u6b63\u5e38"),M.a.createElement(p["a"],{checked:-1==this.state.status,value:-1},"\u505c\u7528")))))):"03"==this.state.type?M.a.createElement(s["a"],{pagination:k,columns:w,dataSource:this.state.scriptList,size:"small"}):null);return M.a.createElement("div",null,M.a.createElement("div",{className:I.a.header},M.a.createElement(F["a"],{onSubmit:this.handleSearch,layout:"inline"},M.a.createElement("div",{className:I.a.search},M.a.createElement("div",null,M.a.createElement("div",{className:I.a.cols},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u670d\u52a1\u540d\u79f0")},t("cx_name")(M.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165\u670d\u52a1\u540d\u79f0",style:{width:330}}))),M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u72b6\u6001")},t("cx_status")(M.a.createElement(j["a"],{style:{width:330},placeholder:"\u8bf7\u9009\u62e9\u72b6\u6001\uff01",allowClear:!0},M.a.createElement(he,{value:null},"\u5168\u90e8"),M.a.createElement(he,{value:0},"\u6b63\u5e38"),M.a.createElement(he,{value:-1},"\u505c\u7528"))))),M.a.createElement("div",{className:I.a.cols},M.a.createElement(fe,{label:M.a.createElement("span",{style:{width:"60px",display:"inline-block"}},"\u89d2\u8272")},M.a.createElement(j["a"],{mode:"tags",style:{width:330},placeholder:"\u8bf7\u9009\u62e9\u89d2\u8272\uff01",onFocus:function(){return e.showJsgl("01")},dropdownStyle:{display:"none"},onChange:function(t){e.handleChange(t,"01")},value:x?x.map(function(e){return e.name}):void 0,allowClear:!0})),M.a.createElement(p["a"].Group,{onChange:this.changeRoleStatus,value:this.state.roleStatus,defaultValue:this.state.roleStatus},M.a.createElement(p["a"],{value:0},"\u4e0d\u9650"),M.a.createElement(p["a"],{value:-1},"\u533f\u540d")))),M.a.createElement("span",{className:I.a.submitButtons},M.a.createElement(o["a"],{type:"primary",onClick:function(t){t&&t.preventDefault(),ne["a"].checkAuthAndExecute(e.props.dispatch,ue,function(){return e.handleSearch()},[null])}},"\u67e5\u8be2"),M.a.createElement(o["a"],{style:{marginLeft:8},onClick:function(){e.props.form.resetFields(),e.query(),e.setState({cxRole:[]}),y["a"].success("\u91cd\u7f6e\u6210\u529f")}},"\u91cd\u7f6e"))))),M.a.createElement("div",{className:I.a.content},M.a.createElement("div",{className:I.a.btns},M.a.createElement(o["a"],{type:"primary",onClick:function(t){t&&t.preventDefault(),ne["a"].checkAuthAndExecute(e.props.dispatch,de,function(){return e.openDrawer("01","\u589e\u52a0\u670d\u52a1\u8f6c\u53d1\u6743\u9650")},[null])}},M.a.createElement(d["a"],{type:"plus"}),"\u589e\u52a0\u670d\u52a1\u8f6c\u53d1\u6743\u9650")),M.a.createElement("div",null,M.a.createElement(s["a"],{pagination:k,columns:S,dataSource:v,loading:this.state.Tableloading,size:"small"}))),M.a.createElement(r["a"],{title:M.a.createElement(M.a.Fragment,null,this.state.drawerTitle),onClose:this.drawerClose,visible:this.state.visible,destroyOnClose:!0},_,"03"!=this.state.type?M.a.createElement("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},M.a.createElement(o["a"],{onClick:this.drawerClose,style:{marginRight:8}},"\u53d6\u6d88"),M.a.createElement(o["a"],{type:"primary",onClick:this.handleSubmit},"\u786e\u5b9a")):null),this.state.jsglVisible?M.a.createElement(ae,{jsglVisible:this.state.jsglVisible,handleSelectedJsgl:this.getJsglMsg.bind(this),handleJsglVisible:this.closeJsgl.bind(this),roleType:i,selectName:"01"==i?x:"02"==i?b:E}):null)}}]),a}(D["Component"]);t["default"]=Object(O["connect"])(function(e){return e.qxglModel})(F["a"].create()(ye))}}]);