(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"+W4/":function(e,t,a){e.exports={tableList:"antd-pro-pages-gateway-flow-flow-tableList",tableListOperator:"antd-pro-pages-gateway-flow-flow-tableListOperator",tableListForm:"antd-pro-pages-gateway-flow-flow-tableListForm",submitButtons:"antd-pro-pages-gateway-flow-flow-submitButtons",tableListFormAdd:"antd-pro-pages-gateway-flow-flow-tableListFormAdd"}},"BE+S":function(e,t,a){"use strict";a.r(t);var l=a("jehZ"),r=a.n(l),n=(a("IzEo"),a("bx4M")),i=(a("g9YV"),a("wCAj")),o=a("p0pE"),s=a.n(o),c=(a("+L6B"),a("2/Rp")),u=(a("7Kak"),a("9yH6")),p=(a("14J3"),a("BMrR")),d=(a("jCWc"),a("kPKH")),m=(a("O3gP"),a("lrIw")),f=(a("miYZ"),a("tsqr")),h=(a("/zsF"),a("PArb")),y=a("2Taf"),v=a.n(y),g=a("vZ4D"),E=a.n(g),b=a("MhPg"),w=a.n(b),k=a("l4Ni"),F=a.n(k),C=a("ujKo"),V=a.n(C),L=(a("OaEy"),a("2fM7")),R=(a("2qtc"),a("kLXV")),D=(a("y8nQ"),a("Vl3Y")),S=a("q1tI"),O=a.n(S),A=a("MuoO"),x=(a("wd/R"),a("zHco")),q=(a("Pwec"),a("CtXQ")),U=(a("giR+"),a("fyUT")),G=(a("5NDa"),a("5rEg")),I=a("BSQV"),M=a.n(I);function _(e){var t=B();return function(){var a,l=V()(e);if(t){var r=V()(this).constructor;a=Reflect.construct(l,arguments,r)}else a=l.apply(this,arguments);return F()(this,a)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var P=L["a"].Option,T=(L["a"].OptGroup,G["a"].TextArea,D["a"].Item),N=function(e){w()(a,e);var t=_(a);function a(e){var l;v()(this,a),l=t.call(this,e),l.state={result:[],resultE:[]},l.remove=function(e,t){var a=l.props.form;if("f"==e){var r=a.getFieldValue("keys");if(0===r.length)return;r.splice(t,1),a.setFieldsValue({keys:r})}else if("m"==e){var n=a.getFieldValue("keys2");if(0===n.length)return;n.splice(t,1),a.setFieldsValue({keys2:n})}},l.add=function(e){var t=l.props.form;if("f"==e){var a=t.getFieldValue("keys"),r=a.concat("");t.setFieldsValue({keys:r})}else if("m"==e){var n=t.getFieldValue("keys2"),i=n.concat("");t.setFieldsValue({keys2:i})}};var r=l.props.value;return console.log(r),l}return E()(a,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({result:e.serviceDate.map(function(e){return"".concat(e)})}),this.setState({resultE:e.entryDate.map(function(e){return"".concat(e)})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.modalVisible,l=t.form,r=t.handleUpdate,n=t.handleModalVisible,i=t.value,o=t.appDate,s=t.groupDate,p=t.handleService,d=t.handleEntry,f=this.props.form,h=f.getFieldDecorator,y=(f.getFieldValue,function(t){"*"===t?e.setState({result:[]}):p(t,!1)}),v=this.state.result.map(function(e){return O.a.createElement(m["a"].Option,{key:e,value:e},e)}),g=function(t){var a=l.getFieldValue("service");console.log(e.props),"*"===t||"*"===a?e.setState({resultE:[]}):d(a,t)},E=this.state.resultE.map(function(e){return O.a.createElement(m["a"].Option,{key:e,value:e},e)}),b=null,w=null,k=[];k.push(O.a.createElement(P,{value:""},"\u5168\u90e8")),void 0!=o&&o[0]>0&&o[1].forEach(function(e,t){k.push(O.a.createElement(P,{key:e._id},e._id))});var F=[];F.push(O.a.createElement(P,{value:""},"\u5168\u90e8")),void 0!=o&&s.length>0&&s.forEach(function(e,t){F.push(O.a.createElement(P,{key:e},e))});var C=function(t){var a=e.props.value;l.validateFields(function(e,t){e||(t.id=a._id,r(t),l.resetFields())})},V=function(e){var t=e.target.value;l.setFieldsValue({enabled:t})};return null==b&&(l.getFieldDecorator("keys",{initialValue:i.forward}),b=l.getFieldValue("keys")),null==w&&(l.getFieldDecorator("keys2",{initialValue:i.mirror}),w=l.getFieldValue("keys2")),console.log("keys",b),console.log("keys2",w),O.a.createElement(R["a"],{destroyOnClose:!0,title:"\u8bf7\u6c42\u8f6c\u53d1\u8be6\u60c5",visible:a,onOk:C,onCancel:function(){return n()},width:"800px"},O.a.createElement("div",{className:M.a.tableListForm},O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u7f51\u5173\u5206\u7ec4"},h("group",{initialValue:void 0!=i.group?i.group:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(O.a.createElement(L["a"],{style:{width:"100%"}},F))),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5e94\u7528"},l.getFieldDecorator("app",{rules:[{required:!1,message:"\u5e94\u7528!"}],initialValue:void 0!=i.app?i.app:""})(O.a.createElement(L["a"],{style:{width:"100%"},placeholder:""},k))),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5fae\u670d\u52a1"},l.getFieldDecorator("service",{initialValue:i.service,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5fae\u670d\u52a1"}]})(O.a.createElement(m["a"],{style:{width:200},onSearch:y,onFocus:y},v))),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u63a5\u53e3"},l.getFieldDecorator("entry",{initialValue:i.entry,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3"}]})(O.a.createElement(m["a"],{style:{width:200},onSearch:g,onFocus:g},E))),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u8bf7\u6c42\u6bd4\u4f8b"},l.getFieldDecorator("rate",{initialValue:i.rate,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8bf7\u6c42\u6bd4\u4f8b"}]})(O.a.createElement(U["a"],{min:1,max:100}))),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u5faa\u73af\u8f6c\u53d1)"},O.a.createElement(c["a"],{type:"dashed",onClick:function(){return e.add("f")},style:{width:"60%"}},O.a.createElement(q["a"],{type:"plus"})," \u589e\u52a0\u9879")),b.map(function(t,a){return O.a.createElement(D["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(a+1),required:!1,key:t+""+a},l.getFieldDecorator("forward[".concat(a,"]"),{initialValue:t,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(O.a.createElement(G["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),b.length>=1?O.a.createElement(q["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove("f",a)}}):null)}),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u955c\u50cf\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u4f9d\u6b21\u8f6c\u53d1)"},O.a.createElement(c["a"],{type:"dashed",onClick:function(){return e.add("m")},style:{width:"60%"}},O.a.createElement(q["a"],{type:"plus"})," \u589e\u52a0\u9879")),w.map(function(t,a){return O.a.createElement(D["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(a+1),required:!1,key:t+""+a},l.getFieldDecorator("mirror[".concat(a,"]"),{initialValue:t,validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(O.a.createElement(G["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),w.length>=1?O.a.createElement(q["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return e.remove("m",a)}}):null)}),O.a.createElement(T,{labelCol:{span:8},wrapperCol:{span:13},label:"\u53ef\u7528\u72b6\u6001"},l.getFieldDecorator("enabled",{initialValue:i.enabled})(O.a.createElement(u["a"].Group,{onChange:V},O.a.createElement(u["a"],{value:!0},"\u6b63\u5e38"),O.a.createElement(u["a"],{value:!1},"\u505c\u7528"))))))}}]),a}(S["PureComponent"]),Z=D["a"].create()(N);function Q(e){var t=W();return function(){var a,l=V()(e);if(t){var r=V()(this).constructor;a=Reflect.construct(l,arguments,r)}else a=l.apply(this,arguments);return F()(this,a)}}function W(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var j,z,J,H=L["a"].Option,K=(L["a"].OptGroup,G["a"].TextArea,D["a"].Item),X=0,Y=0,$=function(e){w()(a,e);var t=Q(a);function a(e){var l;return v()(this,a),l=t.call(this,e),l.state={result:[],resultE:[]},l}return E()(a,[{key:"componentWillReceiveProps",value:function(e,t){console.log(e),this.setState({result:e.serviceDate.map(function(e){return"".concat(e)})}),this.setState({resultE:e.entryDate.map(function(e){return"".concat(e)})})}},{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props,a=t.modalVisible,l=t.form,r=t.handleAdd,n=t.handleModalVisible,i=t.appDate,o=t.groupDate,s=(t.serviceDate,t.entryDate,t.handleService),p=t.handleEntry,d=function(t){"*"===t?e.setState({result:[]}):s(t,!1)},f=this.state.result.map(function(e){return O.a.createElement(m["a"].Option,{key:e,value:e},e)}),h=function(t){var a=l.getFieldValue("service");console.log(e.props),"*"===t||"*"===a?e.setState({resultE:[]}):p(a,t)},y=this.state.resultE.map(function(e){return O.a.createElement(m["a"].Option,{key:e,value:e},e)}),v=[];v.push(O.a.createElement(H,{value:""},"\u5168\u90e8")),void 0!=i&&i[0]>0&&i[1].forEach(function(e,t){v.push(O.a.createElement(H,{value:e._id},e._id))});var g=[];g.push(O.a.createElement(H,{value:""},"\u5168\u90e8")),void 0!=o&&o.length>0&&o.forEach(function(e,t){g.push(O.a.createElement(H,{value:e},e))});var E=function(){l.validateFields(function(e,t){e||(l.resetFields(),r(t))})},b=function(e){var t=e.target.value;l.setFieldsValue({enabledAdd:t})},w=function(e,t){if("f"==e){var a=l.getFieldValue("keys");if(1===a.length)return;l.setFieldsValue({keys:a.filter(function(e){return e!==t})})}else if("m"==e){var r=l.getFieldValue("keys2");if(1===r.length)return;l.setFieldsValue({keys2:r.filter(function(e){return e!==t})})}},k=function(e){if("f"==e){var t=l.getFieldValue("keys"),a=t.concat(X++);l.setFieldsValue({keys:a})}else if("m"==e){var r=l.getFieldValue("keys2"),n=r.concat(Y++);l.setFieldsValue({keys2:n})}};l.getFieldDecorator("keys",{initialValue:[]});var F=l.getFieldValue("keys");l.getFieldDecorator("keys2",{initialValue:[]});var C=l.getFieldValue("keys2");return O.a.createElement(R["a"],{destroyOnClose:!0,title:"\u589e\u52a0\u8f6c\u53d1",visible:a,onOk:E,onCancel:function(){return n()},width:"800px"},O.a.createElement("div",{className:M.a.tableListFormAdd},O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u7f51\u5173\u5206\u7ec4"},l.getFieldDecorator("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u7f51\u5173\u5206\u7ec4\uff01"}]})(O.a.createElement(L["a"],{style:{width:"100%"}},g))),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5e94\u7528"},l.getFieldDecorator("app",{initialValue:"",rules:[{required:!1,message:"\u5e94\u7528!"}]})(O.a.createElement(L["a"],{style:{width:"100%"}},v))),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5fae\u670d\u52a1"},l.getFieldDecorator("service",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5fae\u670d\u52a1\uff01\u5168\u90e8\u5199*"}]})(O.a.createElement(m["a"],{style:{width:200},placeholder:"*\u4e3a\u5168\u90e8",onSearch:d,onFocus:d},f))),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u63a5\u53e3"},l.getFieldDecorator("entry",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u53e3\uff01\u5168\u90e8\u5199*"}]})(O.a.createElement(m["a"],{style:{width:200},placeholder:"*\u4e3a\u5168\u90e8",onSearch:h,onFocus:h},y))),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u8f6c\u53d1\u6bd4\u4f8b(%)"},l.getFieldDecorator("rate",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8f6c\u53d1\u6bd4\u4f8b"}]})(O.a.createElement(U["a"],{min:1,max:100}))),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u5faa\u73af\u8f6c\u53d1)"},O.a.createElement(c["a"],{type:"dashed",onClick:function(){return k("f")},style:{width:"60%"}},O.a.createElement(q["a"],{type:"plus"})," \u589e\u52a0\u9879")),F.map(function(e,t){return O.a.createElement(D["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(t+1),required:!1,key:e},l.getFieldDecorator("forward[".concat(e,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(O.a.createElement(G["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),F.length>1?O.a.createElement(q["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return w("f",e)}}):null)}),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u955c\u50cf\u7684\u76ee\u6807\u7f51\u5173\u7684URL(\u4f9d\u6b21\u8f6c\u53d1)"},O.a.createElement(c["a"],{type:"dashed",onClick:function(){return k("m")},style:{width:"60%"}},O.a.createElement(q["a"],{type:"plus"})," \u589e\u52a0\u9879")),C.map(function(e,t){return O.a.createElement(D["a"].Item,{labelCol:{span:8},wrapperCol:{span:13},label:"URL".concat(t+1),required:!1,key:e},l.getFieldDecorator("mirror[".concat(e,"]"),{validateTrigger:["onChange","onBlur"],rules:[{required:!1,whitespace:!0,message:"\u8bf7\u8f93\u5165URL\u6216\u8005\u5220\u9664\u6b64\u9879"}]})(O.a.createElement(G["a"],{placeholder:"\u5206\u6d41\u7684\u76ee\u6807\u7f51\u5173\u7684URL",style:{width:"60%",marginRight:8}})),C.length>1?O.a.createElement(q["a"],{className:"dynamic-delete-button",type:"minus-circle-o",onClick:function(){return w("m",e)}}):null)}),O.a.createElement(K,{labelCol:{span:8},wrapperCol:{span:13},label:"\u53ef\u7528\u72b6\u6001"},l.getFieldDecorator("enabledAdd",{initialValue:!0})(O.a.createElement(u["a"].Group,{onChange:b},O.a.createElement(u["a"],{value:!0},"\u6b63\u5e38"),O.a.createElement(u["a"],{value:!1},"\u505c\u7528"))))))}}]),a}(S["PureComponent"]),ee=D["a"].create()($),te=a("+W4/"),ae=a.n(te),le=a("P4xi"),re=a("6Hmz");function ne(e){var t=ie();return function(){var a,l=V()(e);if(t){var r=V()(this).constructor;a=Reflect.construct(l,arguments,r)}else a=l.apply(this,arguments);return F()(this,a)}}function ie(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var oe=re["a"].WGGL_QQZFGZGL_ZJXLGZ.key,se=re["a"].WGGL_QQZFGZGL_DEL.key,ce=re["a"].WGGL_QQZFGZGL_DETAIL.key,ue=D["a"].Item,pe=R["a"].confirm,de=L["a"].Option,me=[],fe=(j=Object(A["connect"])(function(e){var t=e.flow,a=e.loading;return{flow:t,loading:a.models.flow}}),z=D["a"].create(),j(J=z(J=function(e){w()(a,e);var t=ne(a);function a(){var e;v()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r)),e.state={modalVisible:!1,formValues:{},options:[],modalVisible2:!1,appOpt:[],groupOpt:[],dataList:[],applist:[],groupList:[],entryList:[],serviceList:[]},e.columns=[{title:"\u7f51\u5173\u5206\u7ec4",dataIndex:"group",width:"8%",render:function(e){return e?O.a.createElement("span",null,e):O.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u5e94\u7528",dataIndex:"app",width:"8%",render:function(e){return e?O.a.createElement("span",null,e):O.a.createElement("span",null,"\u5168\u90e8")}},{title:"\u5fae\u670d\u52a1",dataIndex:"service",width:"14%"},{title:"\u63a5\u53e3",dataIndex:"entry",width:"14%"},{title:"\u8bf7\u6c42\u6bd4\u4f8b(%)",dataIndex:"rate",width:"9%"},{title:"\u5206\u6d41\u7684URL(\u5faa\u73af\u8f6c\u53d1)",dataIndex:"forward",width:"15%",render:function(e){if(e)return O.a.createElement("div",null,e.map(function(e){return O.a.createElement("div",null,e)}))}},{title:"\u955c\u50cf\u7684URL(\u4f9d\u6b21\u8f6c\u53d1)",dataIndex:"mirror",width:"15%",render:function(e){if(e)return O.a.createElement("div",null,e.map(function(e){return O.a.createElement("div",null,e)}))}},{title:"\u53ef\u7528\u72b6\u6001",dataIndex:"enabled",width:"8%",render:function(e){return e?O.a.createElement("span",null,"\u6b63\u5e38"):O.a.createElement("span",null,"\u505c\u7528")}},{title:"\u64cd\u4f5c",width:"9%",render:function(t){return O.a.createElement("span",null,O.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),le["a"].checkAuthAndExecute(e.props.dispatch,se,function(){return e.handleMenuClick(t._id)},[])}},"\u5220\u9664"),O.a.createElement(h["a"],{type:"vertical"}),O.a.createElement("a",{href:"javaSrcipt:;",onClick:function(a){a&&a.preventDefault(),le["a"].checkAuthAndExecute(e.props.dispatch,ce,function(){return e.handleModalVisible2(!0,t)},[])}},"\u8be6\u60c5"))}}],e.handleFormReset=function(){var t=e.props,a=t.form,l=t.dispatch;a.resetFields(),e.setState({formValues:{}});var r=new Array;r=["group",-1,"app",-1,"service",-1],l({type:"flow/fetch",payload:{group:null,app:null,enabled:null,service:null,sortby:r,limit:0,skip:0},callback:function(t){0===t.code&&e.setState({dataList:t.data})}})},e.handleMenuClick=function(t){var a=e.props,l=a.dispatch;a.form;pe({title:"\u786e\u8ba4\u64cd\u4f5c\u5c06\u5220\u9664\u5df2\u9009\u4e2d\u670d\u52a1\u8bf7\u6c42\u8f6c\u53d1\uff0c\u8bf7\u614e\u91cd\u9009\u62e9\u3002",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u653e\u5f03",onOk:function(){l({type:"flow/remove",payload:{id:t},callback:function(t){0===t.code?(f["a"].success("\u5220\u9664\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u6210\u529f\uff01"),e.handleFormReset()):f["a"].error("\u5220\u9664\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u5931\u8d25\uff01")}})},onCancel:function(){}})},e.handleSearch=function(t){t&&t.preventDefault();var a=e.props,l=a.dispatch,r=a.form;r.validateFields(function(t,a){if(!t){console.log(a);var r=new Array;r=["group",-1,"app",-1,"service",-1];var n={group:""==a.group?null:a.group,app:""==a.app?null:a.app,enabled:""==a.enabled?null:a.enabled,service:void 0==a.service?null:a.service,sortby:r,limit:0,skip:0};e.setState({formValues:n}),l({type:"flow/fetch",payload:n,callback:function(t){0===t.code?e.setState({dataList:t.data}):(f["a"].error("\u67e5\u8be2\u5217\u8868\u5931\u8d25\uff01"),e.setState({dataList:[]}))}})}})},e.handleModalVisible=function(t){e.setState({modalVisible:!!t})},e.handleModalVisible2=function(t,a){e.setState({modalVisible2:!!t,record:a})},e.handleAdd=function(t){var a=e.props.dispatch;e.state.formValues;console.log("===fields===",t);var l={_id:0};l.group=""==t.group?null:t.group,l.app=""==t.app?null:t.app,l.service=t.service,l.entry=t.entry,l.enabled=t.enabledAdd,l.forward=void 0===t.forward?[]:t.forward,l.mirror=void 0===t.mirror?[]:t.mirror,a({type:"flow/add",payload:{flow:l},callback:function(t){0===t.code?(f["a"].success("\u589e\u52a0\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u6210\u529f\uff01"),e.handleFormReset(),e.handleModalVisible()):f["a"].error("\u589e\u52a0\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u5931\u8d25\uff01")}})},e.handleUpdate=function(t){var a=e.props.dispatch,l=(e.state.formValues,{});l._id=t.id,l.group=""==t.group?null:t.group,l.app=""==t.app?null:t.app,l.service=t.service,l.entry=t.entry,l.enabled=t.enabled,l.forward=void 0===t.forward?[]:t.forward,l.mirror=void 0===t.mirror?[]:t.mirror,a({type:"flow/set",payload:{flow:l},callback:function(t){0===t.code?(f["a"].success("\u4fee\u6539\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u6210\u529f\uff01"),e.handleFormReset(),e.handleModalVisible2()):f["a"].success("\u4fee\u6539\u8bf7\u6c42\u8f6c\u53d1\u89c4\u5219\u5931\u8d25\uff01")}})},e.handleService=function(t,a){var l=e.props.dispatch;l({type:"flow/fetchService",payload:{name:void 0==t?null:t},callback:function(t){e.setState({serviceList:t.data}),a&&(me=t.data.map(function(e){return O.a.createElement(m["a"].Option,{key:"s"+e,value:e},e)}))}})},e.handleEntry=function(t,a){var l=e.props.dispatch;l({type:"flow/fetchEntry",payload:{entry:void 0==a?null:a},callback:function(t){e.setState({entryList:t.data})}})},e.setAppOpt=function(){e.props.flow.apps;var t=[],a=e.state.applist;t.push(O.a.createElement(de,{value:"",key:"app"},"\u5168\u90e8")),void 0!=a&&a[0]>0&&a[1].forEach(function(e,a){t.push(O.a.createElement(de,{key:e._id},e._id))}),e.setState({appOpt:t},function(){})},e.setGroupOpt=function(){e.props.flow.group;var t=[],a=e.state.groupList;t.push(O.a.createElement(de,{value:"",key:"group"},"\u5168\u90e8")),void 0!=a&&a.length>0&&a.forEach(function(e,a){t.push(O.a.createElement(de,{key:e},e))}),e.setState({groupOpt:t})},e}return E()(a,[{key:"componentDidMount",value:function(){var e=this;this.setAppOpt(),this.setGroupOpt();var t=this.props.dispatch,a=new Array;a=["group",-1,"app",-1,"service",-1],t({type:"flow/fetch",payload:{group:null,app:null,enabled:null,service:null,sortby:a,limit:0,skip:0},callback:function(t){0===t.code&&e.setState({dataList:t.data})}});var l=new Array;l=["_id",1],t({type:"flow/fetchApp",payload:{name:null,sortby:l,tags:null,limit:0,skip:0,status:0},callback:function(t){console.log("===e223===",t),0===t.code&&e.setState({applist:t.data})}}),t({type:"flow/fetchGroupInFlow",callback:function(t){0===t.code&&e.setState({groupList:t.data})}})}},{key:"renderSimpleForm",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=(this.state.options,function(t){"*"===t||e.handleService(t,!0),console.log(me)});return O.a.createElement(D["a"],{onSubmit:this.handleSearch,layout:"inline",onReset:this.handleFormReset},O.a.createElement(p["a"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(d["a"],{md:8,sm:24},O.a.createElement(ue,{labelCol:{span:5},wrapperCol:{span:18},label:"\u7f51\u5173\u5206\u7ec4"},t("group",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(O.a.createElement(L["a"],{style:{width:"100%"},onFocus:this.setGroupOpt},this.state.groupOpt)))),O.a.createElement(d["a"],{md:8,sm:24},O.a.createElement(ue,{label:"\u5e94\xa0\xa0\xa0\xa0\xa0\xa0\xa0\u7528"},t("app",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u5e94\u7528\u540d\u5b57\uff01"}]})(O.a.createElement(L["a"],{style:{width:"100%"},onFocus:this.setAppOpt},this.state.appOpt))))),O.a.createElement(p["a"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(d["a"],{md:8,sm:24},O.a.createElement(ue,{label:"\u5fae\xa0\xa0\u670d\xa0\xa0\u52a1"},t("service",{})(O.a.createElement(m["a"],{style:{width:"100%"},onSearch:a,onFocus:a},me)))),O.a.createElement(d["a"],{md:8,sm:24},O.a.createElement(ue,{label:"\u53ef\u7528\u72b6\u6001"},t("enabled",{initialValue:null})(O.a.createElement(u["a"].Group,{onChange:this.onChangeEnabled},O.a.createElement(u["a"],{value:null,key:3},"\u4e0d\u9650"),O.a.createElement(u["a"],{value:"true",key:4},"\u6b63\u5e38"),O.a.createElement(u["a"],{value:"false",key:5},"\u505c\u7528"))))),O.a.createElement(d["a"],{md:8,sm:24},O.a.createElement("span",null,O.a.createElement(c["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),O.a.createElement("span",{style:{margin:"10px"}},O.a.createElement(c["a"],{type:"primary",htmlType:"reset"},"\u91cd\u7f6e")))))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.flow,l=(a.data,a.pagination),o=t.loading,u=this.state,p=u.modalVisible,d=u.modalVisible2,m=u.record,f=u.dataList,h=u.applist,y=u.groupList,v=u.serviceList,g=u.entryList,E={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible,appDate:h,groupDate:y,handleService:this.handleService,handleEntry:this.handleEntry,serviceDate:v,entryDate:g},b=s()({showSizeChanger:!0,showQuickJumper:!0},l);return O.a.createElement(x["a"],{title:"\u67e5\u8be2\u8868\u683c"},O.a.createElement(n["a"],{bordered:!1},O.a.createElement("div",{className:ae.a.tableList},O.a.createElement("div",{className:ae.a.tableListForm},this.renderForm()),O.a.createElement("div",{className:ae.a.tableListOperator},O.a.createElement(c["a"],{icon:"plus",type:"primary",onClick:function(t){t&&t.preventDefault(),le["a"].checkAuthAndExecute(e.props.dispatch,oe,function(){return e.handleModalVisible(!0)},[])}},"\u589e\u52a0\u8f6c\u53d1\u89c4\u5219")),O.a.createElement(i["a"],{rowKey:"_id",loading:o,dataSource:void 0==f?[]:f[1],columns:this.columns,pagination:b,size:"small"}))),O.a.createElement(ee,r()({},E,{modalVisible:p})),d?O.a.createElement(Z,{handleUpdate:this.handleUpdate,value:m,handleModalVisible:this.handleModalVisible2,modalVisible:d,appDate:h,groupDate:y,handleService:this.handleService,handleEntry:this.handleEntry,serviceDate:v,entryDate:g}):null)}}]),a}(S["PureComponent"]))||J)||J);t["default"]=fe}}]);