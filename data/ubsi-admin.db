
@@:{"col":"user","index":[{"name":"_id_","key":["_id",1]},{"name":"domain_1","key":["domain",1]},{"name":"roles_1","key":["roles",1]}],"db":"common_user"}
++:{"_id":"5ecf517ab84cfa7decfa6bfd","reason":null,"authTimeLast":{"$t":"long","$v":1662454924638},"roles":["system"],"passTime":{"$t":"long","$v":1647578450548},"updateTime":{"$t":"long","$v":1662454924638},"authTimeOK":{"$t":"long","$v":1662454924638},"passCount":0,"tags":["超级管理员"],"password":{"$t":"bytes","$v":"2a07d7220cd6271e4d97dc8bee5762d81195eb64b0d30b776407650529b70e00"},"phone":"18610561741","createTime":{"$t":"long","$v":1590645114326},"domain":"system","name":"超级管理员","account":"admin","email":"877041101@qq.com","status":1,"desc":"平台默认超级管理员，具有平台所有操作权限。其密码应严格保密，避免误操作！！！！"}

@@:{"col":"role","index":[{"name":"_id_","key":["_id",1]},{"name":"domain_1","key":["domain",1]},{"name":"node_1","key":["node",1]}],"db":"common_user"}
++:{"_id":"system:admin","node":"admin","createTime":{"$t":"long","$v":1645170052824},"domain":"system","name":"系统管理岗位","updateTime":{"$t":"long","$v":1645429309498},"desc":"UBSI管理平台系统管理","tags":null,"status":null}

@@:{"col":"acl","index":[{"name":"_id_","key":["_id",1]},{"name":"status_1","key":["status",1]},{"name":"tags_1","key":["tags",1]},{"name":"roles_1","key":["roles",1]}],"db":"ubsi_script"}
++:{"_id":"620dbf5391242160f0161af4","name":".*","status":0,"tags":["read","write"],"updateTime":{"$t":"long","$v":1655174924040}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6229bf84c11bf37ca045345d","code":"var res = $.request('rewin.ubsi.admin', 'getRegister', pageSize,currentPage,status,continer);\n$.result(res);","desc":"运行监控-容器发现-查询容器列表","name":"admin.container.getRegister","params":[{"desc":"容器名称","name":"continer","type":3},{"desc":"延迟容器:1 , 正常容器:0 , 失效容器:2, 容器总数：-1,服务超时：3，可转发：4\",","name":"status","type":3},{"desc":"分页数据","name":"currentPage","type":2},{"desc":"页面大小","name":"pageSize","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1657088970776}}
++:{"_id":"62396fc2c11bf37ca05ce7cc","code":"$.host(host, port)\nvar res = $.request('', 'getDealing', service);\n$.result(res);\n\n","desc":"运行监控-容器发现-获得任务列表","name":"admin.container.getDealing","params":[{"desc":"服务名字，null表示全部，\\\"\\\"表示控制器","name":"service","type":3},{"desc":"主机名","name":"host","type":3},{"desc":"端口号","name":"port","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1655279045161}}
++:{"_id":"623990c6c11bf37ca05cf4da","code":"\nvar res = $.request('rewin.ubsi.admin', 'getAccess', $._long(time));\n$.result(res);","desc":"运行监控-容器/微服务访问量详情图","name":"admin.container.getAccess","params":[{"desc":"时间戳","name":"time","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1660818126887}}
++:{"_id":"623a882cc11bf37ca05cfc6f","code":"$.host(host, port)\nvar res = $.request('', 'getRuntime', name);\n$.result(res);\n","name":"admin.container.getRuntime","updateTime":{"$t":"long","$v":1648196198156},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口"},{"name":"name","type":3,"desc":"微服务名，\"\"标识为容器控制器"}],"desc":"容器发现-管理及配置-容器运行状态","status":0,"tags":["read","xxz"]}
++:{"_id":"623a8fd2c11bf37ca05d0198","code":"$.host(host, port)\nvar res = $.request('', 'getAcl');\n$.result(res);","desc":"容器发现-管理及配置-设置ACl","name":"admin.container.getAcl","params":[{"desc":"主机名","name":"host","type":3},{"desc":"端口号","name":"port","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1661910318496}}
++:{"_id":"623ac6a4c11bf37ca05d17f3","code":"$.host(host, port)\nvar res = $.request('', 'setAcl',json);\n$.result(res);","name":"admin.container.setAcl","updateTime":{"$t":"long","$v":1648030611003},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"json","type":3,"desc":"Info.AclTable结构的json"}],"desc":"容器发现-管理及配置-设置ACI-提交","status":0,"tags":["write","xxz"]}
++:{"_id":"623bdd26c11bf37ca05d32ec","code":"var containername=host+\"#\"+port;\n$.info(\"containername:\"+containername);\nvar map=new Packages.java.util.HashMap();\nvar _reg = Packages.rewin.ubsi.consumer.Context.getRegister();\nvar resList = new Packages.java.util.ArrayList();\n\nvar _key=new Packages.java.util.ArrayList(_reg.keySet());\n$.info('_key:'+_key);\nfor(var i=0;i<_key.size();i++){\n  var Register=_reg.get(_key.get(i))\n  var Services=Register.Services;\n  $.result(map);\n  \n  var _Services=new Packages.java.util.ArrayList(Services.keySet());\n  if(host == null || host == \"null\"){\n    \n    var containername=_key.get(i).toString();\n    $.info('containername:'+containername);\n    var str=new Packages.java.util.ArrayList(containername.split(\"#\"));\n    $.info('str:'+str);\n    for(var j=0;j<_Services.size();j++){\n      var ser=_Services.get(j);\n     \n      if(ser == \"\"){\n        continue;\n      }else{\n        //var entryres = getServiceEntry(str[0], str[1], ser.toString());\n        //map.put(ser.toString(),entryres)\n         resList.add(ser);\n      }\n    }\n  }else{\n    if(containername.toString() == _key.get(i).toString()){\n    \n    for(var j=0;j<_Services.size();j++){\n      var ser=_Services.get(j);\n      if(ser == \"\"){\n        continue;\n      }else{\n        resList.add(ser);\n        /*$.info('ser:'+ser.toString());\n        var entryres = getServiceEntry(host, port, ser.toString());\n        $.info('entryres:'+entryres);\n        map.put(ser.toString(),entryres)\n        */\n      }\n    }\n  }\n  }\n  \n}\n$.result(resList);","desc":"本地路由-根据容器名称获取微服务及服务接口","include":["admin.container.getEntryFunc"],"name":"admin.container.getServiceEntry","params":[{"desc":"主机名","name":"host","type":3},{"desc":"端口号","name":"port","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1662442281770}}
++:{"_id":"623be731c11bf37ca05d3bd0","code":"if(host == null){\n  var _reg = Packages.rewin.ubsi.consumer.Context.getRegister();\n  var _key=new Packages.java.util.ArrayList(_reg.keySet());\n  for(var i=0;i<_key.size();i++){\n    var Register=_reg.get(_key.get(i))\n    var Services=Register.Services;\n    var servicelist=new Packages.java.util.ArrayList(Services.keySet());\n    for(var j=0;j<servicelist.size();j++){\n      if(service == (servicelist[j].toString())){\n        var target=_key.get(i).split(\"#\");\n        host=target[0];\n        port=target[1];\n      }\n    }\n  }\n}\n$.host(host, port)\nvar res = $.request(\"\", \"getEntry\", service);\n$.result(res)\n","desc":"获取服务接口","include":["admin.container.getEntryFunc"],"name":"admin.container.getEntry","params":[{"desc":"服务名","name":"service","type":3},{"desc":"主机名","name":"host","type":3},{"desc":"端口号","name":"port","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1661838543816}}
++:{"_id":"623bed95d3b17a75602ba0f8","code":"// 返回指定容器下指定服务的接口\nfunction getServiceEntry(host, port, service) {\n  if(host == null || host == \"null\"){\n    service=\"\";\n  }else{\n    $.host(host, port);\n  }\n  \n  var res=$.request(\"\", \"getEntry\", service);\n  var _entryres=new Packages.java.util.ArrayList(res);\n  var list=new Packages.java.util.ArrayList();\n  for(var k=0;k<_entryres.size();k++){\n    var entrymap=new Packages.java.util.HashMap(_entryres.get(k));\n    list.add(entrymap.name);\n  }\n  return list\n}","desc":"返回指定容器下指定服务的接口","name":"admin.container.getEntryFunc","result":"服务接口列表","status":0,"tags":["func","xxz"],"updateTime":{"$t":"long","$v":1661826545414}}
++:{"_id":"623c0d2a651bad76c8f785cd","code":"$.host(host, port)\nvar res = $.request('', 'getRouter');\n$.result(res);","name":"admin.container.getRouter","updateTime":{"$t":"long","$v":1648103383319},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"}],"desc":"容器发现-本地路由-获取路由","status":0,"tags":["read","xxz"]}
++:{"_id":"623c0faf651bad76c8f78dfb","code":"$.host(host, port)\nvar res = $.request('', 'setRouter',json);\n$.result(res);","name":"admin.container.setRouter","updateTime":{"$t":"long","$v":1648103438824},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"json","type":0,"desc":"Register.Router[]结构的json字符串"}],"desc":"容器发现-本地路由-设置本地路由","status":0,"tags":["write","xxz"]}
++:{"_id":"623d2af9651bad76c8f7c5ce","code":"var res = $.request('rewin.ubsi.admin', 'getServices', pageSize,currentPage,status,singleton,service,container);\n//$.info('res::::'+res)\n$.result(res);","desc":"容器发现-服务发现-获取微服务列表","name":"admin.container.getServices","params":[{"desc":"页面大小","name":"pageSize","type":2},{"desc":"分页数据","name":"currentPage","type":2},{"desc":"运行中的服务:1 , 未运行的服务:0 , 所有服务:2 ,超时：3","name":"status","type":3},{"desc":"微服务名","name":"service","type":3},{"desc":"容器名称","name":"container","type":3},{"desc":"是否单例:1：是；0 ： 否 ；-1：不限","name":"singleton","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1657593534645}}
++:{"_id":"623d55ce651bad76c8f7cb66","code":"var _reg = Packages.rewin.ubsi.consumer.Context.getRegister();\nvar _key=new Packages.java.util.ArrayList(_reg.keySet());\nvar servicesList=new Packages.java.util.ArrayList();\nfor(var i=0;i<_key.size();i++){\n  var Register=_reg.get(_key.get(i));\n  var Services=Register.Services;\n  var _Services=new Packages.java.util.ArrayList(Services.keySet());\n  for(var j=0;j<_Services.size();j++){\n      var ser=_Services.get(j);\n    if(ser == \"\"){\n        continue;\n      }else{\n        servicesList.add(ser);\n      }\n  }\n}\n$.result(servicesList);\n","desc":"获取所有微服务名的数组","name":"admin.container.getServicesNameList","status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1661843783772}}
++:{"_id":"623d7221651bad76c8f7d61e","code":"$.host(host, port)\nvar res =\"\";\nif(status === 0){\n  $.request('', 'setStatus',name,-1);\n  res = $.request('', 'setStatus',name,status);\n}else{\n  res = $.request('', 'setStatus',name,status);\n}\n$.result(res);","name":"admin.container.setStatus","updateTime":{"$t":"long","$v":1648194330513},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"name","type":3,"desc":"微服务名"},{"name":"status","type":2,"desc":"0暂停 1启动"}],"desc":"服务发现-停止/启动微服务","status":0,"tags":["write","xxz"]}
++:{"_id":"623d75dd651bad76c8f7d744","code":"$.host(host, port)\nvar res = $.request('', 'uninstall',name);\n$.result(res);","name":"admin.container.uninstall","updateTime":{"$t":"long","$v":1648195102429},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"name","type":3,"desc":"微服务名/过滤器名"}],"desc":"服务发现-卸载微服务","status":0,"tags":["write","xxz"]}
++:{"_id":"623d8bf5651bad76c8f7df9f","code":"var res = $.request('rewin.ubsi.admin', 'request', target,service,entry,values,types);\n$.result(res);","name":"admin.container.request","updateTime":{"$t":"long","$v":1648202153746},"params":[{"name":"target","type":3,"desc":"格式ip#prot,为null就是路由方式"},{"name":"service","type":3,"desc":"服务名,为空就是默认调用容器"},{"name":"entry","type":3,"desc":"方法名"},{"name":"values","type":3,"desc":"hashmap格式的json字符串"},{"name":"types","type":3,"desc":"参数的类型（接口查询中params里的type),hashmap格式的json字符串"}],"desc":"服务发现-接口查询-Execute","status":0,"tags":["read","xxz"]}
++:{"_id":"62414d60651bad76c8f7e698","code":"$.host(host, port)\nvar res = $.request('', 'getDepend', service);\n$.result(res);\n","name":"admin.container.getDepend","updateTime":{"$t":"long","$v":1648446888376},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"service","type":3,"desc":"微服务名"}],"desc":"服务发现-依赖关系","status":0,"tags":["xxz","read"]}
++:{"_id":"62416096651bad76c8f80998","code":"$.host(host, port)\nvar res = $.request('', 'setDepend',name, json);\n$.result(res);","name":"admin.container.setDepend","updateTime":{"$t":"long","$v":1648451906782},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"name","type":3,"desc":"微服务名"},{"name":"json","type":3,"desc":"json详情配置"}],"desc":"服务发现-依赖关系-设置服务依赖","status":0,"tags":["write","xxz"]}
++:{"_id":"62416976651bad76c8f83571","code":"$.host(host, port)\nvar res = $.request('', 'getConfig',name);\n$.result(res);","desc":"服务发现-参数配置-查询","name":"admin.container.getConfig","params":[{"desc":"主机名","name":"host","type":3},{"desc":"端口号","name":"port","type":2},{"desc":"微服务名","name":"name","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1659927918241}}
++:{"_id":"624172e8651bad76c8f8373b","code":"$.host(host, port)\nvar res = $.request('', 'setConfig',name,json);\n$.result(res); ","desc":"服务发现-配置参数-提交","name":"admin.container.setConfig","params":[{"desc":"主机名","name":"host","type":3},{"desc":"端口号","name":"port","type":2},{"desc":"JSON格式的配置项信息","name":"json","type":3},{"desc":"微服务名","name":"name","type":3}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1658733448305}}
++:{"_id":"62418249651bad76c8f8457a","code":"$.host(host, port)\nvar res = $.request('', 'restart',name);\n$.result(res);","name":"admin.container.restart","updateTime":{"$t":"long","$v":1648460441698},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"},{"name":"name","type":3,"desc":"服务或过滤类名字，null或\"\"表示容器"}],"desc":"重启容器控制器","status":0,"tags":["write","xxz"]}
++:{"_id":"62426ed2651bad76c8f8615b","code":"$.host(host, port)\nvar res = $.request('', 'getLogConfig');\n$.result(res);","name":"admin.container.getLogConfig","updateTime":{"$t":"long","$v":1648520955077},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"端口号"}],"desc":"容器发现-管理及配置-日志配置-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"624271d2651bad76c8f861f4","code":"$.host(host, port)\nvar res = $.request('', 'setLogConfig',json);\n$.result(res);","name":"admin.container.setLogConfig","updateTime":{"$t":"long","$v":1648521757481},"params":[{"name":"host","type":3,"desc":"主机名"},{"name":"port","type":2,"desc":"短裤号"},{"name":"json","type":3,"desc":"Config.Log结构的json字符串"}],"desc":"容器发现-管理及配置-日志配置-提交","status":0,"tags":["write","xxz"]}
++:{"_id":"62429d03651bad76c8f86e8e","code":"var res = $.request('rewin.ubsi.admin', 'getWebAppList', pageSize,currentPage,status,name,tags);\n$.result(res);","desc":"webapp发现-查询列表","name":"admin.webapp.getWebAppList","params":[{"desc":"页面大小","name":"pageSize","type":2},{"desc":"分页数据","name":"currentPage","type":2},{"desc":"WebApp状态 0：正常，1：延迟，2：失效，4：可转发，\"\":总数","name":"status","type":3},{"desc":"URL名称,多个,号隔开,null表示不限","name":"name","type":3},{"desc":"数据项的标签,多个,号隔开,null表示不限","name":"tags","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1660098194458}}
++:{"_id":"6242be6f651bad76c8f87888","code":"var resttemp=new Packages.org.springframework.web.client;\n\n","name":"admin.webapp.getInfo","updateTime":{"$t":"long","$v":1648541592257},"desc":"webapp发现-运行信息","status":0,"tags":["read","xxz"]}
++:{"_id":"6243f3f8651bad76c8f8d358","code":"var key = Packages.rewin.ubsi.consumer.Context.REG_RESTFUL;\nPackages.rewin.ubsi.consumer.Context.delRegister(key, url);\n","desc":"WebApp发现-删除","name":"admin.webapp.delRegister","params":[{"desc":"url地址","name":"url","type":3}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1652088510447}}
++:{"_id":"62451e37d2c42816264dbffc","code":"function removeDuplicateWithOrder(list) {\n  var set=new Packages.java.util.HashSet();\n  var newList=new Packages.java.util.ArrayList();\n  var _list=new Packages.java.util.ArrayList(list);\n  var iter=new Packages.java.util.Iterator(_list.iterator());\n  for(iter;iter.hasNext();){\n    if(set.add(iter.next())){\n      newList.add(iter.next());\n    }\n  }\n  _list.clear();\n  _list.addAll(newList);\n  return _list;\n}\n","name":"admin.func.removeDuplicateWithOrder","updateTime":{"$t":"long","$v":1648697328589},"desc":"删除重复元素,保持顺序","status":0,"tags":["func","xxz"]}
++:{"_id":"62568bced2c42816264eaff6","code":"function serviceName() {\n  var map=new Packages.java.util.HashMap();\n  map.put(\"gateway\",\"rewin.ubsi.gateway\");\n  return map;\n}","name":"admin.serviceName","updateTime":{"$t":"long","$v":1649843557211},"desc":"系统微服务名集合","status":0,"tags":["func","xxz"]}
++:{"_id":"6260eb5cd2c4281626537050","code":"var res =$.request('rewin.ubsi.admin', 'getMenu',logintoken, username,domain);\n$.result(res);","name":"admin.container.getMenu","updateTime":{"$t":"long","$v":1650528093195},"params":[{"name":"username","type":3,"desc":"用户名"},{"name":"logintoken","type":3,"desc":"token"},{"name":"domain","type":3,"desc":"数据域"}],"desc":"根据用户名查询左侧菜单栏","status":0,"tags":["read","write"]}
++:{"_id":"6260fb91d2c4281626537894","code":"var  res=$.request('rewin.ubsi.admin', 'login',data,domain);\n$.result(res);","desc":"登录接口","name":"admin.ubsi.login","params":[{"desc":"用户名，密码","name":"data","type":5},{"desc":"数据域","name":"domain","type":3}],"status":0,"tags":["read","write"],"updateTime":{"$t":"long","$v":1656035491647}}
++:{"_id":"626a48889083057ef8b86330","code":"var res = $.request(\"rewin.ubsi.admin\",\"listMonitor\",group,sortby,host,port,status,skip,limit);\n$.result(res);","name":"admin.container.listMonitor","updateTime":{"$t":"long","$v":1651132746607},"params":[{"name":"group","type":3,"desc":"网关所属的分组ID，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"host","type":3,"desc":"主机地址，null表示不限"},{"name":"port","type":3,"desc":"主机端口，null表示不限"},{"name":"status","type":2,"desc":"状态,0不限1运行2未运行3超时"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-网关运行监控-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"626a502d9083057ef8b86643","code":"var res = $.request(\"rewin.ubsi.admin\",\"getRandom\");\n$.result(res);","desc":"获取验证码","name":"admin.container.getRandom","status":0,"tags":["read","write"],"updateTime":{"$t":"long","$v":1658476222668}}
++:{"_id":"62df5b29adde457b24627824","code":"var res = $.request('rewin.ubsi.admin', 'queryService', service,Version,continerName);\n//$.info('res::::'+res)\n$.result(res);","desc":"运行监控-服务发现-参数配置-查询","name":"admin.container.queryService","params":[{"desc":"服务名","name":"service","type":3},{"desc":"版本号","name":"Version","type":2},{"desc":"容器名称","name":"continerName","type":3}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1662442154441}}
++:{"_id":"62e8da6cbd649510c7ab77ae","code":"var res = $.request('rewin.ubsi.admin', 'getAccessGetWay', $._long(time));\n$.result(res);","desc":"网关管理-网关运行监控-访问量详情图","name":"admin.gateway.getAccessGetWay","params":[{"desc":"取时间戳之后的数据","name":"time","type":2}],"status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1659427496989}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"625fb548d2c4281626535586","code":"var res = $.request(\"rewin.common.approval\", \"listTarget\",id,name,sortby,skip,limit);\n$.result(res);","desc":"审批管理-查询审批对象列表","name":"approval.admin.listTarget","params":[{"desc":"审批对象类型ID(模糊查询)，null表示不限","name":"id","type":3},{"desc":"审批对象类型名字(模糊查询)，null表示不限","name":"name","type":3},{"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]","name":"sortby","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1652419268870}}
++:{"_id":"625fb7c2d2c42816265355de","code":"var _props= props == null ? new Packages.java.util.ArrayList() : new Packages.java.util.ArrayList(props);\nvar res = $.request(\"rewin.common.approval\", \"setTarget\",id,name,desc,_props,timeout,event);\n$.result(res);","name":"approval.admin.setTarget","updateTime":{"$t":"long","$v":1650440421815},"params":[{"name":"id","type":3,"desc":"对象类型ID"},{"name":"name","type":3,"desc":"对象类型名字"},{"name":"desc","type":3,"desc":"对象类型说明"},{"name":"props","type":4,"desc":"对象属性(DB.Property)列表"},{"name":"timeout","type":2,"desc":"审批超时时间限制（分钟数），0:不限"},{"name":"event","type":3,"desc":"审批结束后发出事件的频道"}],"desc":"审批管理-新增审批对象","status":0,"tags":["write","xxz"]}
++:{"_id":"625fba74d2c4281626535618","code":"var res =$.request(\"rewin.common.approval\", \"delTarget\",id);\n$.result(res);","name":"approval.admin.delTarget","updateTime":{"$t":"long","$v":1650440871066},"params":[{"name":"id","type":3,"desc":"对象类型ID"}],"desc":"审批管理-删除审批对象类型","status":0,"tags":["write","xxz"]}
++:{"_id":"625fbcb6d2c4281626535693","code":"var res =$.request(\"rewin.common.approval\", \"delRule\",id);\n$.result(res);","name":"approval.admin.delRule","updateTime":{"$t":"long","$v":1650441445215},"params":[{"name":"id","type":3,"desc":"规则Id"}],"desc":"审批管理-删除审批规则","status":0,"tags":["write","xxz"]}
++:{"_id":"625fbe2ad2c42816265356ff","code":"var reslist =$.request(\"rewin.ubsi.admin\", \"listRule\",name,target,parent,status,sortby,skip,limit);\n//var list=new Packages.java.util.ArrayList(reslist[1]);\n$.result(reslist);","desc":"审批管理-查询审批规则","include":[],"name":"approval.admin.listRule","params":[{"desc":"规则名字(模糊查询)，null表示不限","name":"name","type":3},{"desc":"审批对象类型ID，null表示不限","name":"target","type":3},{"desc":"父规则ID，null表示不限，\"\"表示null","name":"parent","type":3},{"desc":"状态，null表示不限，0:正常，xx:不正常","name":"status","type":2},{"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]","name":"sortby","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1654572957372}}
++:{"_id":"6260ba52d2c4281626535c0b","code":"var _status= status == null ? null : new Packages.java.util.HashSet(status);\nvar res = $.request(\"rewin.common.approval\", \"listProcess\",target,user,actor,toUser,toRoles,_status,sortby,skip,limit);\n$.result(res);","desc":"审批管理-查询审批流程","name":"approval.admin.listProcess","params":[{"desc":"审批对象类型ID，null表示不限","name":"target","type":3},{"desc":"发起人ID，null表示不限","name":"user","type":3},{"desc":"参与的审批人ID，null表示不限","name":"actor","type":3},{"desc":"待审批人的用户ID，与toRoles是\"或\"关系，null表示不限","name":"toUser","type":3},{"desc":"待审批人的角色ID，与toUser是\"或\"关系，null表示不限","name":"toRoles","type":4},{"desc":"审批状态，0:还未结束，1:通过，-1:不通过，-2:终止，null表示不限","name":"status","type":4},{"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]","name":"sortby","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1661392147853}}
++:{"_id":"6260be5fd2c4281626535c7e","code":"var _rules = rules == null ? null : new Packages.java.util.HashMap(rules);\nvar _roles = roles == null ? null : new Packages.java.util.ArrayList(roles);\nvar _users = users == null ? null : new Packages.java.util.ArrayList(users);\nvar res = $.request(\"rewin.common.approval\", \"addRule\",name,desc,target,parent,_rules,_roles,_users,helper);\n$.result(res);","desc":"审批管理-新增审批规则","name":"approval.admin.addRule","params":[{"desc":"规则名字","name":"name","type":3},{"desc":"规则说明","name":"desc","type":3},{"desc":"对象类型ID","name":"target","type":3},{"desc":"父规则ID，可以为null","name":"parent","type":3},{"desc":"匹配规则，类mongodb的查询语法，\"key\"可以为对象属性|#and|#or(与/或关系，\"value\"必须是一个List)|#not(非)|#r0(发起人的角色)|#r1(上次审批人的角色)|#u0(表示发起人的用户ID)|#u1(表示上次审批人的用户ID)，支持#eq|#ne|#gt|#gte|#lt|#lte|#in|#nin|#like(正则表达式)等作为运算符，多个\"key\"之间是and关系","name":"rules","type":5},{"desc":"审批人的角色ID，如果是以#开头，则表示替代：#r0表示发起人的角色，#r1表示上次审批人的角色，后面可以跟常量字符串，比如#r0.admin；如果是空List，表示直接打回；如果为null表示直接通过","name":"roles","type":4},{"desc":"审批人的用户ID，如果非null，则忽略roles；如果是空List，表示直接打回","name":"users","type":4},{"desc":"用于辅助生成交互界面的数据","name":"helper","type":0}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1652946648383}}
++:{"_id":"6260c18ed2c4281626535ce9","code":"var res = $.request(\"rewin.common.approval\", \"setRuleStatus\",id,status);\n$.result(res);","name":"approval.admin.setRuleStatus","updateTime":{"$t":"long","$v":1650508292590},"params":[{"name":"id","type":3,"desc":"规则ID"},{"name":"status","type":2,"desc":"状态，0:正常，xx:不可用"}],"desc":"审批管理-修改审批规则状态","status":0,"tags":["write","xxz"]}
++:{"_id":"6260c535d2c4281626535ead","code":"var _rules = rules == null ? null : new Packages.java.util.HashMap(rules);\nvar _roles = roles == null ? null : new Packages.java.util.ArrayList(roles);\nvar _users = users == null ? null : new Packages.java.util.ArrayList(users);\nvar res = $.request(\"rewin.common.approval\", \"setRule\",id,name,desc,status,_rules,_roles,_users,helper);\n$.result(res);","name":"approval.admin.setRule","updateTime":{"$t":"long","$v":1650509374285},"params":[{"name":"id","type":3,"desc":"规则ID"},{"name":"name","type":3,"desc":"规则名字"},{"name":"desc","type":3,"desc":"规则说明"},{"name":"status","type":2,"desc":"状态，0:正常，xx:不可用"},{"name":"rules","type":5,"desc":"匹配规则，类mongodb的查询语法，\"key\"可以为对象属性|#and|#or(与/或关系，\"value\"必须是一个List)|#not(非)|#r0(发起人的角色)|#r1(上次审批人的角色)|#u0(表示发起人的用户ID)|#u1(表示上次审批人的用户ID)，支持#eq|#ne|#gt|#gte|#lt|#lte|#in|#nin|#like(正则表达式)等作为运算符，多个\"key\"之间是and关系"},{"name":"roles","type":4,"desc":"审批人的角色ID，如果是以#开头，则表示替代：#r0表示发起人的角色，#r1表示上次审批人的角色，后面可以跟常量字符串，比如#r0.admin；如果是空List，表示直接打回；如果为null表示直接通过"},{"name":"users","type":4,"desc":"审批人的用户ID，如果非null，则忽略roles；如果是空List，表示直接打回"},{"name":"helper","type":0,"desc":"用于辅助生成交互界面的数据"}],"desc":"审批管理-修改审批规则","status":0,"tags":["write","xxz"]}
++:{"_id":"627b4bcbea9ed2234822975f","code":"var res = $.request(\"rewin.common.approval\", \"listAction\",process,user,sortby,skip,limit);\n$.result(res);","desc":"查询审批动作","name":"approval.admin.listAction","params":[{"desc":"规则流程ID，null表示不限","name":"process","type":3},{"desc":"审批人ID，null表示不限","name":"user","type":3},{"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]","name":"sortby","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1654511158548}}
++:{"_id":"627c76fc7c4a552fc242fac7","code":"var res = $.request(\"rewin.common.approval\", \"dealStart\",target,props,user,roles,comment,$._long(limitTime));\n$.result(res);","desc":"开始一个审批流程","name":"approval.admin.dealStart","params":[{"desc":"审批对象类型ID","name":"target","type":3},{"desc":"审批对象属性","name":"props","type":5},{"desc":"发起人ID","name":"user","type":3},{"desc":"发起人的角色","name":"roles","type":4},{"desc":"申请说明","name":"comment","type":3},{"desc":"截止时间，0:不限，<0表示延用target的设置","name":"limitTime","type":2}],"status":0,"tags":["write","cxx"],"updateTime":{"$t":"long","$v":1652408921820}}
++:{"_id":"62820ad17c4a552fc244c67a","code":"$.info(process);\n$.info(user);\n$.info(roles);\n$.info(opinion);\n$.info(moveUsers);\n$.info(action);\nvar _rolesList = roles == null ? new Packages.java.util.ArrayList() : roles;\nvar _moveUsers = moveUsers == null ? new Packages.java.util.ArrayList() : moveUsers;\n\nvar res = $.request(\"rewin.common.approval\", \"dealAction\",process,user,_rolesList,action,opinion,moveUsers);\n$.result(res);","desc":"处理一个审批动作","name":"approval.admin.dealAction","params":[{"desc":"审批流程ID","name":"process","type":3},{"desc":"审批人ID","name":"user","type":3},{"desc":"审批人的角色","name":"roles","type":4},{"desc":"审批意见","name":"opinion","type":3},{"desc":"转移到的用户ID","name":"moveUsers","type":4},{"desc":"动作，0:转移，1:通过，-1:不通过","name":"action","type":2}],"status":0,"tags":["write","cxx"],"updateTime":{"$t":"long","$v":1654076129483}}
++:{"_id":"628edc2781740647791a5f6b","code":"var res = $.request(\"rewin.common.approval\", \"getProcess\",id);\n$.result(res);","desc":"根据id查询审批流程","name":"approval.admin.getProcess","params":[{"desc":"审批流程id","name":"id","type":3}],"result":"结果类型：java.util.Map ，结果描述：审批流程(DB.Process)","status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1653530011547}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"62aa8b583df8c949585643ff","code":"var _startTime = startTime == null?null:$._long(startTime);\nvar _endTime = endTime == null?null:$._long(endTime);\nvar _status = status == null?null:status;\nvar res = $.request(\"rewin.common.auditlog\",\"listAuditLog\",domain,name,ip,mac,_startTime,_endTime,type,_status,sessionId,skip,limit);\n$.result(res);","desc":"审计日志列表","name":"auditlog.admin.listAuditLog","params":[{"desc":"数据域","name":"domain","type":3},{"desc":"用户名，支持模糊查询","name":"name","type":3},{"desc":"ip地址","name":"ip","type":3},{"desc":"mac地址","name":"mac","type":3},{"desc":"操作开始时间，时间戳","name":"startTime","type":3},{"desc":"操作结束时间，时间戳","name":"endTime","type":3},{"desc":"操作类型：登入、登出、新增、修改、删除等","name":"type","type":3},{"desc":"登录状态：成功 0、失败 -1","name":"status","type":2},{"desc":"登录id","name":"sessionId","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1657071136132}}
++:{"_id":"62aaffc9a558ed6f38360d71","code":"var _operationTime = operationTime == null?null:$._long(operationTime);\n\nvar _status = status == null?null:status;\n\nvar res = $.request(\"rewin.common.auditlog\",\"addAuditLog\",domain,name,ip,mac,_operationTime,type,_status,failMsg,module,before,after,sessionId);\n//$.info('res====================:'+res);\n$.result(res);","desc":"增加审计日志","name":"auditlog.admin.addAuditLog","params":[{"desc":"数据域","name":"domain","type":3},{"desc":"用户名","name":"name","type":3},{"desc":"IP地址","name":"ip","type":3},{"desc":"mac地址","name":"mac","type":3},{"desc":"操作时间","name":"operationTime","type":2},{"desc":"操作类型：登入、登出、新增、修改、删除等","name":"type","type":3},{"desc":"登录状态：成功 0、失败 -1 int","name":"status","type":2},{"desc":"登录失败原因","name":"failMsg","type":3},{"desc":"操作模块：需要记录操作日志的功能模块名称","name":"module","type":3},{"desc":"修改前数据：新增操作为空","name":"before","type":5},{"desc":"修改后数据：删除操作为空","name":"after","type":5},{"desc":"sessionId","name":"sessionId","type":3}],"status":0,"tags":["write","cxx"],"updateTime":{"$t":"long","$v":1656492225252}}
++:{"_id":"62ac2fa5a558ed6f3836c7fa","code":"var _operationTime = operationTime == null?null:$._long(operationTime);\n\nvar _status = status == null?null:status;\n\nvar res = $.request(\"rewin.common.auditlog\",\"checkAuditLogHash\",_id,domain,name,ip,mac,_operationTime,type,_status,failMsg,module,before,after,sessionId);\n$.result(res);","desc":"校验数据库hash值","name":"auditlog.admin.checkAuditLogHash","params":[{"desc":"id","name":"_id","type":3},{"desc":"数据域","name":"domain","type":3},{"desc":"用户名","name":"name","type":3},{"desc":"IP地址","name":"ip","type":3},{"desc":"mac地址","name":"mac","type":3},{"desc":"操作时间","name":"operationTime","type":2},{"desc":"操作类型：登入、登出、新增、修改、删除等","name":"type","type":3},{"desc":"登录状态：成功 0、失败 -1 int","name":"status","type":2},{"desc":"登录失败原因","name":"failMsg","type":3},{"desc":"操作模块：需要记录操作日志的功能模块名称","name":"module","type":3},{"desc":"修改前数据：新增操作为空","name":"before","type":3},{"desc":"修改后数据：删除操作为空","name":"after","type":3},{"desc":"sessionId","name":"sessionId","type":3}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1655457736042}}
++:{"_id":"62bea8fae10a140236c3c257","code":"var _startTime = startTime == null?null:$._long(startTime);\nvar _endTime = endTime == null?null:$._long(endTime);\nvar _status = status == null?null:status;\n$.info('_startTime=======:'+_startTime);\n$.info('_endTime=======:'+_endTime);\nvar res = $.request(\"rewin.common.auditlog\",\"aggregate\",domain,name,ip,mac,sessionId,type,_status,_startTime,_endTime);\n$.result(res);","desc":"聚合统计查询","name":"auditlog.admin.aggregate","params":[{"desc":"数据域","name":"domain","type":3},{"desc":"用户名","name":"name","type":3},{"desc":"IP地址","name":"ip","type":3},{"desc":"mac地址","name":"mac","type":3},{"desc":"操作类型：登入、登出、新增、修改、删除等","name":"type","type":3},{"desc":"登录状态：成功 0、失败 -1 int","name":"status","type":2},{"desc":"sessionId","name":"sessionId","type":3},{"desc":"操作开始时间","name":"startTime","type":2},{"desc":"操作结束时间","name":"endTime","type":2}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1656989060606}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"62171ddeb16629425258591e","code":"var res = $.request('rewin.user.auth', 'getConfig', domain);\n$.result(res);","desc":"获得业务配置参数","include":[],"name":"auth.admin.getConfig","params":[{"desc":"\"数据域\" 或 \"应用\"","name":"domain","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1658735995176}}
++:{"_id":"621734ebb1662942525864e7","code":"/* config的属性说明：\n {\n  \"authTimeoutLast\": \"int, 上次验证的最小时间间隔（秒），0:不限\",\n\t\t\"nameUnique\": \"boolean, 用户名字是否可以重复\",\n\t\t\"passMinDigital\": \"int, 密码中数字的最小数量\",\n\t\t\"authTimeoutOK\": \"int, 上次成功验证的最大时间间隔（天），0:不限\",\n\t\t\"passMinLen\": \"int, 密码的最小长度\",\n\t\t\"passMinSpecial\": \"int, 密码中特殊字符的最小数量\",\n\t\t\"passAllow\": \"java.lang.String, 密码中允许的特殊字符，null表示不限\",\n\t\t\"passMinLower\": \"int, 密码中小写字母的最小数量\",\n\t\t\"nameIllegal\": \"java.lang.String, 用户名字不能包含的字符\",\n\t\t\"passMinUpper\": \"int, 密码中大写字母的最小数量\",\n\t\t\"authMaxFail\": \"int, 连续认证失败的最大次数，0:不限\",\n\t\t\"passTimeout\": \"int, 密码修改的最大时间间隔（天），0:不限\"\n }\n*/\n$.request('rewin.user.auth','setConfig',config,domain);","name":"auth.admin.setConfig","updateTime":{"$t":"long","$v":1648030639263},"params":[{"name":"config","type":5,"desc":"业务配置参数"},{"name":"domain","type":3,"desc":"\"数据域\" 或 \"应用\""}],"desc":"修改业务配置参数","status":0,"tags":["write","xxz"]}
++:{"_id":"621c6552c11bf37ca0449a3b","result":"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","code":"var res = $.request('rewin.user.auth', 'checkPassword', password,domain);\n$.result(res);\n","name":"auth.admin.checkPassword","updateTime":{"$t":"long","$v":1648030627874},"params":[{"name":"password","type":3,"desc":"用户密码"},{"name":"domain","type":3,"desc":"用户所属的 \"数据域\" 或 \"应用\""}],"desc":"检查用户密码合法性","status":0,"tags":["read","xxz"]}
++:{"_id":"62314e33c11bf37ca05c461e","code":"  var _key=$._bytes([2,0,2,0,0,5,2,6,1,4,1,2,3,4,5,6])\n \n  var newPasswordhash= Packages.org.bouncycastle.util.encoders.Hex.decode(newPass);\n\n  var oldPasswordhash= oldPass==null?null:Packages.org.bouncycastle.util.encoders.Hex.decode(oldPass);\n  var oldPassword=oldPasswordhash == null?null:Packages.rewin.ubsi.common.Crypto.sm4EncryptEcb(oldPasswordhash, _key);\n  var oldmm = oldPassword==null?null:Packages.rewin.ubsi.common.Crypto.sm3Digest(oldPassword);\n$.info('oldmm======；'+oldmm);\n  var res = $.request(\"rewin.user.auth\",\"setPassword\",userId,oldmm,newPasswordhash,_key);\n  $.result(res);","desc":"系统管理-用户管理-密码重置","name":"auth.admin.setPassword","params":[{"desc":"用户ID","name":"userId","type":3},{"desc":"新密码的SM3散列值","name":"newPass","type":3},{"desc":"原密码的SM3散列值用key进行SM4加密/散列后的数据，null表示不做比对(仅限管理员重置用户密码时使用)","name":"oldPass","type":3}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1658389234587}}
++:{"_id":"62317b20c11bf37ca05c4d4c","code":"\n  var newPasswordhash= Packages.org.bouncycastle.util.encoders.Hex.decode(password);\n  var _user =new Packages.java.util.HashMap(user);\n  _user.put(\"password\",newPasswordhash);\n  var res = $.request(\"rewin.user.auth\",\"addUser\",_user);\n  $.result(res);\n","name":"auth.admin.addUser","updateTime":{"$t":"long","$v":1648030623137},"params":[{"name":"user","type":5,"desc":"用户属性（包含预定义和自定义的扩展属性）"},{"name":"password","type":3,"desc":"用户密码sm3加密"}],"desc":"系统管理-用户管理-增加用户","status":0,"tags":["write","xxz"]}
++:{"_id":"62319481c11bf37ca05c5b50","code":"\n  var res = $.request(\"rewin.user.auth\",\"setUser\",userId,props);\n  $.result(res);\n","desc":"系统管理-用户管理-修改用户信息","name":"auth.admin.setUser","params":[{"desc":"用户ID","name":"userId","type":3},{"desc":"用户属性（包含预定义和自定义的扩展属性）不能修改domain/xxxTime/password/passTime/authTimeXXX","name":"props","type":5}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1652771856099}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"61537c52256a466f2e2f3247","code":"$.request('rewin.ubsi.eventflow', 'setEvent', id,desc,data,domain);","name":"eventflow.admin.setEvent","updateTime":{"$t":"long","$v":1648087737683},"params":[{"name":"id","type":3,"desc":"事件id"},{"name":"desc","type":3,"desc":"事件描述"},{"name":"data","type":3,"desc":"事件数据说明"},{"name":"domain","type":3,"desc":"事件所属数据域"}],"desc":"新增/修改事件定义","status":0,"tags":["write","cxx"]}
++:{"_id":"615380d8256a466f2e2f34a2","code":"Packages.rewin.ubsi.common.JedisUtil.clearEvent(id);\n$.request('rewin.ubsi.eventflow', 'delEvent', id);","name":"eventflow.admin.delEvent","updateTime":{"$t":"long","$v":1648087691427},"params":[{"name":"id","type":3,"desc":"事件id"}],"desc":"删除事件定义","status":0,"tags":["write","cxx"]}
++:{"_id":"6153830a256a466f2e2f35bd","result":"结果类型：java.lang.Object[] ，结果描述：格式：[ 总数量(long), 事件定义(DB.Event)的列表(List<Map>) ]\n[\n\t2,\n\t[{\n\t\t\"data\":  事件数据说明\",\n\t\t\"domain\": 事件所属的数据域\",\n\t\t\"_id\": 事件标识\",\n\t\t\"desc\":  事件描述\"\n\t},{\n\t\t\"data\":  事件数据说明\",\n\t\t\"domain\": 事件所属的数据域\",\n\t\t\"_id\": 事件标识\",\n\t\t\"desc\":  事件描述\"\n\t},]\n]","code":"var res = $.request('rewin.ubsi.eventflow','listEvent',id, domain,sortby, skip, limit);\n$.result(res);\n","name":"eventflow.admin.listEvent","updateTime":{"$t":"long","$v":1648087724782},"params":[{"name":"id","type":3,"desc":"事件ID(模糊查询)，null表示不限"},{"name":"domain","type":3,"desc":"事件所属的数据域，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"查询事件定义","status":0,"tags":["read","cxx"]}
++:{"_id":"6153872f256a466f2e2f37f7","include":[],"code":"$.request('rewin.ubsi.eventflow', 'addFlow', name,desc,domain,status);","name":"eventflow.admin.addFlow","updateTime":{"$t":"long","$v":1648087685970},"params":[{"name":"name","type":3,"desc":"流程名字"},{"name":"desc","type":3,"desc":"流程说明"},{"name":"domain","type":3,"desc":"流程所属的数据域"},{"name":"status","type":2,"desc":"流程状态"}],"desc":"新增流程定义","status":0,"tags":["write","cxx"]}
++:{"_id":"615391a6256a466f2e2f3c4b","code":"$.request('rewin.ubsi.eventflow', 'delFlow', flow);","name":"eventflow.admin.delFlow","updateTime":{"$t":"long","$v":1648087696463},"params":[{"name":"flow","type":3,"desc":"流程ID"}],"desc":"删除流程定义","status":0,"tags":["write","cxx"]}
++:{"_id":"61539267256a466f2e2f3ca1","code":"$.request('rewin.ubsi.eventflow', 'setFlow', flow,name,desc,domain,status);","name":"eventflow.admin.setFlow","updateTime":{"$t":"long","$v":1648087743400},"params":[{"name":"flow","type":3,"desc":"流程ID"},{"name":"name","type":3,"desc":"流程名字，null不表示不修改"},{"name":"desc","type":3,"desc":"流程说明，null不表示不修改"},{"name":"domain","type":3,"desc":"流程所属的数据域，null不表示不修改"},{"name":"status","type":2,"desc":"流程状态，null不表示不修改"}],"desc":"修改流程定义","status":0,"tags":["write","cxx"]}
++:{"_id":"6153a9aa256a466f2e2f43df","result":"结果类型：java.lang.Object[] ，结果描述：格式：[ 总数量(long), 流程定义(DB.Flow)的列表(List<Map>) ]\n[\n\t1,\n\t[\n\t\t{\n\t\t\t\"statusTime\": 1631521218403,\n\t\t\t\"name\": \"流程1\",\n\t\t\t\"updateTime\": 1631521218493,\n\t\t\t\"_id\": \"613f09c23edf924e3626df2e\",\n\t\t\t\"events\": [\n\t\t\t\t\"EVENT-S\"\n\t\t\t],\n\t\t\t\"desc\": \"\",\n\t\t\t\"status\": 0\n\t\t}\n\t]\n]","code":"var res = $.request('rewin.ubsi.eventflow','listFlow',name, event,domain,status,sortby, skip, limit);\n$.result(res);\n","name":"eventflow.admin.listFlow","updateTime":{"$t":"long","$v":1648087728984},"params":[{"name":"name","type":3,"desc":"流程名字(模糊查询)，null表示不限"},{"name":"event","type":3,"desc":"响应事件(模糊查询)，null表示不限"},{"name":"domain","type":3,"desc":"流程所属的数据域，null表示不限"},{"name":"status","type":2,"desc":"状态，0:未结束，x:已结束，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"查询流程定义","status":0,"tags":["read","cxx"]}
++:{"_id":"615a13f8256a466f2e2fa8a4","result":"格式：[ 流程节点(DB.Node)的列表(List<Map>), 流程连线(DB.Line)的列表(List<Map>) ]\n\n\t\"rewin.service.ubsi.eventflow.DB$Node: 流程节点定义\": {\n\t\t\"duration\": \"int, 轮询的时间间隔，秒数，只针对'轮询等待'节点\",\n\t\t\"code\": \"java.lang.String, 节点执行的代码，对于'开始/事件/轮询'节点，代码返回false表示不能向后执行\",\n\t\t\"_id\": \"java.lang.String, 节点ID，自动生成\",\n\t\t\"draw\": \"java.util.List<java.lang.Double>, 位置及尺寸，[ x, y, width, height ]\",\n\t\t\"title\": \"java.lang.String, 节点的标题\",\n\t\t\"type\": \"int, 节点类型，0:开始，-1:结束，1:自动处理，2:人工处理，3:事件等待，4:轮询等待/合并\",\n\t\t\"event\": \"java.lang.String, 节点触发的事件，只针对'开始/事件等待'节点\",\n\t\t\"flow\": \"java.lang.String, 所属的流程ID\",\n\t\t\"desc\": \"java.lang.String, 节点的描述\"\n\t},\n\t\"rewin.service.ubsi.eventflow.DB$Line: 流程连线定义\": {\n\t\t\"fromNode\": \"java.lang.String, 前置节点ID\",\n\t\t\"fromAnchor\": \"int, 前置节点的锚点，0:left，1:top，2:right，3:bottom\",\n\t\t\"toAnchor\": \"int, 后置节点的锚点，0:left，1:top，2:right，3:bottom\",\n\t\t\"code\": \"java.lang.String, 分支连线的判断条件，代码返回false表示不能向后执行\",\n\t\t\"_id\": \"java.lang.String, 连线ID，自动生成\",\n\t\t\"title\": \"java.lang.String, 连线的标题\",\n\t\t\"type\": \"int, 连线类型，0:直连，1:拐角\",\n\t\t\"flow\": \"java.lang.String, 所属的流程ID\",\n\t\t\"toNode\": \"java.lang.String, 后置节点ID\"\n\t\t\"draw\": \"java.util.List<java.lang.Double>, 文字锚点（中心点距离连线锚点的位移），[ offset_x, offset_y ]\",\n\t}","code":"var res = $.request('rewin.ubsi.eventflow', 'getFlowDiagram', flow);\n$.result(res);","name":"eventflow.admin.getFlowDiagram","updateTime":{"$t":"long","$v":1648087714987},"params":[{"name":"flow","type":3,"desc":"流程ID"}],"desc":"获得流程图","status":0,"tags":["read","cxx"]}
++:{"_id":"615bbd4b256a466f2e2fde8e","result":"结果类型：java.lang.Object[] ，结果描述：格式：[ 总数量(long), 流程执行实例(DB.Process)的列表(List<Map>) ]\n[\n\t2,\n\t[\n\t\t{\n\t\t\t\"eventData\": \"start\",\n\t\t\t\"flowData\": {\n\t\t\t\t\"node\": \"over\",\n\t\t\t\t\"count2\": 3,\n\t\t\t\t\"line\": \"B3-over\",\n\t\t\t\t\"count\": 3\n\t\t\t},\n\t\t\t\"startTime\": 1631521415852,\n\t\t\t\"stopTime\": 1631521426908,\n\t\t\t\"_id\": \"613f0a886664bc6de87e0837\",\n\t\t\t\"event\": \"EVENT-S\",\n\t\t\t\"flow\": \"613f09c23edf924e3626df2e\",\n\t\t\t\"status\": 1\n\t\t},\n\t\t{\n\t\t\t\"eventData\": \"start\",\n\t\t\t\"flowData\": {\n\t\t\t\t\"node\": \"B2\",\n\t\t\t\t\"count2\": 3,\n\t\t\t\t\"line\": \"A1-B2\",\n\t\t\t\t\"count\": 3\n\t\t\t},\n\t\t\t\"startTime\": 1631521416786,\n\t\t\t\"stopTime\": 1631521427984,\n\t\t\t\"_id\": \"613f0a886664bc6de87e083b\",\n\t\t\t\"event\": \"EVENT-S\",\n\t\t\t\"flow\": \"613f09c23edf924e3626df2e\",\n\t\t\t\"status\": -1\n\t\t}\n\t]\n]","include":[],"code":"var res = $.request('rewin.ubsi.eventflow','listProcess',flow,event,eventData,status,sortby,skip,limit);\n$.result(res);","name":"eventflow.admin.listProcess","updateTime":{"$t":"long","$v":1648087733267},"params":[{"name":"flow","type":3,"desc":"流程定义的ID，null表示不限"},{"name":"event","type":3,"desc":"响应事件(模糊查询)，null表示不限"},{"name":"eventData","type":5,"desc":"事件数据(mongo语法)，null表示不限"},{"name":"status","type":2,"desc":"状态，0:未结束，x:已结束，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"查询流程执行实例","status":0,"tags":["read","cxx"]}
++:{"_id":"615bbf45256a466f2e2fdf7c","code":"$.request('rewin.ubsi.eventflow','delProcess',process);","desc":"删除流程实例","name":"eventflow.admin.delProcess","params":[{"desc":"流程实例的ID","name":"process","type":3}],"status":0,"tags":["write","cxx"],"updateTime":{"$t":"long","$v":1655697766005}}
++:{"_id":"615bbfe9256a466f2e2fdfdf","code":"$.request('rewin.ubsi.eventflow','setFlowDiagram',flow,node,line);","name":"eventflow.admin.setFlowDiagram","updateTime":{"$t":"long","$v":1648087747695},"params":[{"name":"flow","type":3,"desc":"流程ID"},{"name":"node","type":4,"desc":"流程的节点定义"},{"name":"line","type":4,"desc":"流程的连线定义"}],"desc":"设置流程图","status":0,"tags":["write","cxx"]}
++:{"_id":"615bc0d9256a466f2e2fe059","code":"$.request('rewin.ubsi.eventflow','stopProcess',process);","name":"eventflow.admin.stopProcess","updateTime":{"$t":"long","$v":1648087752939},"params":[{"name":"process","type":3,"desc":"流程实例的ID"}],"desc":"终止流程实例","status":0,"tags":["write","cxx"]}
++:{"_id":"615bc160256a466f2e2fe0a5","code":"var res = $.request('rewin.ubsi.eventflow','getStep',process);\n$.result(res);","name":"eventflow.admin.getStep","updateTime":{"$t":"long","$v":1648087720352},"params":[{"name":"process","type":3,"desc":"流程实例的ID"}],"desc":"查询流程执行步骤","status":0,"tags":["read","cxx"]}
++:{"_id":"61792987c5ecfe25c99ac96f","code":"var res = $.request('rewin.ubsi.eventflow', 'getFlow', ids);\n$.result(res);","name":"eventflow.admin.getFlow","updateTime":{"$t":"long","$v":1648087710526},"params":[{"name":"ids","type":4,"desc":"流程ID的列表"}],"desc":"获得流程定义","status":0,"tags":["read","cxx"]}
++:{"_id":"6188b2afc5ecfe25c99b350c","code":"var res = $.request('rewin.ubsi.eventflow', 'getEvent', id);\n$.result(res);","name":"eventflow.admin.getEvent","updateTime":{"$t":"long","$v":1648087705748},"params":[{"name":"id","type":3,"desc":"事件ID"}],"desc":"获得事件定义","status":0,"tags":["read","cxx"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"62395e33c11bf37ca05ce090","code":"var res = $.request('rewin.ubsi.admin', 'list', app,type,names,tags,status,skip,limit);\n$.result(res);","desc":"运行监控-容器发现-查询容器标签","name":"favor.admin.list","params":[{"desc":"APP的标识,null表示不限","name":"app","type":3},{"desc":"APP自定义的数据项类型,null表示不限","name":"type","type":3},{"desc":"数据项的名字,多个,号隔开,null表示不限","name":"names","type":3},{"desc":"数据项的标签,多个,号隔开,null表示不限","name":"tags","type":3},{"desc":"指定的status,多个,号隔开,null表示不限","name":"status","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1659669129406}}
++:{"_id":"6239669bc11bf37ca05ce370","code":"var res = $.request('rewin.common.favor', 'listTags', app,type);\n$.result(res);","name":"favor.admin.listTags","updateTime":{"$t":"long","$v":1648086759548},"params":[{"name":"app","type":3,"desc":"指定的app，null表示不限"},{"name":"type","type":3,"desc":"指定的type，null表示不限"}],"desc":"查询tags的列表","status":0,"tags":["read","xxz"]}
++:{"_id":"6239801cc11bf37ca05ceea7","code":"var _tags= tags == null ? null :new Packages.java.util.HashSet(tags)\nvar res = $.request('rewin.common.favor', 'add', app,type,name,value,_tags,status);\n$.result(res);","name":"favor.admin.add","updateTime":{"$t":"long","$v":1648086750469},"params":[{"name":"app","type":3,"desc":"APP的标识，不能为null"},{"name":"type","type":3,"desc":"APP自定义的数据项类型，不能为null"},{"name":"name","type":3,"desc":"数据项的名字，不能为null"},{"name":"value","type":0,"desc":"数据项的值(UBSI支持的数据类型，不支持BigInteger/BigDecimal/T[])"},{"name":"tags","type":4,"desc":"数据项的标签"},{"name":"status","type":2,"desc":"APP自定义的数据项状态"}],"desc":"运行监控-容器发现-修改标签，添加一条数据项，如果数据项已经存在，则替换","status":0,"tags":["write","xxz"]}
++:{"_id":"62398633c11bf37ca05cf0c6","code":"var _tags= tags == null ? null :new Packages.java.util.HashSet(tags)\nvar res = $.request('rewin.common.favor', 'set', app,type,name,value,_tags,status);\n$.result(res);","name":"favor.admin.set","updateTime":{"$t":"long","$v":1648086764593},"params":[{"name":"app","type":3,"desc":"APP的标识"},{"name":"type","type":3,"desc":"APP自定义的数据项类型"},{"name":"name","type":3,"desc":"数据项的名字"},{"name":"value","type":0,"desc":"数据项的值(UBSI支持的数据类型)，null表示不修改"},{"name":"tags","type":4,"desc":"数据项的标签，null表示不修改"},{"name":"status","type":2,"desc":"APP自定义的数据项状态，null表示不修改"}],"desc":"运行监控-容器发现-修改标签，修改一条数据项","status":0,"tags":["write","xxz"]}
++:{"_id":"62440dff651bad76c8f8d9e6","code":"var _names= names == null ? null :new Packages.java.util.HashSet(names)\nvar res = $.request('rewin.common.favor', 'del', app,type,_names);\n$.result(res);","name":"favor.admin.del","updateTime":{"$t":"long","$v":1648627493256},"params":[{"name":"app","type":3,"desc":"APP的标识，不能为null"},{"name":"type","type":3,"desc":"APP自定义的数据项类型，null表示所有"},{"name":"names","type":0,"desc":"数据项的名字"}],"desc":"手动发现-删除容器/WebApp","status":0,"tags":["write","xxz"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6253d598d2c42816264e64e2","include":["admin.serviceName"],"code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res=$.request(\"rewin.ubsi.gateway\", \"listLog\", group,app,_enabled,sortby,skip,limit);\nvar total=res[0];\nvar _res=res[1];\nif(null!=service){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      var ser=map.get(\"service\").toString();\n      if(service.equals(ser)){\n        $.info(\"ser:\"+ser);\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\n$.info(\"_res1:\"+_res);\nif(null!=entry){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var j=0;j<_res.size();j++){\n      var map = new Packages.java.util.HashMap(_res.get(j));\n      var ent=map.get(\"entry\").toString();\n      if(entry.equals(ent)){\n        list.add(map);\n      }\n    }\n    _res=list;\n    $.info(\"_res2:\"+_res);\n  }  \n}\n$.info(\"length:\"+_res.size());\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);","name":"gateway.admin.listLog","updateTime":{"$t":"long","$v":1649926870603},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"enabled","type":3,"desc":"是否可用，null表示不限"},{"name":"service","type":3,"desc":"服务名字，null不限"},{"name":"entry","type":3,"desc":"方法名字，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"}],"desc":"网管管理-服务访问日志管理-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"6253e713d2c42816264e698e","include":["admin.serviceName"],"code":"var _tags= tags== null ? null : new Packages.java.util.HashSet(tags);\nvar res=$.request(\"rewin.ubsi.gateway\", \"listApps\", name,_tags,status,sortby,skip,limit);\n$.result(res);","name":"gateway.admin.listApps","updateTime":{"$t":"long","$v":1649844718476},"params":[{"name":"name","type":3,"desc":"应用名字(模糊查询)，null表示不限"},{"name":"tags","type":4,"desc":"应用标签，null表示不限"},{"name":"status","type":2,"desc":"应用状态，，0:不限，1:正常，-1:不正常"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网管管理-服务访问日志-应用","status":0,"tags":["read","xxz"]}
++:{"_id":"6253eb33d2c42816264e6a98","include":["admin.serviceName"],"code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInLog\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInLog","updateTime":{"$t":"long","$v":1649844751699},"desc":"网管管理-服务访问日志-网管分组查询","status":0,"tags":["read","xxz"]}
++:{"_id":"6254dd90d2c42816264e700c","include":["admin.serviceName"],"code":"var _reg = Packages.rewin.ubsi.consumer.Context.getRegister();\nvar _key=new Packages.java.util.ArrayList(_reg.keySet());\nvar servicesList=new Packages.java.util.ArrayList();\nfor(var i=0;i<_key.size();i++){\n  $.info(\"key:\"+_key.get(i));\n  var Register=_reg.get(_key.get(i));\n  var Services=Register.Services;\n  var _Services=new Packages.java.util.ArrayList(Services.keySet());\n  $.info(\"_Services:\"+_Services);\n  for(var j=0;j<_Services.size();j++){\n      var ser=_Services.get(j);\n    if(ser == \"\"){\n        continue;\n      }else{\n        if(null!=name){\n          var pattern=Packages.java.util.regex.Pattern.compile(name);\n          $.info(\"pattern:\"+pattern);\n          var matcher = pattern.matcher(ser);\n          if(matcher.find()){\n            servicesList.add(ser);\n          }\n        }else{\n          servicesList.add(ser);\n        }\n        //servicesList.add(ser);\n      }\n  }\n}\nPackages.java.util.Collections.sort(servicesList);\n$.result(servicesList);","name":"gateway.admin.listService","updateTime":{"$t":"long","$v":1649844819551},"params":[{"name":"name","type":3,"desc":"服务名"}],"desc":"网关管理-服务访问日志-获取所有微服务","status":0,"tags":["read","xxz"]}
++:{"_id":"6254e606d2c42816264e7281","include":["admin.container.getEntryFunc"],"code":"var entryres = getServiceEntry(null, null, \"\");\n\nvar servicesList=new Packages.java.util.ArrayList();\nfor(var j=0;j<entryres.size();j++){\n  var entr=entryres.get(j);\n  if(null!=entry){\n    var pattern=Packages.java.util.regex.Pattern.compile(entry);\n    $.info(\"pattern:\"+pattern);\n    var matcher = pattern.matcher(entr);\n    if(matcher.find()){\n      servicesList.add(entr);\n    }\n  }else{\n    servicesList.add(entr);\n  }\n}\nPackages.java.util.Collections.sort(servicesList);\n$.result(servicesList);","name":"gateway.admin.listEntry","updateTime":{"$t":"long","$v":1649844741908},"params":[{"name":"entry","type":3,"desc":"接口名"}],"desc":"网关管理-服务访问日志管理-接口查询","status":0,"tags":["read","xxz"]}
++:{"_id":"6254f9f2d2c42816264e808d","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"listLog\", group,app,null,null,0,0);\nvar total=res[0];\nvar _res=res[1];\nif(null!=service){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      var ser=map.get(\"service\").toString();\n      if(service.equals(ser)){\n        $.info(\"ser:\"+ser);\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\n$.info(\"_res1:\"+_res);\nif(null!=entry){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var j=0;j<_res.size();j++){\n      var map = new Packages.java.util.HashMap(_res.get(j));\n      var ent=map.get(\"entry\").toString();\n      if(entry.equals(ent)){\n        list.add(map);\n      }\n    }\n    _res=list;\n    $.info(\"_res2:\"+_res);\n  }  \n}\n$.info(\"length:\"+_res.size());\nif(id === 0 && _res.size()>0){\n  $.result({\"status\":-1,\"msg\":\"已有相同的配置,请重新设置日志参数!\"});\n}else{\n  var res=$.request(\"rewin.ubsi.gateway\", \"setLog\", id,group,app,service,entry,log,trace,enabled);\n  $.result(res);\n}\n//$.result(res);","name":"gateway.admin.setLog","updateTime":{"$t":"long","$v":1649844835369},"params":[{"name":"id","type":2,"desc":"日志参数的记录ID，0表示新增"},{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"service","type":3,"desc":"服务名字，末尾的\"*\"表示通配符"},{"name":"entry","type":3,"desc":"接口名字，末尾的\"*\"表示通配符"},{"name":"log","type":2,"desc":"是否记录日志，0:不记录，0x01:转发微服务的请求，0x02:转发分流Gateway的请求，0x04:被cache处理的请求，0x08:被mock处理的请求，0x10:被拒绝或发生异常的请求，0x1F00表示按位对应的请求需要记录参数"},{"name":"trace","type":1,"desc":"是否跟踪请求"},{"name":"enabled","type":1,"desc":"本条策略是否可用"}],"desc":"网关管理-服务访问日志-增加任务日志","status":0,"tags":["write","xxz"]}
++:{"_id":"6255095ed2c42816264e88b8","include":["admin.serviceName"],"code":"$.request(\"rewin.ubsi.gateway\", \"delLog\", id);","name":"gateway.admin.delLog","updateTime":{"$t":"long","$v":1649844623626},"params":[{"name":"id","type":3,"desc":"日志参数的记录ID"}],"desc":"网关管理-服务访问日志-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"6255162dd2c42816264e8b4c","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"listLogs\", query,sort,skip,limit);\n$.result(res);","name":"gateway.admin.listLogs","updateTime":{"$t":"long","$v":1649844789500},"params":[{"name":"query","type":5,"desc":"查询条件(MongoDB语法)，可以为null"},{"name":"sort","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的记录数"},{"name":"limit","type":2,"desc":"返回的记录数，0表示不限"}],"desc":"任务调度-服务访问日志-日志明细查询日志","status":0,"tags":["read","xxz"]}
++:{"_id":"62551e9dd2c42816264e8cfc","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"getAppTags\");\n$.result(res);","name":"gateway.admin.getAppTags","updateTime":{"$t":"long","$v":1649844710845},"desc":"网关管理-应用管理-查询应用内所有标签","status":0,"tags":["read","xxz"]}
++:{"_id":"6255209ed2c42816264e90b2","include":["admin.serviceName"],"code":"//Base64.getDecoder().decode(password);\nvar _key= Packages.java.util.Base64.getDecoder().decode(key);\n$.info(\"_key:\"+_key)\nvar _app=new Packages.java.util.HashMap(app);\n_app.put(\"key\",_key);\nvar res=$.request(\"rewin.ubsi.gateway\", \"regApp\", _app);\n$.result(res);","name":"gateway.admin.regApp","updateTime":{"$t":"long","$v":1649844824671},"params":[{"name":"app","type":5,"desc":"应用的属性(DB.App)"},{"name":"key","type":3,"desc":"Base64加密"}],"desc":"网关管理-应该管理-注册应用","status":0,"tags":["write","xxz"]}
++:{"_id":"625536cdd2c42816264e93e4","include":["admin.serviceName"],"code":"var res = $.request(\"rewin.ubsi.gateway\", \"unregApp\", id);","name":"gateway.admin.unregApp","updateTime":{"$t":"long","$v":1649844867566},"params":[{"name":"id","type":3,"desc":"应用ID"}],"desc":"网关管理-应用管理-删除应用","status":0,"tags":["write","xxz"]}
++:{"_id":"62553c96d2c42816264e947a","include":["admin.serviceName"],"code":"var _key= Packages.java.util.Base64.getDecoder().decode(key);\n$.info(\"_key:\"+_key)\nvar _app=new Packages.java.util.HashMap(app);\n_app.put(\"key\",_key);\nvar res=$.request(\"rewin.ubsi.gateway\", \"setApp\", id,_app);\n$.result(res);","name":"gateway.admin.setApp","updateTime":{"$t":"long","$v":1649844830351},"params":[{"name":"id","type":3,"desc":"应用ID"},{"name":"app","type":5,"desc":"应用的属性"},{"name":"key","type":3,"desc":"Base64加密"}],"desc":"网关管理-应用管理-详情修改","status":0,"tags":["write","xxz"]}
++:{"_id":"6256346fd2c42816264e9bbb","include":["admin.serviceName"],"code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res = $.request(\"rewin.ubsi.gateway\", \"listRAcl\", group,remote,app,_enabled,sortby,skip,limit);\n//$.result(res);\nvar total=res[0];\nvar _res=res[1];\nif(null!=auth){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      if(auth == map.get(\"auth\")){\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);","name":"gateway.admin.listRAcl","updateTime":{"$t":"long","$v":1649844797318},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"remote","type":3,"desc":"远程主机的地址，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"enabled","type":3,"desc":"是否可用，null表示不限"},{"name":"auth","type":1,"desc":"访问许可，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-远程主机管理-列表查询","status":0,"tags":["read","xxz"]}
++:{"_id":"62565cd3d2c42816264ea076","include":["admin.serviceName"],"code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInRAcl\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInRAcl","updateTime":{"$t":"long","$v":1649844760736},"desc":"网关管理-远程主机-查询网关分组group","status":0,"tags":["read","xxz"]}
++:{"_id":"62565deed2c42816264ea0b6","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"delRAcl\", id);","name":"gateway.admin.delRAcl","updateTime":{"$t":"long","$v":1649844688758},"params":[{"name":"id","type":3,"desc":"访问权限的记录ID"}],"desc":"网关管理-远程主机管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"62565f3fd2c42816264ea0e3","include":["admin.serviceName"],"code":"var _apps= apps == null ? null : new Packages.java.util.HashSet(apps);\nvar res = $.request(\"rewin.ubsi.gateway\", \"setRAcl\", id,group,remote,_apps,auth,enabled);\n\n\n","name":"gateway.admin.setRAcl","updateTime":{"$t":"long","$v":1649844848900},"params":[{"name":"id","type":2,"desc":"权限的记录ID，0表示新增"},{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"remote","type":3,"desc":"远程主机的地址，null表示不限"},{"name":"apps","type":4,"desc":"指定的应用，null表示不限"},{"name":"auth","type":1,"desc":"是否运行访问"},{"name":"enabled","type":1,"desc":"本条策略是否可用"}],"desc":"网关管理-远程主机管理-增加远程主机","status":0,"tags":["write","xxz"]}
++:{"_id":"62566d6bd2c42816264ea246","include":["admin.serviceName"],"code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res = $.request(\"rewin.ubsi.gateway\", \"listSAcl\", group,app,_enabled,sortby,skip,limit);\n//$.result(res);\nvar total=res[0];\nvar _res=res[1];\nif(null!=auth){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      if(auth == map.get(\"auth\")){\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);","name":"gateway.admin.listSAcl","updateTime":{"$t":"long","$v":1649920833481},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"enabled","type":3,"desc":"是否可用，null表示不限"},{"name":"auth","type":1,"desc":"访问许可，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-接口访问管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"625670c6d2c42816264ea2a5","include":["admin.serviceName"],"code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInSAcl\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInSAcl","updateTime":{"$t":"long","$v":1649844775229},"desc":"网关管理-接口访问管理-查询应用","status":0,"tags":["read","xxz"]}
++:{"_id":"62567384d2c42816264ea2e0","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"delSAcl\", id);","name":"gateway.admin.delSAcl","updateTime":{"$t":"long","$v":1649844704513},"params":[{"name":"id","type":3,"desc":"访问权限的记录ID"}],"desc":"网关管理-接口访问管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"62567647d2c42816264ea5a5","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"setSAcl\", id,group,app,service,entry,auth,enabled);","name":"gateway.admin.setSAcl","updateTime":{"$t":"long","$v":1649844861420},"params":[{"name":"id","type":2,"desc":"权限的记录ID，0表示新增"},{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"service","type":3,"desc":"服务名字，末尾的\"*\"表示通配符"},{"name":"entry","type":3,"desc":"接口名字，末尾的\"*\"表示通配符"},{"name":"auth","type":1,"desc":"是否允许访问"},{"name":"enabled","type":1,"desc":"本条策略是否可用"}],"desc":"网关管理-接口访问管理-增加接口访问","status":0,"tags":["write","xxz"]}
++:{"_id":"62568186d2c42816264eaca9","include":["admin.serviceName"],"code":"var sermap=serviceName();\nvar SERVICE=sermap.get(\"gateway\");\nvar _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res=$.request(SERVICE, \"listRouter\", group,app,_enabled,sortby,skip,limit);\nvar total=res[0];\nvar _res=res[1];\nif(null!=service){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      var ser=map.get(\"service\").toString();\n      if(service.equals(ser)){\n        $.info(\"ser:\"+ser);\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\nvar lists=new Packages.java.util.ArrayList();\nfor(var k=0;k<_res.size();k++){\n  var _map = new Packages.java.util.HashMap(_res.get(k));\n  if(null!=_map.get(\"verMin\")){\n    var verMin=Packages.rewin.ubsi.common.Util.getVersion(_map.get(\"verMin\"));\n    $.info(\"verMin:\"+verMin);\n    _map.put(\"verMin\",verMin);\n  }\n  if(null!=_map.get(\"verMax\")){\n    var verMax=Packages.rewin.ubsi.common.Util.getVersion(_map.get(\"verMax\"));\n    _map.put(\"verMax\",verMax);\n  }\n  lists.add(_map)\n}\n_res=lists;\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);\n","name":"gateway.admin.listRouter","updateTime":{"$t":"long","$v":1649843863235},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"enabled","type":1,"desc":"是否可用，null表示不限"},{"name":"service","type":3,"desc":"服务名字，*表示通配符"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-路由规则管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"62568517d2c42816264ead20","include":["admin.serviceName"],"code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInRouter\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInRouter","updateTime":{"$t":"long","$v":1649844769380},"desc":"网关管理-路由规则管理-网关查询","status":0,"tags":["read","xxz"]}
++:{"_id":"62568978d2c42816264eaf5f","include":["admin.serviceName"],"code":"var res=$.request(\"rewin.ubsi.gateway\", \"delRouter\", id);","name":"gateway.admin.delRouter","updateTime":{"$t":"long","$v":1649844695367},"params":[{"name":"id","type":2,"desc":"路由设置记录ID"}],"desc":"网关管理-路由规则管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"62568ac8d2c42816264eafea","include":["admin.serviceName"],"code":"var _router=new Packages.java.util.HashMap(router);\n$.info(\"_router:\"+_router);\nvar min=Packages.rewin.ubsi.common.Util.getVersion(verMin);\n$.info(\"min:\"+min);\nvar max=Packages.rewin.ubsi.common.Util.getVersion(verMax);\n_router.put(\"verMin\",min);\n_router.put(\"verMax\",max);\n$.info(\"_router222:\"+_router);\nvar res=$.request(\"rewin.ubsi.gateway\", \"setRouter\", _router);","name":"gateway.admin.setRouter","updateTime":{"$t":"long","$v":1649844854678},"params":[{"name":"router","type":5,"desc":"路由设置的属性，DB.Router，\"_id\"为0表示新增"},{"name":"verMin","type":3,"desc":"最小版本号"},{"name":"verMax","type":3,"desc":"最大版本号"}],"desc":"网关管理-路由规则-增加路由规则","status":0,"tags":["write","xxz"]}
++:{"_id":"62578685d2c42816264ec6e4","code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res=$.request(\"rewin.ubsi.gateway\", \"listRate\", group,app,_enabled,sortby,skip,limit);\nvar total=res[0];\nvar _res=res[1];\nif(null!=service){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      var ser=map.get(\"service\").toString();\n      if(service.equals(ser)){\n        $.info(\"ser:\"+ser);\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);\n","name":"gateway.admin.listRate","updateTime":{"$t":"long","$v":1649904029839},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"enabled","type":1,"desc":"是否可用，null表示不限"},{"name":"service","type":3,"desc":"服务名字，*表示通配符"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-限流规则管理-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"62578b62d2c42816264ec77e","code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInRate\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInRate","updateTime":{"$t":"long","$v":1649904510947},"desc":"网关管理-限流规则管理-应用","status":0,"tags":["read","xxz"]}
++:{"_id":"62578f63d2c42816264ecd27","code":"var res=$.request(\"rewin.ubsi.gateway\", \"delRate\", id);","name":"gateway.admin.delRate","updateTime":{"$t":"long","$v":1649905542440},"params":[{"name":"id","type":2,"desc":"限流设置的记录ID"}],"desc":"网关管理-限流规则管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"6257908ed2c42816264ecd52","code":"var res=$.request(\"rewin.ubsi.gateway\", \"setRate\", rate);","name":"gateway.admin.setRate","updateTime":{"$t":"long","$v":1649906267401},"params":[{"name":"rate","type":5,"desc":"限流设置的属性，DB.Rate，\"_id\"为0表示新增"}],"desc":"网关管理-限流规则管理-增加限流规则","status":0,"tags":["write","xxz"]}
++:{"_id":"6257acf1d2c42816264ed0e4","code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res=$.request(\"rewin.ubsi.gateway\", \"listFlow\", group,app,_enabled,sortby,skip,limit);\nvar total=res[0];\nvar _res=res[1];\nif(null!=service){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var i=0;i<_res.size();i++){\n      var map = new Packages.java.util.HashMap(_res.get(i));\n      var ser=map.get(\"service\").toString();\n      if(service.equals(ser)){\n        $.info(\"ser:\"+ser);\n        list.add(map);\n      }\n    }\n    _res=list;\n  }  \n}\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);\n","name":"gateway.admin.listFlow","updateTime":{"$t":"long","$v":1649920809427},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"enabled","type":3,"desc":"是否可用，null表示不限"},{"name":"service","type":3,"desc":"服务名字，*表示通配符"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-请求转发规则管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"6257affcd2c42816264ed13e","code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInFlow\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInFlow","updateTime":{"$t":"long","$v":1649913875172},"desc":"网关管理-请求转发规则-网关","status":0,"tags":["read","xxz"]}
++:{"_id":"6257b1bfd2c42816264ed3c0","code":"var res=$.request(\"rewin.ubsi.gateway\", \"delFlow\", id);","name":"gateway.admin.delFlow","updateTime":{"$t":"long","$v":1649914335672},"params":[{"name":"id","type":2,"desc":"请求转发记录ID"}],"desc":"网关管理-请求转发规则-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"6257b2a9d2c42816264ed3e2","code":"var res=$.request(\"rewin.ubsi.gateway\", \"setFlow\", flow);","name":"gateway.admin.setFlow","updateTime":{"$t":"long","$v":1649914601034},"params":[{"name":"flow","type":5,"desc":"请求转发的属性，DB.Flow，\"_id\"为0表示新增"}],"desc":"网关管理-请求转发规则管理-增加请求转发规则","status":0,"tags":["write","xxz"]}
++:{"_id":"6257c514d2c42816264ed7a3","code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res=$.request(\"rewin.ubsi.gateway\", \"listMock\", group,app,service,_enabled,sortby,skip,limit);\n$.result(res);","name":"gateway.admin.listMock","updateTime":{"$t":"long","$v":1649920761178},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"service","type":3,"desc":"服务名字，null表示不限"},{"name":"enabled","type":3,"desc":"是否可用，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-服务仿真数据管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"6257c7fcd2c42816264ed7ec","code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInMock\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInMock","updateTime":{"$t":"long","$v":1649920055091},"desc":"网关管理-服务仿真数据管理-网关","status":0,"tags":["read","xxz"]}
++:{"_id":"6257cbf1d2c42816264ed968","code":"var res=$.request(\"rewin.ubsi.gateway\", \"delMock\", id);","name":"gateway.admin.delMock","updateTime":{"$t":"long","$v":1649921034533},"params":[{"name":"id","type":2,"desc":"仿真数据的记录ID"}],"desc":"网关管理-服务仿真数据管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"6257ccfcd2c42816264ed996","code":"var res = $.request(\"rewin.ubsi.gateway\", \"setMock\", id,group,app,service,entry,data,enabled);","name":"gateway.admin.setMock","updateTime":{"$t":"long","$v":1649921449241},"params":[{"name":"id","type":2,"desc":"仿真数据的记录ID，0表示新增"},{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"service","type":3,"desc":"服务名字"},{"name":"entry","type":3,"desc":"接口名字"},{"name":"data","type":0,"desc":"仿真数据"},{"name":"enabled","type":1,"desc":"本条策略是否可用"}],"desc":"网关管理-服务仿真数据管理-增加服务仿真数据","status":0,"tags":["write","xxz"]}
++:{"_id":"6257d9e9d2c42816264edbec","code":"var _enabled= null;\nif(enabled == \"true\"){\n  _enabled=true\n}else if(enabled == \"false\"){\n  _enabled=false\n}\nvar res = $.request(\"rewin.ubsi.gateway\", \"listCache\", group,app,service,_enabled,sortby,skip,limit);\nvar total=res[0];\nvar _res=res[1];\nif(null!=entry){\n  if(total>0){\n    var list=new Packages.java.util.ArrayList();\n    for(var j=0;j<_res.size();j++){\n      var map = new Packages.java.util.HashMap(_res.get(j));\n      var ent=map.get(\"entry\").toString();\n      if(entry.equals(ent)){\n        list.add(map);\n      }\n    }\n    _res=list;\n    $.info(\"_res2:\"+_res);\n  }  \n}\nvar listres=new Packages.java.util.ArrayList();\nlistres.add(_res.size());\nlistres.add(_res);\n$.result(listres);","name":"gateway.admin.listCache","updateTime":{"$t":"long","$v":1649924967332},"params":[{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"service","type":3,"desc":"服务名字，null表示不限"},{"name":"entry","type":3,"desc":"接口名字，null表示不限"},{"name":"enabled","type":3,"desc":"是否可用，null表示不限"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"网关管理-接口缓存规则管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"6257de56d2c42816264edf40","code":"var groupRes=$.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\nvar res=$.request(\"rewin.ubsi.gateway\", \"listGroupInCache\");\nvar _res=new Packages.java.util.HashSet(res);\n_res.addAll(groupRes);\n$.result(_res);","name":"gateway.admin.listGroupInCache","updateTime":{"$t":"long","$v":1649925734068},"desc":"网关管理-接口缓存规则管理-网关","status":0,"tags":["read","xxz"]}
++:{"_id":"6257df9cd2c42816264ee0a8","code":"var res=$.request(\"rewin.ubsi.gateway\", \"delCache\", id);","name":"gateway.admin.delCache","updateTime":{"$t":"long","$v":1649926077500},"params":[{"name":"id","type":2,"desc":"接口缓存规则ID"}],"desc":"网关管理-接口缓存规则管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"6257e05fd2c42816264ee0de","code":"var res = $.request(\"rewin.ubsi.gateway\", \"setCache\", id,group,app,service,entry,timeout,enabled);","name":"gateway.admin.setCache","updateTime":{"$t":"long","$v":1649926373214},"params":[{"name":"id","type":2,"desc":"缓冲设置的记录ID，0表示新增"},{"name":"group","type":3,"desc":"网关分组ID，null表示不限"},{"name":"app","type":3,"desc":"应用ID，null表示不限"},{"name":"service","type":3,"desc":"服务名字，末尾的\"*\"表示通配符"},{"name":"entry","type":3,"desc":"接口名字，末尾的\"*\"表示通配符"},{"name":"timeout","type":2,"desc":"缓冲数据的超时时间(秒)"},{"name":"enabled","type":1,"desc":"本条策略是否可用"}],"desc":"网关管理-接口缓存规则管理-增加接口缓存规则","status":0,"tags":["write","xxz"]}
++:{"_id":"626a4bbb9083057ef8b86499","code":"var res = $.request(\"rewin.ubsi.gateway\", \"listGroupInGate\");\n$.result(res);","name":"gateway.admin.listGroupInGate","updateTime":{"$t":"long","$v":1651133406476},"desc":"网关管理-网关运行监控-查询网关数据中的group","status":0,"tags":["read","xxz"]}
++:{"_id":"626a4ca39083057ef8b864ef","code":"var res = $.request(\"rewin.ubsi.gateway\", \"removeGate\", id);\n$.result(res);","name":"gateway.admin.removeGate","updateTime":{"$t":"long","$v":1651133662615},"params":[{"name":"id","type":2,"desc":"网关ID"}],"desc":"网关管理-网关运行监控-删除","status":0,"tags":["write","xxz"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6267b0d2e43f5d61d3d03abf","code":"var res = $.request(\"rewin.ubsi.logger\",\"getFilter\");\n$.info(\"res:\"+res);\nif(null!=_id){\n  if(res.length > 0){\n    var list=new Packages.java.util.ArrayList();\n    for(var j=0;j<res.length;j++){\n      var map = new Packages.java.util.HashMap(res[j]);\n      //$.info('map===:'+map);\n      var ent=map.get(\"_id\").toString();\n      if(ent.contains(_id)){\n        list.add(map);\n      }\n    }\n    res=list;\n  }  \n}\n$.result(res);\n","desc":"日志分析-日志过滤器设置-查询日志过滤器","name":"logger.ubsi.getFilter","params":[{"desc":"过滤器名称","name":"_id","type":3}],"status":0,"tags":["read","write"],"updateTime":{"$t":"long","$v":1662365922692}}
++:{"_id":"6267b3d7e43f5d61d3d03bfb","code":"var res = $.request(\"rewin.ubsi.logger\",\"addFilter\",filter);\n$.result(res);","name":"logger.ubsi.addFilter","updateTime":{"$t":"long","$v":1650963495544},"params":[{"name":"filter","type":5,"desc":"过滤器，Database.Filter结构的Map"}],"desc":"日志分析-日志过滤器设置-新建日志过滤器","status":0,"tags":["write","xxz"]}
++:{"_id":"6268aac7e43f5d61d3d04dbb","code":"var _filter= filter == null ? null : new Packages.java.util.HashMap(filter);\n$.info(\"_filter:\"+_filter);\nvar res = $.request(\"rewin.ubsi.logger\",\"setFilter\",_filter);\n$.result(res);","name":"logger.ubsi.setFilter","updateTime":{"$t":"long","$v":1651027052005},"params":[{"name":"filter","type":5,"desc":"过滤器，Database.Filter结构的Map"}],"desc":"日志分析-日志过滤器-修改过滤器","status":0,"tags":["write","xxz"]}
++:{"_id":"6269f52de43f5d61d3d080d3","code":"var res= $.request(\"rewin.ubsi.logger\",\"delFilter\",filterId);\n$.info(res);","name":"logger.ubsi.delFilter","updateTime":{"$t":"long","$v":1651111393346},"params":[{"name":"filterId","type":3,"desc":"过滤器ID"}],"desc":"日志分析-日志过滤器-删除","status":0,"tags":["write","xxz"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6229a47dc11bf37ca0452b1e","code":"\n// *** repo.admin.addJar ***\n\n// *** repo.admin.addJar ***\n$.timeout(30);\nvar i=$.request('rewin.ubsi.repo', 'addJar',group,artifact,version );\nvar _tag = tags == null ? null : new Packages.java.util.HashSet(tags.split('#'));\nif(i!=0){\n$.request('rewin.ubsi.repo', 'setJar', i,_tag);\n\n  var m=new Packages.java.util.HashMap();\n  m.put('code',200);\n  m.put('message',null);\n  m.put('datas',i);\n  $.result(m);\n}","desc":"增加Jar包","name":"repo.admin.addJar","params":[{"desc":"Jar包的GroupId","name":"group","type":3},{"desc":"Jar包的ArtifactId","name":"artifact","type":3},{"desc":"Jar包的Version","name":"version","type":3},{"desc":"标签,多个#号隔开","name":"tags","type":3}],"status":0,"tags":["write"],"updateTime":{"$t":"long","$v":1652237395401}}
++:{"_id":"622ae5b8c11bf37ca04577a4","code":"$.request('rewin.ubsi.repo', 'delJar',id,force );\n  var m=new Packages.java.util.HashMap();\n  m.put('code',200);\n  $.result(m);","name":"repo.admin.delJar","updateTime":{"$t":"long","$v":1647333769997},"params":[{"name":"id","type":3,"desc":"id"},{"name":"force","type":1,"desc":"是否强制删除"}],"desc":"删除jar","status":0,"tags":["write"]}
++:{"_id":"622eeca2c11bf37ca045989d","code":"\nif(tags!=null&&tags.length>0){\n  tags= Packages.rewin.ubsi.common.Util.toSet(tags.split('#'));\n}\n$.info(tags);\n\nvar res = $.request('rewin.ubsi.repo','listJar',group, artifact, tags,name,skip, limit);\n$.result(res);","desc":"查询Jar数据","name":"repo.admin.listJar","params":[{"desc":"Jar包的GroupID，null表示不限","name":"group","type":3},{"desc":"Jar包的ArtifactID，null表示不限","name":"artifact","type":3},{"desc":"标签,多个#号隔开","name":"tags","type":3},{"desc":"包含的微服务名字或过滤器类名字，null表示不限","name":"name","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量","name":"limit","type":2}],"status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1658132077527}}
++:{"_id":"623154a7c11bf37ca05c4693","code":"var res=$.request('rewin.ubsi.repo', 'listTags');\n \n  $.result(res);","name":"repo.admin.listTags","updateTime":{"$t":"long","$v":1647400195824},"desc":"查询所有的服务仓库非重复标签","status":0,"tags":["read"]}
++:{"_id":"6231572fc11bf37ca05c46f4","code":"var _tags; \nvar tags=tags;\n  \n  if(tags!=null){\n    _tag= new Packages.java.util.HashSet(tags.split('#'));\n  \n  }\n$.request('rewin.ubsi.repo', 'setJar', id,_tag);","name":"repo.admin.setJar","updateTime":{"$t":"long","$v":1647410546481},"params":[{"name":"id","type":2,"desc":"Jar包的ID"},{"name":"tags","type":3,"desc":"标签,多个#号隔开"}],"desc":"修改Jar包","status":0,"tags":["write"]}
++:{"_id":"62318302c11bf37ca05c4f05","code":"var r=$.request('rewin.ubsi.repo', 'getJar',jid);\n$.result(r);\n","name":"repo.admin.getJar","updateTime":{"$t":"long","$v":1648695871830},"params":[{"name":"jid","type":2,"desc":"Jar包的ID"}],"desc":"根据ID获得JAR包的登记信息","status":0,"tags":["read"]}
++:{"_id":"62318d39c11bf37ca05c4fea","code":"$.info(\"jid:\"+jid);\n$.info(\"name:\"+name);\n$.info(\"jclass:\"+jclass);\nvar i=$.request('rewin.ubsi.repo', 'addService',jid,name,jclass);\nvar _tag = tags == null ? null : new Packages.java.util.HashSet(tags.split('#'));\nif(i!=0){\n /* var tags=tags;\n  \n  if(tags!=null){\n    _tag= new Packages.java.util.HashSet(tags.split('#'));\n  }*/\n$.info(\"_tag\"+_tag);\n$.request('rewin.ubsi.repo', 'setService', i,_tag);\n\n  var m=new Packages.java.util.HashMap();\n  m.put('code',200);\n  m.put('message',null);\n  m.put('datas',i);\n  $.result(m);\n}","desc":"新增一个微服务或过滤器","name":"repo.admin.addService","params":[{"desc":"Java包ID","name":"jid","type":2},{"desc":"微服务名字，null表示默认名字\"","name":"name","type":3},{"desc":"Java类的名字，自动识别微服务/过滤器","name":"jclass","type":3},{"desc":"标签,多个#号隔开","name":"tags","type":3}],"status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1652236618780}}
++:{"_id":"62318e39c11bf37ca05c5074","code":"var _tag = null; \nvar tags=tags;\n  \n  if(tags!=null){\n    _tag= new Packages.java.util.HashSet(tags.split('#'));\n  \n  }\n$.request('rewin.ubsi.repo', 'setService', id,_tag);","desc":"设置微服务/过滤器的标签\"","name":"repo.admin.setService","params":[{"desc":"微服务/过滤器的ID","name":"id","type":2},{"desc":"标签,多个#号隔开","name":"tags","type":3}],"status":0,"tags":["write"],"updateTime":{"$t":"long","$v":1658812701151}}
++:{"_id":"62319cbac11bf37ca05c5cbc","code":"$.request('rewin.ubsi.repo', 'delService',id);\n","name":"repo.admin.delService","updateTime":{"$t":"long","$v":1647418614459},"params":[{"name":"id","type":2,"desc":"服务/过滤器的ID,多条,号隔开"}],"desc":"删除微服务","status":0,"tags":["write"]}
++:{"_id":"62329852c11bf37ca05c641d","code":"\nvar res = $.request('rewin.ubsi.repo','getJarVersions',group, artifact);\n$.result(res);","name":"repo.admin.getJarVersions","updateTime":{"$t":"long","$v":1647483110525},"params":[{"name":"group","type":3,"desc":"Jar包的GroupId"},{"name":"artifact","type":3,"desc":"Jar包的ArtifactId"}],"desc":"获得Maven库中Jar包的可用版本列表","status":0,"tags":["read"]}
++:{"_id":"623299b1c11bf37ca05c6479","code":"var res = $.request('rewin.ubsi.repo','getServiceConfig',jclass, version);\n$.result(res);","name":"repo.admin.getServiceConfig","updateTime":{"$t":"long","$v":1648719840279},"params":[{"name":"jclass","type":3,"desc":"Java的类名字"},{"name":"version","type":2,"desc":"接口的版本号"}],"desc":"获得微服务/过滤器的缺省配置数据\"","status":0,"tags":["read"]}
++:{"_id":"62329a49c11bf37ca05c6497","code":"var res = $.request('rewin.ubsi.repo','setServiceConfig',jclass, version,config);\n$.result(res);","name":"repo.admin.setServiceConfig","updateTime":{"$t":"long","$v":1647483608939},"params":[{"name":"jclass","type":3,"desc":"Java的类名字"},{"name":"version","type":2,"desc":"接口的版本号"},{"name":"config","type":3,"desc":"配置参数，JSON格式字符串，null表示删除"}],"desc":"设置微服务/过滤器的缺省配置数据","status":0,"tags":["write"]}
++:{"_id":"6232cd9bc11bf37ca05c716d","code":"var res = $.request('rewin.ubsi.repo','listEntry',sid,name);\n$.result(res);","name":"repo.admin.listEntry","updateTime":{"$t":"long","$v":1647841654003},"params":[{"name":"sid","type":2,"desc":"微服务的ID"},{"name":"name","type":3,"desc":"接口的名字，null表示不限"}],"desc":"查询接口定义，按照name升序排列","status":0,"tags":["read"]}
++:{"_id":"6232ceddc11bf37ca05c71ab","code":"var res = $.request('rewin.ubsi.repo','getMockData',service, entry);\n$.result(res);","name":"repo.admin.getMockData","updateTime":{"$t":"long","$v":1647497012394},"params":[{"name":"service","type":3,"desc":"微服务名字，不能为null"},{"name":"entry","type":3,"desc":"接口名字，不能为null"}],"desc":"访真数据，XML格式字符串","status":0,"tags":["read"]}
++:{"_id":"6232d29dc11bf37ca05c722f","code":"var res = $.request('rewin.ubsi.repo','listMockData',service,skip,limit);\n$.result(res);","desc":"获得缺省配置数据的列表，按照service/entry排列","name":"repo.admin.listMockData","params":[{"desc":"微服务名字，null表示不限\"","name":"service","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1658910775282}}
++:{"_id":"6232d3c8c11bf37ca05c7398","code":"var res = $.request('rewin.ubsi.repo','setMockData',service, entry,data);\n$.result(res);","name":"repo.admin.setMockData","updateTime":{"$t":"long","$v":1647503267928},"params":[{"name":"service","type":3,"desc":"微服务名字，不能为null"},{"name":"entry","type":3,"desc":"接口名字，不能为null"},{"name":"data","type":3,"desc":"仿真数据，XML格式字符串，null表示删除"}],"desc":"设置仿真数据","status":0,"tags":["write"]}
++:{"_id":"62342b7ec11bf37ca05ca71a","code":"\n// *** Container.admin.getRegister ***\n\n// *** Container.admin.getRegister ***\n\n\ntry{\n  \tvar r = Packages.rewin.ubsi.consumer.Context.getRegister();\n  $.result(r);\n}catch(err){\n  //err.printStackTrace();\n\t$.error(err);\n}","desc":"得到当前的容器列表","name":"repo.admin.target","status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1652776038795}}
++:{"_id":"6245116ed2c42816264dbddb","code":"if(tags!=null&&tags.length>0){\n  tags= Packages.rewin.ubsi.common.Util.toSet(tags.split('#'));\n}\nvar r=$.request('rewin.ubsi.repo', 'listService',jid,name,tags,$._int(singleton),skip,limit);\n$.result(r);","desc":"服务仓库-微服务查询-服务列表页","name":"repo.admin.listService","params":[{"desc":"Jar包的ID，0表示不限","name":"jid","type":2},{"desc":"微服务名字或Java类名字，模糊查询，null表示不限","name":"name","type":3},{"desc":"标签,多个#号隔开","name":"tags","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2},{"desc":"singleton字段(int)表示是否单例，null:不限，1:是，0:否","name":"singleton","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1657607565496}}
++:{"_id":"62454348d2c42816264dc134","code":"var res=new Packages.java.util.ArrayList();\nvar jar=$.request(\"rewin.ubsi.repo\", \"getJar\", jid);\n$.info(\"jar.group:\"+jar.group)\n$.info(\"jar.artifact:\"+jar.artifact)\n//jar.group, jar.artifact\nvar list=$.request(\"rewin.ubsi.repo\", \"getJarVersions\", jar.group, jar.artifact);\nvar mvnVersions=new Packages.java.util.ArrayList(list);\n$.info(\"mvnVersions:\"+mvnVersions)\nvar jars=$.request(\"rewin.ubsi.repo\", \"listJar\",jar.group, jar.artifact,null,null,0,0);\n$.info(\"jars:\"+jars)\nif(jars[0]>0){\n  var dbVsersions=new Packages.java.util.ArrayList();\n  var jarList=new Packages.java.util.ArrayList(jars[1]);\n  $.info(\"jarList:\"+jarList)\n  if(jarList.size()>0){\n    for (var i = 0; i < jarList.size(); i++) {\n      var jar =new Packages.java.util.HashMap(jarList.get(i));\n      dbVsersions.add(jar.get(\"version\"));\n    }\n  }\n  $.info(\"dbVsersions:\"+dbVsersions)\n  for (var j = 0; j < mvnVersions.size(); j++) {\n    var mvnV = mvnVersions.get(j).toString();\n    var flag = true;\n    for (var k = 0; k < dbVsersions.length; k++) {\n      var dbv = dbVsersions[k].toString();\n      if (mvnV == dbv) {\n        flag = false;\n      }\n    }\n    if (flag) {\n      res.add(mvnV);\n    }\n  }\n}\n$.result(res);","name":"repo.admin.getNewJarVersions","updateTime":{"$t":"long","$v":1648707756709},"params":[{"name":"jid","type":2,"desc":"jar包id"}],"desc":"服务仓库-微服务查询-更新","status":0,"tags":["read","xxz"]}
++:{"_id":"62454cb9d2c42816264dc31e","code":"$.timeout(30);\nvar res=$.request(\"rewin.ubsi.admin\", \"check\",jid,nvers);\n$.result(res);\n//1572304411\n/*var gson=new Packages.com.google.gson.Gson();\nvar msg=new Packages.java.util.ArrayList();\nvar ids= new Packages.java.util.ArrayList();\nids.add(jid);\n\nvar cjmap = new Packages.java.util.HashMap($.request(\"rewin.ubsi.repo\", \"checkJar\",ids));\n$.info(\"===cjmap===:\"+cjmap);\nmsg.add(\"CheckJar:\"+gson.toJson(cjmap) );\n$.info(\"===msg===:\"+msg);\nif(null!=nvers && !\"\".equals(nvers)) {\n  var _nvers =new Packages.java.util.ArrayList(nvers.split(\"#\")) ;\n  for (var n = 0; n < _nvers.length; n++) {\n    var nver = _nvers[n].toString();\n    $.info(\"===nver===:\"+nver);\n    var newjid = 0;\n    var jar=$.request(\"rewin.ubsi.repo\", \"getJar\", jid);\n    var tags = null;\n    if (null != jar.tags) {\n     var  list =new Packages.java.util.ArrayList(jar.tags) ;\n     tags = String.join(\"#\", list);\n    }\n    var sjid = jar._id;\n    \n  }\n}*/","desc":"服务仓库-微服务查询-更新提交","name":"repo.admin.check","params":[{"desc":"Jar包的ID","name":"jid","type":2},{"desc":"新版本号,多个#号隔开","name":"nvers","type":3}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1658819553069}}
++:{"_id":"624568c0d2c42816264dc86b","code":"var _reg = Packages.rewin.ubsi.consumer.Context.getRegister();\nvar reg=new Packages.java.util.HashMap(_reg);\n$.info(\"===reg===:\"+reg);\nvar res=new Packages.java.util.ArrayList();\nvar list=new Packages.java.util.ArrayList(reg.keySet());\nfor(var i=0;i<list.size();i++){\n  var key=list.get(i).toString();\n  var c=reg.get(key);\n  var services=new Packages.java.util.ArrayList(c.Services.keySet());\n  $.info(\"services:\"+services);\n  for (var j = 0; j < services.length; j++) {\n    if(name.equals(services[j].toString())){\n      var service=c.Services.get(name);\n      $.info(\"service:\"+service);\n      var map=new Packages.java.util.HashMap();\n      map.put(key,service);\n      res.add(map);\n    }\n  }\n}\n$.result(res);","name":"repo.admin.getDeployLIstName","updateTime":{"$t":"long","$v":1648716943168},"params":[{"name":"name","type":3,"desc":"微服务名"}],"desc":"服务仓库-微服务查询-查询当前服务部署状态","status":0,"tags":["read","xxz"]}
++:{"_id":"6245709bd2c42816264dca4f","code":"var res=$.request(\"rewin.ubsi.admin\", \"deploy\",targets,sid)\n$.result(res);\n","name":"repo.admin.deploy","updateTime":{"$t":"long","$v":1648718752644},"params":[{"name":"targets","type":3,"desc":"Container的主机#端口号,多个用,连接"},{"name":"sid","type":2,"desc":"微服务ID"}],"desc":"服务仓库-微服务查询-部署提交","status":0,"tags":["write","xxz"]}
++:{"_id":"62465fb7d2c42816264dce29","code":"var _reg = Packages.rewin.ubsi.consumer.Context.getRegister();\nvar reg=new Packages.java.util.HashMap(_reg);\n$.info(\"===reg===:\"+reg);\nvar res=new Packages.java.util.ArrayList();\nvar list=new Packages.java.util.ArrayList(reg.keySet());\nfor(var i=0;i<list.size();i++){\n  var key=list.get(i).toString();\n  var c=reg.get(key);\n  var services=new Packages.java.util.ArrayList(c.Services.keySet());\n  $.info(\"services:\"+services);\n  for (var j = 0; j < services.length; j++) {\n    if(name.equals(services[j].toString())){\n      var service=c.Services.get(name);\n      $.info(\"Version:\"+service.Version.equals(version));\n      $.info(\"Release:\"+service.Release.equals(release));\n      $.info(\"ClassName:\"+service.ClassName.equals(jclass));\n      if (service.Version.equals(version) && service.Release==release && service.ClassName.equals(jclass)) {\n        res.add(key);\n      }\n      /*$.info(\"service:\"+service);\n      var map=new Packages.java.util.HashMap();\n      map.put(key,service);\n      res.add(map);*/\n    }\n  }\n}\n$.result(res);","name":"repo.admin.getDeployList","updateTime":{"$t":"long","$v":1648780068111},"params":[{"name":"name","type":3,"desc":"微服务名"},{"name":"version","type":2,"desc":"版本号"},{"name":"jclass","type":3,"desc":"java类名"},{"name":"release","type":1,"desc":"release"}],"desc":"服务仓库-微服务查询-部署状态","status":0,"tags":["read","xxz"]}
++:{"_id":"627b1ad3a077da6bb0140500","code":"var res = $.request(\"rewin.ubsi.admin\",\"getGroupsOrArtifact\",group);\n$.result(res);","desc":"服务仓库-微服务查询-微服务注册-查询","name":"repo.admin.getGroupsOrArtifact","params":[{"desc":"Jar包的GroupID，null表示不限","name":"group","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1652235032199}}
++:{"_id":"627b1d2fa077da6bb01406ef","code":"var r=new Packages.java.util.HashMap();\nvar res=$.request(\"rewin.ubsi.repo\", \"listJar\", group, artifact, null, null, 0, 0);\nif(res != null){\n  if (res[0] > 0) {\n    var listjar = new Packages.java.util.ArrayList(res[1]);\n    if (listjar.size() > 0) {\n      for (var i = 0; i < listjar.size(); i++) {\n        var jar = new Packages.java.util.HashMap(listjar.get(i));\n        var ver=jar.get(\"version\").toString();\n        if(ver == version){\n          r = jar;\n          break;\n        }\n      }\n    }\n  }\n}\n$.result(r);","desc":"服务仓库-微服务查询-服务注册-版本号","name":"repo.admin.JarByGAV","params":[{"desc":"Jar包的GroupID，null表示不限","name":"group","type":3},{"desc":"Jar包的ArtifactID，null表示不限","name":"artifact","type":3},{"desc":"Jar包的ArtifactID，null表示不限","name":"version","type":3}],"status":0,"tags":["read","write"],"updateTime":{"$t":"long","$v":1652235889065}}
++:{"_id":"62e0f823adde457b2462cfba","code":"var res = $.request('rewin.ubsi.repo','listDepends',name,version,release);\n$.result(res);","desc":"查询微服务的依赖关系，按照name/jclass/version降序排列","name":"repo.admin.listDepends","params":[{"desc":"微服务的名字","name":"name","type":3},{"desc":"微服务的版本，0:不限","name":"version","type":2},{"desc":"微服务的发布状态，-1:不限，0:非release，1:release","name":"release","type":2}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1658913767312}}
++:{"_id":"62e2330ebd649510c7ab1ee6","code":"var r=$.request('rewin.ubsi.repo', 'getSpecConfig',id);\n$.result(r);","desc":"获得指定的缺省配置数据","name":"repo.admin.getSpecConfig","params":[{"desc":"配置参数ID，1:container，2:container's acl，3:container's router，4:container's log，-1:rest，-2:rest's acl，-3:rest's router，-4:rest's log","name":"id","type":2}],"status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1658991486953}}
++:{"_id":"62e233babd649510c7ab1f40","code":"var r=$.request('rewin.ubsi.repo', 'setSpecConfig',$._int(id),config);\n$.result(r);","desc":"设置指定的缺省配置数据","name":"repo.admin.setSpecConfig","params":[{"desc":"配置参数ID，1:container，2:container's acl，3:container's router，4:container's log，-1:rest，-2:rest's acl，-3:rest's router，-4:rest's log","name":"id","type":2},{"desc":"配置参数，JSON格式字符串，null表示删除","name":"config","type":3}],"status":0,"tags":["write","cxx"],"updateTime":{"$t":"long","$v":1658998455678}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"624e4552d2c42816264de884","code":"/*if(fields!=null&&fields.length>0){\n  _fields= Packages.rewin.ubsi.common.Util.toSet(fields.split('#'));\n}*/\nvar _fields= fields == null ? null : Packages.rewin.ubsi.common.Util.toSet(fields.split('#'));\nvar res = $.request('rewin.ubsi.scheduler', 'listCode', id,_fields,skip,limit);\n$.result(res);\n$.info(\"333333\");","name":"scheduler.admin.listCode","updateTime":{"$t":"long","$v":1649311584085},"params":[{"name":"id","type":3,"desc":"代码ID，前缀匹配，null表示不限"},{"name":"fields","type":3,"desc":"需要返回的字段集合，null表示全部"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"任务调度-代码片段-查询","status":0,"tags":["read","write"]}
++:{"_id":"624e4c7bd2c42816264de9f6","code":"if(id == null){\n  $.result(1);//\"代码ID不能为空！\"\n}else{\n  if(\"add\".equals(type)){\n    var res=$.request(\"rewin.ubsi.scheduler\", \"listCode\",id,null,0,0);\n    $.info(\"lll:\"+res[0]);\n    if(res[0] > 0){\n      $.result(2);//\"代码ID已存在\"\n    }\n    $.request(\"rewin.ubsi.scheduler\", \"setCode\", id, desc, code);\n    $.result(3);//\"增加代码片段成功!\"\n  }else{\n    $.request(\"rewin.ubsi.scheduler\", \"setCode\", id, desc, code);\n    $.result(4);//\"设置代码片段成功!\"\n  }\n}\n","name":"scheduler.admin.setCode","updateTime":{"$t":"long","$v":1649300183734},"params":[{"name":"id","type":3,"desc":"代码ID"},{"name":"desc","type":3,"desc":"说明"},{"name":"code","type":3,"desc":"代码"},{"name":"type","type":3,"desc":"类型,add增加，mod修改"}],"desc":"任务调度-代码片段-增加代码定义","status":0,"tags":["write","xxz"]}
++:{"_id":"624e5878d2c42816264dec16","code":"$.request(\"rewin.ubsi.scheduler\", \"delCode\", id);","name":"scheduler.admin.delCode","updateTime":{"$t":"long","$v":1649301756897},"params":[{"name":"id","type":3,"desc":"代码ID"}],"desc":"任务调度-代码片段-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"624e72d8d2c42816264ded4f","code":"var _data= data == null ? \"\" : data;\n$.info(\"_data:\"+_data);\nvar _event=new Packages.java.util.HashMap();\n$.info(\"222\");\nif(null!=event && !\"\".equals(event)) {\n  $.info(\"444\");\n  _event.put(event,_data);\n}\n$.info(\"_event:\"+_event);\nvar res=$.request(\"rewin.ubsi.scheduler\", \"testCode\", code,_event);\n$.result(res);","name":"scheduler.admin.testCode","updateTime":{"$t":"long","$v":1649386593797},"params":[{"name":"code","type":3,"desc":"脚本代码"},{"name":"data","type":3,"desc":"事件数据"},{"name":"event","type":3,"desc":"事件名称"}],"desc":"任务调度-代码片段-代码-代码测试","status":0,"tags":["write","xxz"]}
++:{"_id":"624fc79bd2c42816264e42e3","code":"var res=$.request(\"rewin.ubsi.scheduler\", \"getTaskTags\");\n$.result(res);","name":"scheduler.admin.getTaskTags","updateTime":{"$t":"long","$v":1649395660703},"desc":"任务调度-任务管理-获取标签","status":0,"tags":["read","xxz"]}
++:{"_id":"624fcaded2c42816264e43b3","code":"var _tags= tags == null ? null : new Packages.java.util.HashSet(tags);\nvar _events= events == null ? null : new Packages.java.util.HashSet(events);\nvar _fields= fields == null ? null : new Packages.java.util.HashSet(fields);\nvar res=$.request(\"rewin.ubsi.scheduler\", \"listTask\",name,code,_tags,status,_events,_fields,skip,limit);\n$.result(res);","name":"scheduler.admin.listTask","updateTime":{"$t":"long","$v":1649396718103},"params":[{"name":"name","type":3,"desc":"名字，模糊匹配，null表示不限"},{"name":"code","type":3,"desc":"代码片段ID，null表示不限"},{"name":"tags","type":4,"desc":"标签，null表示不限"},{"name":"status","type":2,"desc":"状态，-1:全部，0:正常，1:不正常"},{"name":"events","type":4,"desc":"事件频道，null表示不限"},{"name":"fields","type":4,"desc":"需要返回的字段集合，null表示全部"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"任务调度-任务管理-查询任务列表","status":0,"tags":["read","xxz"]}
++:{"_id":"624fce1dd2c42816264e4422","code":"var res=$.request(\"rewin.ubsi.scheduler\", \"getTaskEvents\");\n$.result(res);","name":"scheduler.admin.getTaskEvents","updateTime":{"$t":"long","$v":1649397318639},"desc":"任务调度-任务管理-获取所有事件","status":0,"tags":["read","xxz"]}
++:{"_id":"624fd529d2c42816264e45aa","code":"var props=new Packages.java.util.HashMap();\nprops.put(\"name\",name);\nprops.put(\"status\",status);\nprops.put(\"timeout\",timeout);\nprops.put(\"use\",use == null ? new Packages.java.util.ArrayList() : use);\nprops.put(\"desc\",desc);\nprops.put(\"timer\",timer);\nif(events != null){\n  props.put(\"events\", new Packages.java.util.HashSet(events));\n}\nif(tags != null){\n  props.put(\"tags\", new Packages.java.util.HashSet(tags));\n}\nvar res=$.request(\"rewin.ubsi.scheduler\", \"addTask\",props);\n$.result(res);","name":"scheduler.admin.addTask","updateTime":{"$t":"long","$v":1649399636279},"params":[{"name":"use","type":4,"desc":"引用的代码片段"},{"name":"timeout","type":2,"desc":"定时调度执行的超时时间（分钟数），手动/事件激活的执行不受限制"},{"name":"tags","type":4,"desc":"标签"},{"name":"timer","type":3,"desc":"定时调度，cron表达式，如果是被定时调度激活，则不能overlap执行，且两次执行的间隔时间不能少于9秒"},{"name":"name","type":3,"desc":"名字"},{"name":"desc","type":3,"desc":"任务描述"},{"name":"status","type":2,"desc":"状态0正常，-1不正常"},{"name":"events","type":4,"desc":"事件频道，如果是被事件激活，可以overlap执行，JS代码中可以使用变量 $event : {\\\"channel\\\":\\\"<频道>\\\", \\\"data\\\":<数据>}"}],"desc":"任务调度-任务管理-增加任务","status":0,"tags":["write","xxz"]}
++:{"_id":"624fda34d2c42816264e4655","code":"var res=$.request(\"rewin.ubsi.scheduler\", \"setTask\",id, props);\n$.result(res);","name":"scheduler.admin.setTask","updateTime":{"$t":"long","$v":1649400445482},"params":[{"name":"id","type":3,"desc":"任务ID"},{"name":"props","type":5,"desc":"要修改的任务属性"}],"desc":"任务调度-任务管理-详情修改任务","status":0,"tags":["write","xxz"]}
++:{"_id":"624fdddcd2c42816264e47c5","code":"var res=$.request(\"rewin.ubsi.scheduler\", \"delTask\", id);\n$.result(res);","name":"scheduler.admin.delTask","updateTime":{"$t":"long","$v":1649401364066},"params":[{"name":"id","type":3,"desc":"任务ID"}],"desc":"任务调度-任务管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"624ff75ad2c42816264e4d27","code":"$.info(\"timeRange:\"+timeRange);\nvar _timeRange=null;\nif(timeRange == null || timeRange == \"null\"){\n  _timeRange=null;\n}else{\n  var time=new Packages.java.util.ArrayList(timeRange.split(\",\"));\n  $.info(\"time:\"+time);\n  var list=new Packages.java.util.ArrayList();\n  list.add($._long(time[0]));\n  list.add($._long(time[1]));\n  $.info(\"list:\"+list);\n  _timeRange=list.toArray();\n}\n\n$.info(\"_timeRange:\"+_timeRange);\n//val=eval('('+{_timeRange}+')')\nvar _over= (over == null || over == \"null\")  ? null : over;\n$.info(\"_over:\"+_over);\nvar _fields= fields == null ? null : new Packages.java.util.HashSet(fields);\nvar res=$.request(\"rewin.ubsi.scheduler\", \"listExec\",task,$._int(mode),event,_timeRange,_over,_fields,skip,limit);\n$.result(res);","desc":"任务调度-任务管理-结果","name":"scheduler.admin.listExec","params":[{"desc":"任务ID，null表示不限","name":"task","type":3},{"desc":"激活方式，0:手工，1:定时，2:事件","name":"mode","type":2},{"desc":"激活的事件频道","name":"event","type":3},{"desc":"开始时间的区间，格式：[(long),(long)]，null表示不限","name":"timeRange","type":3},{"desc":"是否结束，null表示不限","name":"over","type":1},{"desc":"需要返回的字段集合，null表示全部","name":"fields","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1652239396610}}
++:{"_id":"62538c6ed2c42816264e5948","code":"var _data= data == null ? \"\" : data;\n$.info(\"_data:\"+_data);\nvar _event=new Packages.java.util.HashMap();\n$.info(\"222\");\nif(null!=event && !\"\".equals(event)) {\n  $.info(\"444\");\n  _event.put(event,_data);\n}\n$.info(\"_event:\"+_event);\nvar res=$.request(\"rewin.ubsi.scheduler\", \"runTask\", id,_event);\n$.result(res);","name":"scheduler.admin.runTask","updateTime":{"$t":"long","$v":1649642732430},"params":[{"name":"id","type":3,"desc":"任务ID"},{"name":"data","type":3,"desc":"事件数据"},{"name":"event","type":3,"desc":"事件名称"}],"desc":"任务调度-任务管理-运行","status":0,"tags":["write","xxz"]}
++:{"_id":"62538fd2d2c42816264e5a30","code":"var res=$.request(\"rewin.ubsi.scheduler\", \"delExec\", id)","name":"scheduler.admin.delExec","updateTime":{"$t":"long","$v":1649643548651},"params":[{"name":"id","type":3,"desc":"任务ID"}],"desc":"任务调度-任务管理-结果-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"625397dcd2c42816264e5bd4","code":"$.info(\"1111_ids:\");\nvar _ids= ids == null ? new Packages.java.util.ArrayList() : new Packages.java.util.ArrayList(ids);\n$.info(\"1111_ids:\"+_ids);\nvar code=new Packages.java.lang.StringBuffer();\n$.info(\"2222_ids:\"+_ids);\nfor(var i=0;i<_ids.size();i++){\n  var codeId=_ids.get(i).toString();\n  $.info(\"codeId:\"+codeId);\n  var codeSet=new Packages.java.util.HashSet();\n  codeSet.add(codeId);\n  $.info(\"codeSet:\"+codeSet);\n  var res=$.request(\"rewin.ubsi.scheduler\", \"getCode\", codeSet);\n  $.info(\"res:\"+res);\n  var _res=new Packages.java.util.ArrayList(res);\n for(var j=0;j<_res.size();j++){\n   var map=new Packages.java.util.HashMap(_res.get(j));\n   code.append(map.get(\"code\")).append(\" \\n \");\n }\n}\n$.result(code);","name":"scheduler.admin.getCode","updateTime":{"$t":"long","$v":1649658579129},"params":[{"name":"ids","type":4,"desc":"代码ID的集合"}],"desc":"任务调度-任务管理-代码查询","status":0,"tags":["read","xxz"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6152682e256a466f2e2f1d53","result":"array（java数组），格式：[ 总数量(long), ACL的列表(List) ]，每条ACL是个Map，格式：\n{\n  \"roles\": \"string，允许访问的角色，null:都行，[]:匿名\",\n  \"name\": \"string，ACL的名字：针对script name的正则表达式\",\n  \"updateTime\": \"long, 修改的时间戳\",\n  \"_id\": \"string，ACL的标识\",\n  \"tags\": \"list，ACL适用的script标签，null:不限，[]:无标签的script\",\n  \"status\": \"int, 状态，0:正常\",\n}","code":"var res = $.request('rewin.ubsi.script', 'listAclByScript', name, sortby, skip, limit);\n$.result(res);","name":"script.admin.listAclByScript","updateTime":{"$t":"long","$v":1642743986596},"params":[{"name":"name","type":3,"desc":"脚本的名字"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量（整数）"},{"name":"limit","type":2,"desc":"返回的数量（整数），0表示不限"}],"desc":"查询脚本的ACL列表","status":0,"tags":["read"]}
++:{"_id":"61539ba4256a466f2e2f3f91","result":"map，JS脚本的API说明，格式：\n{\n  \"API接口定义\": \"API接口说明\",\n  ...\n}","code":"$.result(Packages.rewin.ubsi.common.ScriptUtil.Api);","name":"script.jshelp","updateTime":{"$t":"long","$v":1651135380783},"desc":"JS脚本的API说明","status":0,"tags":["read"]}
++:{"_id":"6153c1cd256a466f2e2f51ca","code":"\n// *** script.token ***\n// token参数的格式： ['domain','session_id']\n\n$.result({'roles':null});\ntry {\n  \tvar tokenObj = eval('(' + token + ')');\n  //$.info(tokenObj);\n   //每次调用token 接口时候调用session 的get方法，保证session 始终存活\n   var session = $.request('rewin.user.session', 'get', tokenObj[1], tokenObj[0], null);\n // $.info(session);\n   if(session != null){\n      var roles = session[1];\n      if(roles != null){\n        $.result({'roles':roles.get(\"roles\")});\n      }\n   }\n} catch(err) {\n  $.error(err);\n}","desc":"检查rest请求中的token","name":"script.token","params":[{"desc":"rest请求令牌","name":"token","type":3}],"result":"map，根据token解析的用户角色，格式：\n{\n  \"user\": \"用户id\",\n  \"roles\": [ \"用户角色1\", \"用户角色2\" ],\n  \"domain\": \"数据域\"\n}\n","status":0,"tags":["read","cxx"],"updateTime":{"$t":"long","$v":1657595242609}}
++:{"_id":"6153df7f256a466f2e2f6574","result":"string，console输出格式的text文本","code":"$.result(Packages.rewin.ubsi.cli.Request.JSON_FORMAT);","name":"script.jsonHelp","updateTime":{"$t":"long","$v":1635228941858},"params":[],"desc":"UBSI-JSON编码格式说明","status":0,"tags":["read"]}
++:{"_id":"6153e1ac256a466f2e2f66cf","result":"string，console输出格式的text文本","code":"$.result(Packages.rewin.ubsi.cli.Request.XML_FORMAT);","name":"script.xmlHelp","updateTime":{"$t":"long","$v":1632959444463},"params":[],"desc":"UBSI-XML编码格式说明","status":0,"tags":["read"]}
++:{"_id":"615a4424256a466f2e2fb07a","result":"结果类型：java.lang.Object[] ，结果描述：格式：[ 总数量(long), ACL(DB.Acl)的列表(List<Map>) ]\n\n[\n\t1,\n\t[\n\t\t{\n\t\t\t\"name\": \".*\",\n\t\t\t\"updateTime\": 1631784932828,\n\t\t\t\"_id\": \"acl4\",\n\t\t\t\"status\": 0\n\t\t}\n\t]\n]","code":"var arres = $.request('rewin.ubsi.script','listAcl',name,tags,roles,status,sortby,skip,limit);\n$.result(arres)","name":"script.admin.listAcl","updateTime":{"$t":"long","$v":1645791385199},"params":[{"name":"name","type":3,"desc":"脚本名字(可以被ACL的名字匹配)，null表示不限"},{"name":"tags","type":4,"desc":"ACL标签，null表示不限，[]表示无标签"},{"name":"roles","type":4,"desc":"ACL角色，null表示不限，[]表示匿名"},{"name":"status","type":2,"desc":"状态，null:不限，0:正常，x:不正常"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"查询权限列表","status":0,"tags":["read"]}
++:{"_id":"615b6b3e256a466f2e2fc35f","result":"null","code":"/* ACL的属性说明：\n\t{\n\t\t\"_id\": \"java.lang.String, ACL的标识，自动\",\n\t\t\"name\": \"java.lang.String, ACL的名字：针对script name的正则表达式\",\n\t\t\"roles\": \"java.util.List<java.lang.String>, 允许访问的角色，null:都行，[]:匿名\",\n\t\t\"tags\": \"java.util.List<java.lang.String>, ACL适用的script标签，null:不限，[]:无标签的script\",\n\t\t\"updateTime\": \"long, 修改的时间戳\",\n\t\t\"status\": \"int, 状态，0:正常\"\n\t}\n*/\n$.request('rewin.ubsi.script','setAcl',acl);\n","name":"script.admin.setAcl","updateTime":{"$t":"long","$v":1645688129238},"params":[{"name":"acl","type":5,"desc":"ACL的各个属性"}],"desc":"新增/修改ACL","status":0,"tags":["write"]}
++:{"_id":"615b94d5256a466f2e2fd0cc","result":"null","code":"var res = $.request('rewin.ubsi.script','delAcl',id);\n$.result(res);","name":"script.admin.delAcl","updateTime":{"$t":"long","$v":1642672227934},"params":[{"name":"id","type":3,"desc":"acl的id"}],"desc":"删除ACL","status":0,"tags":["write"]}
++:{"_id":"6188e012c5ecfe25c99b3911","code":"var res = $.request('rewin.ubsi.script', 'testCode', code);\n$.result(res);","name":"script.admin.testCode","updateTime":{"$t":"long","$v":1636961473461},"params":[{"name":"code","type":3,"desc":"JS脚本代码"}],"desc":"测试JS代码","status":0,"tags":["exec"]}
++:{"_id":"61ea2a448b80b964c861d852","result":"null","code":"var res = $.request('rewin.ubsi.script','delDir',id);\n$.result(res);","name":"script.admin.delDir","updateTime":{"$t":"long","$v":1646205881182},"params":[{"name":"id","type":3,"desc":"目录映射项的id"}],"desc":"删除目录映射项","status":0,"tags":["write"]}
++:{"_id":"61ea2b618b80b964c861d87f","result":"结果类型：java.lang.Object[] ，结果描述：格式：[ 总数量(long), 目录映射项(DB.Dir)的列表(List<Map>) ]\n\n[\n\t1,\n\t[\n\t\t{\n\t\t    \"_id\": \"java.lang.String, 目录映射项的标识，自动\",\n\t\t    \"name\": \"java.lang.String, 目录的映射名，不能为空或包含非法字符\",\n\t\t    \"desc\": \"java.lang.String, 目录的说明\",\n                    \"path\": \"java.lang.String, 目录的真实路径\",\n\t\t    \"read\": \"java.util.List<java.lang.String>, 可读的角色，null:不限\",\n\t\t    \"write\": \"java.util.List<java.lang.String>, 可写的角色，null:不限\"\n\t\t}\n\t]\n]","code":"var arres = $.request('rewin.ubsi.script','listDir',name,skip,limit);\n$.result(arres)","name":"script.admin.listDir","updateTime":{"$t":"long","$v":1648536098278},"params":[{"name":"name","type":3,"desc":"目录映射项的名字(模糊匹配)，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"limit"}],"desc":"目录映射项的列表查询","status":0,"tags":["read"]}
++:{"_id":"61ea2cb28b80b964c861d8b0","result":"null","code":"/* 目录映射项的属性说明：\n\t\t{\n\t\t    \"_id\": \"java.lang.String, 目录映射项的标识，自动，null表示新增\",\n\t\t    \"name\": \"java.lang.String, 目录的映射名，不能为空或包含非法字符\",\n\t\t    \"desc\": \"java.lang.String, 目录的说明\",\n            \"path\": \"java.lang.String, 目录的真实路径\",\n\t\t    \"read\": \"java.util.List<java.lang.String>, 可读的角色，null:不限\",\n\t\t    \"write\": \"java.util.List<java.lang.String>, 可写的角色，null:不限\"\n\t\t}\n*/\n$.request('rewin.ubsi.script','setDir',dir);\n","name":"script.admin.setDir","updateTime":{"$t":"long","$v":1643182711438},"params":[{"name":"dir","type":5,"desc":"目录映射项"}],"desc":"新增/修改目录映射项","status":0,"tags":["write"]}
++:{"_id":"script.admin.delScript","result":"无","code":"$.request('rewin.ubsi.script', 'delScript', name);","name":"script.admin.delScript","updateTime":{"$t":"long","$v":1632965990926},"params":[{"name":"name","type":3,"desc":"脚本名字"}],"desc":"删除一个脚本","status":0,"tags":["write"]}
++:{"_id":"script.admin.getTags","result":"list，标签列表，例如：[ \"tag1\", \"tag2\" ]","code":"var res = $.request('rewin.ubsi.script', 'getTags');\n$.result(res);\n","name":"script.admin.getTags","updateTime":{"$t":"long","$v":1642747806645},"params":[],"desc":"获得脚本使用的标签列表","status":0,"tags":["read"]}
++:{"_id":"script.admin.listScript","result":"array（java数组），格式：[ 总数量(long), 脚本的列表(list) ]，每个脚本是一个map，格式：\n{\n  \"_id\": \"string，脚本ID\",\n  \"name\": \"string，脚本名字(不能重复)\",\n  \"desc\": \"string，脚本说明\",\n  \"tags\": \"list，脚本标签，可以多个，例如：['tag1','tag2']\",\n  \"status\": \"int，状态，0:正常\",\n  \"include\": \"list，包含的其他脚本的名字，可以多个\",\n  \"code\": \"string，脚本代码\",\n  \"result\": \"string，结果说明\",\n  \"params\": \"list，参数列表，格式：[ {\n      'name': 'string, 参数名字‘,\n      'type': 'int, 数据类型, 0:任意, 1:Bool, 2:Number, 3:String, 4:List, 5:Map',\n      'desc': 'string, 参数说明' } ]\",\n  \"updateTime\": \"long, 修改的时间戳\",\n}","code":"var res = $.request('rewin.ubsi.script', 'listScript', name, tags, status, sortby, skip, limit);\n$.result(res);","name":"script.admin.listScript","updateTime":{"$t":"long","$v":1635489267095},"params":[{"name":"name","type":3,"desc":"脚本名字(正则表达式)，null表示不限"},{"name":"tags","type":4,"desc":"脚本标签，null表示不限，[]表示无标签"},{"name":"status","type":2,"desc":"状态（整数），null:不限，0:正常，x:不正常"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量（整数）"},{"name":"limit","type":2,"desc":"返回的数量（整数），0表示不限"}],"desc":"脚本的列表查询","status":0,"tags":["read"]}
++:{"_id":"script.admin.setScript","result":"无","code":"/* 脚本的属性说明：\n{\n  \"_id\": \"string，脚本ID\",\n  \"name\": \"string，脚本名字(不能重复)\",\n  \"desc\": \"string，脚本说明\",\n  \"tags\": \"list，脚本标签，可以多个，例如：['tag1','tag2']\",\n  \"status\": \"int，状态，0:正常\",\n  \"include\": \"list，包含的其他脚本的名字，可以多个\",\n  \"code\": \"string，脚本代码\",\n  \"result\": \"string，结果说明\",\n  \"params\": \"list，参数列表，格式：[ {\n      'name': 'string, 参数名字‘,\n      'type': 'int, 数据类型, 0:任意, 1:Bool, 2:Number, 3:String, 4:List, 5:Map',\n      'desc': 'string, 参数说明' } ]\"\n}\n*/\n$.request('rewin.ubsi.script', 'setScript', script);","name":"script.admin.setScript","updateTime":{"$t":"long","$v":1642737341509},"params":[{"name":"script","type":5,"desc":"脚本的各个属性"}],"desc":"新增/修改脚本定义","status":0,"tags":["write"]}
++:{"_id":"script.admin.testScript","result":"array（java数组），脚本执行结果，格式：\n[\n  执行结果（任意类型）,\n  执行的JS源代码（string）,\n  执行日志（list），格式：\n     /**\n     [\n       {                          // 第一条日志消息\n         \"time\": 1234,    // 日志的时间戳，long型的毫秒数\n         \"type\": -1,         // 日志类型，-1:DEBUG，-2:INFO，-4:ERROR\n         \"text\": “abcd\"   // 日志消息\n       },\n       ...\n     ]\n     **/\n]","code":"var res = $.request('rewin.ubsi.script', 'testScript', name, params);\n$.result(res);","name":"script.admin.testScript","updateTime":{"$t":"long","$v":1632960762642},"params":[{"name":"name","type":3,"desc":"脚本名字"},{"name":"params","type":3,"desc":"脚本参数，JSON字符串，可以为null或{...}"}],"desc":"测试脚本","status":0,"tags":["read"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"622961a5c11bf37ca0451d80","code":"var _fields = fields == null ? null : Packages.rewin.ubsi.common.Util.toSet(fields.toArray);\nvar res = $.request('rewin.user.session', 'get', session,domain,_fields);\n/*if(res != null && res.length>0){\n  \tvar userId = Packages.rewin.ubsi.common.Util.toSet(res[0]);\n\tvar userRes = $.request('rewin.common.user', 'getUser', userId);\n  \tif(userRes != null && userRes.length > 0){\n    \tvar userObj = userRes[0];\n      \tvar nodes = Packages.rewin.ubsi.common.Util.toSet(userObj.get(\"roles\").toArray);\n      $.info(nodes);\n      $.info(domain);\n      \tvar roleRes = $.request('rewin.common.user', 'getRoles',nodes ,domain);\n      \t$.info(roleRes);\n    }\n  \n}*/\n$.result(res);","desc":"获得会话数据","name":"session.admin.get","params":[{"desc":"会话ID","name":"session","type":3},{"desc":"\"数据域\" 或 \"应用\"","name":"domain","type":3},{"desc":"数据项的KEY，null表示全部","name":"fields","type":4}],"status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1656647137180}}
++:{"_id":"62ba80047930595a0b43b0ce","code":"var res = $.request('rewin.user.session', 'close', session,domain);","desc":"关闭会话","name":"session.admin.close","params":[{"desc":"sessionId","name":"session","type":3},{"desc":"数据域或应用","name":"domain","type":3}],"status":0,"tags":["exec","cxx"],"updateTime":{"$t":"long","$v":1656389794203}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6153dd71256a466f2e2f643f","result":"无","code":"var jdata = Packages.rewin.ubsi.common.JsonCodec.fromJson(data);\n$.info(jdata)\n$.throwEvent(event, jdata);\n","name":"system.throwEvent","updateTime":{"$t":"long","$v":1642759769506},"params":[{"name":"event","type":3,"desc":"事件类型ID"},{"name":"data","type":3,"desc":"事件数据，格式为UBSI-JSON编码的字符串"}],"desc":"发送一个事件","status":0,"tags":["exec"]}
++:{"_id":"6154f0ee256a466f2e2f7077","result":"list，事件列表，格式：\n[\n  第一个事件的数据,\n  ...\n]","code":"var list = Packages.rewin.ubsi.common.JedisUtil.lookEvent(event);\n$.result(list);","name":"system.lookEvent","updateTime":{"$t":"long","$v":1643005353476},"params":[{"name":"event","type":3,"desc":"事件类型ID"}],"desc":"查看待处理的事件","status":0,"tags":["read"]}
++:{"_id":"6154f11b256a466f2e2f7083","result":"是否成功执行","code":"Packages.rewin.ubsi.common.JedisUtil.clearEvent(event);\n$.result(true);","name":"system.clearEvent","updateTime":{"$t":"long","$v":1642766993081},"params":[{"name":"event","type":3,"desc":"事件类型ID"}],"desc":"清除待处理的事件","status":0,"tags":["write"]}
++:{"_id":"_uuid","result":"string，全局唯一ID","code":"var res = Packages.rewin.ubsi.common.Util.getUUID();\n$.result(res);","name":"system.uuid","updateTime":{"$t":"long","$v":1650425572132},"desc":"获得全局唯一ID","status":0,"tags":["read"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"625cc6f1d2c42816264efdd7","code":"var _services = services == null ? null : new Packages.java.util.HashSet(services);\nvar _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res=$.request(\"rewin.ubsi.tester\", \"listFCase\", name, _services, _tags, skip, limit);\n$.result(res);","name":"tester.admin.listFCase","updateTime":{"$t":"long","$v":1650247871110},"params":[{"name":"name","type":3,"desc":"名字(模糊查询)，null表示不限"},{"name":"services","type":4,"desc":"包含的微服务名字，null表示不限"},{"name":"tags","type":4,"desc":"标签，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"功能测试-测试用例-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"625cd133d2c42816264f14ca","code":"var res = $.request(\"rewin.ubsi.tester\", \"listTags\");\n$.result(res);","name":"tester.admin.listTags","updateTime":{"$t":"long","$v":1650250076253},"desc":"测试管理-获得所有标签的列表","status":0,"tags":["read","xxz"]}
++:{"_id":"625cf564d2c42816264fc2ae","code":"var res = $.request(\"rewin.ubsi.tester\", \"delFCase\",id,force);\n$.result(res);","name":"tester.admin.delFCase","updateTime":{"$t":"long","$v":1650259358713},"params":[{"name":"id","type":2,"desc":"用例ID"},{"name":"force","type":1,"desc":"是否强制删除"}],"desc":"测试管理-功能测试-测试用例-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"625cf749d2c42816264fde99","code":"var _services = services == null ? null : new Packages.java.util.HashSet(services);\nvar _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res = $.request(\"rewin.ubsi.tester\", \"listFCase\", name, null, null, 0, 0);\nvar total=res[0];\n$.info(\"total:\"+total);\nif(total>0){\n   $.result(2);\n}else{\n  var ress=$.request(\"rewin.ubsi.tester\", \"addFCase\", name, tips, _services, _tags, script);\n}","name":"tester.admin.addFCase","updateTime":{"$t":"long","$v":1650260102462},"params":[{"name":"name","type":3,"desc":"用例名字"},{"name":"tips","type":3,"desc":"用例说明"},{"name":"services","type":4,"desc":"访问的微服务名字"},{"name":"tags","type":4,"desc":"标签"},{"name":"script","type":3,"desc":"JavaScript脚本"}],"desc":"测试管理-功能测试- 用例管理-增加","status":0,"tags":["write","xxz"]}
++:{"_id":"625cf96cd2c42816264ff393","code":"var _services = services == null ? null : new Packages.java.util.HashSet(services);\nvar _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res =$.request(\"rewin.ubsi.tester\", \"setFCase\", id, name, tips, _services, _tags, script);","name":"tester.admin.setFCase","updateTime":{"$t":"long","$v":1650260512457},"params":[{"name":"id","type":2,"desc":"用例ID"},{"name":"name","type":3,"desc":"用例名字，null表示不修改"},{"name":"tips","type":3,"desc":"用例说明，null表示不修改"},{"name":"services","type":4,"desc":"访问的微服务名字，null表示不修改"},{"name":"tags","type":4,"desc":"标签，null表示不修改"},{"name":"script","type":3,"desc":"JavaScript脚本，null表示不修改"}],"desc":"测试管理-功能测试-用例测试-修改","status":0,"tags":["write","xxz"]}
++:{"_id":"625cfb31d2c42816265012da","code":"var res = $.request(\"rewin.ubsi.tester\", \"runScript\", script, target);\n$.result(res);","name":"tester.admin.runScript","updateTime":{"$t":"long","$v":1650269304060},"params":[{"name":"script","type":3,"desc":"JavaScript脚本"},{"name":"target","type":3,"desc":"目标容器，格式：host#port，\"\"表示路由模式"}],"desc":"测试管理-功能测试-用例测试-运行脚本","status":0,"tags":["write","xxz"]}
++:{"_id":"625cfe75d2c428162650249f","code":"$.info(cid);\nvar _cid= cid === 0 ? null : cid;\n$.info(\"_cid:\"+_cid);\nvar _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res = $.request(\"rewin.ubsi.tester\", \"listFTask\",_cid, name, _tags, skip, limit);\n$.info(res);\nif(res[0] > 0){\n  var listFTask = new Packages.java.util.ArrayList(res[1]);\n  var listFTaskCaseName =new Packages.java.util.ArrayList();\n  for(var x=0;x<listFTask.size();x++){\n    var ftask= new Packages.java.util.HashMap(listFTask.get(x));\n    $.info(\"ftask:\"+ftask);\n    var casenames = new Packages.java.util.ArrayList();\n    var fcase = new Packages.java.util.ArrayList();\n    $.info(\"dddd:\"+ftask.get(\"cases\"));\n    if(null!=ftask.get(\"cases\")) {\n      //var cases=new Packages.java.util.ArrayList(ftask.get(\"cases\"));\n      var cases=ftask.get(\"cases\");\n      $.info(\"cases:\"+cases);\n      for (var y = 0; y < cases.size(); y++) {\n        $.info(\"cases:\"+cases[y]);\n        var caseid=new Packages.java.util.HashSet();\n        caseid.add(cases[y]);\n        var r_case=$.request(\"rewin.ubsi.tester\", \"getFCase\", caseid);\n        $.info(\"r_case:\"+r_case);\n        if( r_case.size() > 0){\n          var _case=new Packages.java.util.HashMap(r_case.get(0));\n          casenames.add(_case.get(\"name\").toString());\n          fcase.add(_case);\n        }\n      }\n    }\n    ftask.put(\"casenames\",casenames);\n    ftask.put(\"fcase\",fcase);\n    listFTaskCaseName.add(ftask);\n  }\n  res[1]=listFTaskCaseName;\n}\n$.result(res);","desc":"测试管理-功能测试-测试任务-查询","name":"tester.admin.listFTask","params":[{"desc":"包含的用例ID，null表示不限","name":"cid","type":2},{"desc":"名字(模糊查询)，null表示不限","name":"name","type":3},{"desc":"标签，null表示不限","name":"tags","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1655277770835}}
++:{"_id":"625d0f55d2c4281626502e5f","code":"var res = $.request(\"rewin.ubsi.tester\", \"delFRun\",id,force);\n$.result(res);","name":"tester.admin.delFRun","updateTime":{"$t":"long","$v":1650266802143},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"froce","type":1,"desc":"是否强制删除"}],"desc":"测试管理-功能测试-任务测试-删除一个功能测试任务的运行实例","status":0,"tags":["write","xxz"]}
++:{"_id":"625d106ad2c4281626502ee4","code":"var _tid= tid === 0 ? null : tid;\nvar _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res = $.request(\"rewin.ubsi.tester\", \"listFRun\", _tid, _tags, skip, limit);\n$.result(res);","name":"tester.admin.listFRun","updateTime":{"$t":"long","$v":1650271907695},"params":[{"name":"tid","type":2,"desc":"测试任务ID，null表示不限"},{"name":"tags","type":4,"desc":"标签，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"查询功能测试任务的运行实例，按照time0降序排列","status":0,"tags":["read","xxz"]}
++:{"_id":"625d1264d2c4281626502fe2","code":"var res = $.request(\"rewin.ubsi.tester\", \"delFTask\",id,force);\n$.result(res);","name":"tester.admin.delFTask","updateTime":{"$t":"long","$v":1650266771572},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"force","type":1,"desc":"是否强制删除"}],"desc":"测试管理-功能测试-任务测试-删除测试任务","status":0,"tags":["write","xxz"]}
++:{"_id":"625d15ebd2c4281626503173","code":"var _cids= cids == null ? null : new Packages.java.util.ArrayList(cids);\nvar _tags= tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res = $.request(\"rewin.ubsi.tester\", \"listFTask\",null, name, null, 0, 0);\n$.info(res);\nif(res[0] > 0){\n  $.result(2);\n}else{\n  var ress=$.request(\"rewin.ubsi.tester\", \"addFTask\", name, tips, _cids, _tags, target, prepare);\n}","desc":"测试管理-功能测试-测试任务-增加任务","name":"tester.admin.addFTask","params":[{"desc":"任务名字","name":"name","type":3},{"desc":"任务说明","name":"tips","type":3},{"desc":"包含的用例ID","name":"cids","type":4},{"desc":"标签","name":"tags","type":4},{"desc":"目标容器，\"\"表示router模式，\"host#port\"表示direct模式","name":"target","type":3},{"desc":"准备的JavaScript脚本","name":"prepare","type":3}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1655276647407}}
++:{"_id":"625d196dd2c4281626503409","code":"var _cids= cids == null ? null : new Packages.java.util.ArrayList(cids);\nvar _tags= tags == null ? null : new Packages.java.util.HashSet(tags);\nvar ress=$.request(\"rewin.ubsi.tester\", \"setFTask\", id,name, tips, _cids, _tags, target, prepare);\n","desc":"测试管理-功能测试-任务测试-修改","name":"tester.admin.setFTask","params":[{"desc":"-2033053139","name":"id","type":2},{"desc":"任务名字，null表示不修改","name":"name","type":3},{"desc":"任务说明，null表示不修改","name":"tips","type":3},{"desc":"包含的用例ID，null表示不修改","name":"cids","type":4},{"desc":"标签，null表示不修改","name":"tags","type":4},{"desc":"目标容器，null表示不修改","name":"target","type":3},{"desc":"准备的JavaScript脚本，null表示不修改","name":"prepare","type":3}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1655286454212}}
++:{"_id":"625d1f84d2c4281626503c28","code":"var res= $.request(\"rewin.ubsi.tester\", \"runFTask\", id, target);","name":"tester.admin.runFTask","updateTime":{"$t":"long","$v":1650270143148},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"target","type":3,"desc":"目标容器，格式：host#port，\"\"表示路由模式，null表示使用缺省值\t\n"}],"desc":"功能测试-测试任务-运行一个功能测试任务","status":0,"tags":["write","xxz"]}
++:{"_id":"625d21e7d2c4281626503e6d","code":"var res = $.request(\"rewin.ubsi.tester\", \"getFResult\", rid);\n$.result(res);","name":"tester.admin.getFResult","updateTime":{"$t":"long","$v":1650270773094},"params":[{"name":"rid","type":2,"desc":"测试任务的实例ID"}],"desc":"查询功能测试任务的执行结果，按照time0升序序排列","status":0,"tags":["read","xxz"]}
++:{"_id":"625e4c89d2c428162650c9d2","code":"var _services= services == null ? null : new Packages.java.util.HashSet(services);\nvar _tags= tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res=$.request(\"rewin.ubsi.tester\", \"listPCase\", _services, _tags, skip, limit);\n$.info(\"res:\"+res);\nif(null!=entry) {\n  var _listPCase=new Packages.java.util.ArrayList();\n  if(res[0] > 0){\n    var listPCase=new Packages.java.util.ArrayList(res[1]);\n    for (var i = 0; i <listPCase.size() ; i++) {\n      var pcase = new Packages.java.util.HashMap(listPCase.get(i));\n      var pcaseentry=pcase.get(\"entry\").toString();\n      $.info(\"pcaseentry:\"+pcaseentry);\n      if(pcaseentry.indexOf(entry)!=-1){\n        _listPCase.add(pcase);\n      }\n    }\n    res[0] =_listPCase.size();\n    res[1] = _listPCase;\n  }\n}\n$.result(res);","name":"tester.admin.listPCase","updateTime":{"$t":"long","$v":1650423381098},"params":[{"name":"entry","type":3,"desc":"接口名,支持模糊查询"},{"name":"services","type":4,"desc":"微服务名字，null表示不限"},{"name":"tags","type":4,"desc":"标签，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"测试管理-性能测试-用例管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"625e54d7d2c428162650f107","code":"var res = $.request(\"rewin.ubsi.tester\", \"delPCase\",id,force);\n$.result(res);","name":"tester.admin.delPCase","updateTime":{"$t":"long","$v":1650349305762},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"force","type":1,"desc":"是否强制删除"}],"desc":"测试管理-性能测试-用例管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"625e566dd2c4281626510962","code":"var _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res =$.request(\"rewin.ubsi.tester\", \"addPCase\", service, entry, params, _tags, tips);","name":"tester.admin.addPCase","updateTime":{"$t":"long","$v":1650349913641},"params":[{"name":"service","type":3,"desc":"微服务名字"},{"name":"entry","type":3,"desc":"service"},{"name":"params","type":4,"desc":"参数列表，每个参数用一个XML字符串表示"},{"name":"tags","type":4,"desc":"标签"},{"name":"tips","type":3,"desc":"用例说明"}],"desc":"测试管理-性能测试-用例管理-增加测试用例","status":0,"tags":["write","xxz"]}
++:{"_id":"625e5f60d2c4281626513ee0","code":"var _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res =$.request(\"rewin.ubsi.tester\", \"setPCase\", id,service,entry, params, _tags, tips);","name":"tester.admin.setPCase","updateTime":{"$t":"long","$v":1650352151625},"params":[{"name":"id","type":2,"desc":"用例ID"},{"name":"service","type":3,"desc":"服务名字，null表示不修改"},{"name":"entry","type":3,"desc":"方法名字，null表示不修改"},{"name":"params","type":4,"desc":"参数列表，null表示不修改"},{"name":"tags","type":4,"desc":"标签，null表示不修改"},{"name":"tips","type":3,"desc":"用例说明，null表示不修改"}],"desc":"测试管理-性能测试-用例测试-详情修改","status":0,"tags":["write","xxz"]}
++:{"_id":"625e659ed2c4281626515187","code":"var res = $.request(\"rewin.ubsi.tester\", \"runPCase\", id);\n$.result(res);","name":"tester.admin.runPCase","updateTime":{"$t":"long","$v":1650353676130},"params":[{"name":"id","type":2,"desc":"任务ID"}],"desc":"测试管理-性能测试-用例管理-运行测试脚本","status":0,"tags":["write","xxz"]}
++:{"_id":"625f6344d2c4281626516ad9","code":"var _cid= cid === 0 ? null : cid;\nvar _tags= tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res=$.request(\"rewin.ubsi.tester\", \"listPTask\", _cid,name, _tags, skip, limit);\nif(res[0]>0){\n  var listPTask= new Packages.java.util.ArrayList(res[1]);\n  var listPTaskCaseName = new Packages.java.util.ArrayList();\n  for (var x = 0; x < listPTask.size(); x++) {\n    var ptask= new Packages.java.util.HashMap(listPTask.get(x));\n    var casenames = new Packages.java.util.ArrayList();\n    var pcase = new Packages.java.util.ArrayList();\n    if(null!=ptask.get(\"cases\")) {\n      var cases =new Packages.java.util.ArrayList(ptask.get(\"cases\"));\n      $.info(cases);\n      for (var y = 0; y < cases.length; y++) {\n        var caseid = new Packages.java.util.HashSet();\n        caseid.add(cases[y]);\n        var r_case =$.request(\"rewin.ubsi.tester\", \"getPCase\", caseid);\n        if(r_case.size() > 0) {\n          var _case = new Packages.java.util.HashMap(r_case.get(0));\n          casenames.add(_case.get(\"service\").toString()+\".\"+_case.get(\"entry\").toString());\n          pcase.add(_case);\n        }\n      }\n    }\n    ptask.put(\"caseentrys\",casenames);\n    ptask.put(\"pcase\",pcase);\n    listPTaskCaseName.add(ptask);\n  }\n  res[1]=listPTaskCaseName;\n}\n$.result(res);","name":"tester.admin.listPTask","updateTime":{"$t":"long","$v":1650438105235},"params":[{"name":"cid","type":2,"desc":"包含的用例ID，null表示不限"},{"name":"name","type":3,"desc":"名字(模糊查询)，null表示不限"},{"name":"tags","type":4,"desc":"标签，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"测试管理-性能测试-任务管理-查询列表","status":0,"tags":["read","xxz"]}
++:{"_id":"625f95f7d2c428162651a333","code":"var _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar  res = $.request(\"rewin.ubsi.tester\", \"listPTask\",null, name, null, 0, 0);\nif(res[0] > 0){\n  $.result(2);\n}else{\n  var ress=$.request(\"rewin.ubsi.tester\", \"addPTask\", name, tips, cids, _tags, threads, period, prepare);\n  $.result(ress);\n}\n","name":"tester.admin.addPTask","updateTime":{"$t":"long","$v":1650431803883},"params":[{"name":"name","type":3,"desc":"任务名字"},{"name":"tips","type":3,"desc":"任务说明"},{"name":"cids","type":4,"desc":"包含的用例ID"},{"name":"tags","type":4,"desc":"标签"},{"name":"threads","type":2,"desc":"线程数量"},{"name":"period","type":2,"desc":"每线程的执行时间（秒数）"},{"name":"prepare","type":3,"desc":"准备的JavaScript脚本"}],"desc":"测试管理-性能测试-任务管理-增加任务管理","status":0,"tags":["write","xxz"]}
++:{"_id":"625f99e4d2c428162651ab48","code":"var _tags = tags == null ? null : new Packages.java.util.HashSet(tags);\nvar res=$.request(\"rewin.ubsi.tester\", \"setPTask\", id, name, tips, cids, _tags, threads, period, prepare);\n$.result(res);","name":"tester.admin.setPTask","updateTime":{"$t":"long","$v":1650432696958},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"name","type":3,"desc":"任务名字，null表示不修改"},{"name":"tips","type":3,"desc":"任务说明，null表示不修改"},{"name":"cids","type":4,"desc":"包含的用例ID，null表示不修改"},{"name":"tags","type":4,"desc":"标签，null表示不修改"},{"name":"threads","type":3,"desc":"线程数量，null表示不修改"},{"name":"period","type":3,"desc":"每线程的执行时间（秒数），null表示不修改"},{"name":"prepare","type":3,"desc":"准备的JavaScript脚本，null表示不修改"}],"desc":"测试管理-性能测试-任务管理-详情修改","status":0,"tags":["write","xxz"]}
++:{"_id":"625fa003d2c428162651adea","code":"var res =$.request(\"rewin.ubsi.tester\", \"runPTask\", id, threads, period);\n$.result(res);","name":"tester.admin.runPTask","updateTime":{"$t":"long","$v":1650434144150},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"threads","type":2,"desc":"目线程数量，null表示不修改"},{"name":"period","type":2,"desc":"每线程的执行时间（秒数），null表示不修改"}],"desc":"测试任务-性能测试-任务管理-启动","status":0,"tags":["write","xxz"]}
++:{"_id":"625fa276d2c4281626523292","code":"var res =$.request(\"rewin.ubsi.tester\", \"delPTask\", id, force);\n$.result(res);","name":"tester.admin.delPTask","updateTime":{"$t":"long","$v":1650434743584},"params":[{"name":"id","type":2,"desc":"用例ID"},{"name":"force","type":1,"desc":"是否强制删除"}],"desc":"测试管理-性能测试-任务管理-删除","status":0,"tags":["write","xxz"]}
++:{"_id":"625fa3b6d2c42816265232e6","code":"var _tags= tags == null ? null : new Packages.java.util.HashSet(tags);\nvar _tid = tid===0 ? null : tid\nvar res=$.request(\"rewin.ubsi.tester\", \"listPRun\", _tid, _tags, skip, limit);\nif(null!=tname) {\n  var _listPRun =new Packages.java.util.ArrayList();\n  if(res[0] > 0){\n    var listPRun = new Packages.java.util.ArrayList(res[1]);\n    for (var i = 0; i <listPRun.size() ; i++) {\n      var prun = new Packages.java.util.HashMap(listPRun.get(i));\n      if(prun.get(\"tname\").toString().indexOf(tname)!=-1){\n        _listPRun.add(prun);\n      }\n    }\n    res[0] =_listPRun.size();\n    res[1] = _listPRun;\n  }\n}\n$.result(res);","name":"tester.admin.listPRun","updateTime":{"$t":"long","$v":1650436718051},"params":[{"name":"tid","type":2,"desc":"测试任务ID，null表示不限"},{"name":"tname","type":3,"desc":"任务名，null表示不限"},{"name":"tags","type":4,"desc":"标签，null表示不限"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"测试管理-性能测试-测试结果-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"625fa76fd2c42816265233f3","code":"var res=$.request(\"rewin.ubsi.tester\", \"delPRun\", id, force);\n$.result(res);","name":"tester.admin.delPRun","updateTime":{"$t":"long","$v":1650436154283},"params":[{"name":"id","type":2,"desc":"任务ID"},{"name":"force","type":1,"desc":"是否强制删除"}],"desc":"测试管理-性能测试-测试结果-删除一个性能测试任务的运行实例","status":0,"tags":["write","xxz"]}
++:{"_id":"625faf39d2c428162652c1f4","code":"var res =$.request(\"rewin.ubsi.tester\", \"getPResult\", rid);\n$.result(res);","name":"tester.admin.getPResult","updateTime":{"$t":"long","$v":1650437997569},"params":[{"name":"rid","type":2,"desc":"测试任务的实例ID"}],"desc":"测试管理-性能测试-结果查询-详情","status":0,"tags":["read","xxz"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"61f25de61aa1ef7d1e306ed4","code":"var res = $.request(\"rewin.ubsi.transaction\", \"listTrans\", group, name, status, sortby, skip, limit);\n$.result(res);","desc":"事务的列表查询","name":"transaction.admin.listTrans","params":[{"desc":"事务分组(模糊查询)，null表示不限","name":"group","type":3},{"desc":"事务名字(模糊查询)，null表示不限","name":"name","type":3},{"desc":"事务状态，null:不限，0:未结束，>0:已结束，<0:非正常结束","name":"status","type":2},{"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]","name":"sortby","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"result":"结果描述：[ 总数量(long), 事务(DB.Transaction)的列表(List<Map>) ]\n\n每个事务的属性：{\n\t\t\"_id\": \"java.lang.String, 全局事务ID，自动\",\n\t\t\"group\": \"java.lang.String, 事务分组\",\n\t\t\"name\": \"java.lang.String, 事务名字\",\n\t\t\"timeout\": \"int, 超时时间，秒数\",\n\t\t\"createTime\": \"long, 创建时间\",\n\t\t\"stage\": \"int, 事务阶段, 0:Try, 1:Confirm, -1:Cancel, -2:超时, -3:终止\",\n\t\t\"stageTime\": \"long, 阶段时间\",\n\t\t\"status\": \"int, 事务状态, 0:未结束, 1:成功, -1:失败\"\n\t\t\"lastTime\": \"long, 上次动作时间\",\n}","status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1652940788377}}
++:{"_id":"61f25e1d1aa1ef7d1e306edf","result":"结果描述：[ 总数量(long), 分支事务(DB.Branch)的列表(List<Map>) ]\n\n每条分支事务的属性：{\n\t\t\"_id\": \"java.lang.String, 分支事务ID，自动\",\n\t\t\"txid\": \"java.lang.String, 全局事务ID\",\n\t\t\"initiator\": \"java.lang.String, 事务发起者，如果是UBSI微服务，格式为：ubsi://container_host#port/service/entry\",\n\t\t\"data\": \"java.lang.Object, 数据，如果是UBSI微服务，格式为：[ ReqID, { header }, [ entryAndParams ] ]\",\n\t\t\"submit\": \"int, Confirm/Cancel提交点, 0:不限, 1:发起者, -1:无须提交\",\n\t\t\"compensation\": \"java.lang.Object, 提交失败时的补偿方式, [ CONFIRM, CANCEL ], 0:不能补偿, 1:仅补偿提交动作, 2:可以重新发起事务(事务接口必须是幂等的, 仅对CONFIRM有效)\",\n\t\t\"createTime\": \"long, 创建时间\",\n\t\t\"stage\": \"int, 事务阶段, 0:Try, 1:Confirm, -1:Cancel, -2:超时, -3:终止\",\n\t\t\"stageTime\": \"long, 阶段时间\",\n\t\t\"status\": \"int, 事务状态, 0:未结束, 1:成功, -1:失败\"\n\t\t\"error\": \"java.lang.String, 错误信息\",\n}","code":"var res = $.request(\"rewin.ubsi.transaction\", \"listBranch\", txid, initiator, status, sortby, skip, limit);\n$.result(res);","name":"transaction.admin.listBranch","updateTime":{"$t":"long","$v":1646380599797},"params":[{"name":"txid","type":3,"desc":"全局事务ID，null表示不限"},{"name":"initiator","type":3,"desc":"事务发起者(模糊查询)，null表示不限"},{"name":"status","type":2,"desc":"事务状态，null:不限，0:未结束，>0:已结束，<0:非正常结束"},{"name":"sortby","type":4,"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"分支事务的列表查询","status":0,"tags":["read"]}
++:{"_id":"61f25e471aa1ef7d1e306eea","result":"null","code":"$.request(\"rewin.ubsi.transaction\", \"delete\", txid);","name":"transaction.admin.deleteTS","updateTime":{"$t":"long","$v":1646376352269},"params":[{"name":"txid","type":3,"desc":""}],"desc":"删除全局事务","status":0,"tags":["write"]}
++:{"_id":"61f25e711aa1ef7d1e306eee","result":"结果类型：boolean ，结果描述：是否成功","code":"var res = $.request(\"rewin.ubsi.transaction\", \"stop\", txid);\n$.result(res);","name":"transaction.admin.stop","updateTime":{"$t":"long","$v":1643275182017},"params":[{"name":"txid","type":0,"desc":"全局事务ID"}],"desc":"终止一个全局事务","status":0,"tags":["exec"]}
++:{"_id":"620cc5cc91242160f0161115","result":"无","code":"$.request(\"rewin.ubsi.transaction\", \"retry\", id);\n","name":"transaction.admin.retry","updateTime":{"$t":"long","$v":1646632085314},"params":[{"name":"id","type":3,"desc":"分支事务ID"}],"desc":"分支事务提交重试","status":0,"tags":["exec"]}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"6232e9c3c11bf37ca05c7a88","code":"$.request('rewin.ubsi.admin','addRoleUser',roleID,userID,domain);\n","name":"ubsi.admin.addRoleUser","updateTime":{"$t":"long","$v":1650528982134},"params":[{"name":"roleID","type":3,"desc":"角色节点ID"},{"name":"userID","type":0,"desc":"用户ID，多个,相隔"},{"name":"domain","type":3,"desc":"数据域"}],"desc":"系统管理-角色管理-修改角色成员","status":0,"tags":["write"]}
++:{"_id":"6232f51cc11bf37ca05c7e7f","code":"$.request('rewin.ubsi.admin','getRoleTree',tags,depth,name,domain);","desc":"系统管理-角色管理-查询角色列表","name":"ubsi.admin.getRoleTree","params":[{"desc":"角色的标签，null表示不限","name":"tags","type":3},{"desc":"子节点的深度","name":"depth","type":2},{"desc":"角色的名字(模糊匹配)，null表示不限","name":"name","type":3},{"desc":"数据域","name":"domain","type":3}],"status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1652855581472}}
++:{"_id":"623437f4c11bf37ca05cacbd","code":"$.request('rewin.ubsi.admin','setAcl',aclId,value,actions,roles,domain);","name":"ubsi.admin.setAcl","updateTime":{"$t":"long","$v":1650336678993},"params":[{"name":"aclId","type":3,"desc":"菜单节点ID,多个值用，相隔"},{"name":"value","type":2,"desc":"授权 0：true 1：false"},{"name":"actions","type":3,"desc":"动作 0只读 1只写 2读写"},{"name":"roles","type":3,"desc":"角色的节点ID，多个值用，相隔"},{"name":"domain","type":3,"desc":"数据域"}],"desc":"系统管理-权限管理-根据角色修改权限菜单树","status":0,"tags":["write"]}
++:{"_id":"62343984c11bf37ca05cace5","code":"$.request('rewin.ubsi.admin','listAclByTargetIdOrRoleId',targetIds,roles,domain);","desc":"系统管理-权限管理-根据菜单节点Id查询角色/根据角色Id查询树状","name":"ubsi.admin.listAclByTargetIdOrRoleId","params":[{"desc":"菜单节点ID","name":"targetIds","type":3},{"desc":"角色的节点ID，多个值用，相隔","name":"roles","type":3},{"desc":"数据域","name":"domain","type":3}],"status":0,"tags":["read"],"updateTime":{"$t":"long","$v":1659942441416}}
++:{"_id":"62343b72c11bf37ca05cae7b","code":"$.request('rewin.ubsi.admin','addAcl',targetId,roles,actions,value,domain,targetType);","name":"ubsi.admin.addAcl","updateTime":{"$t":"long","$v":1650336704836},"params":[{"name":"targetId","type":3,"desc":"目标对象Id"},{"name":"roles","type":3,"desc":"角色的节点ID，多个值用，相隔"},{"name":"actions","type":3,"desc":"动作 0只读 1只写 2读写"},{"name":"value","type":2,"desc":"授权 0：true 1：false"},{"name":"domain","type":3,"desc":"数据域"},{"name":"targetType","type":3,"desc":"目标对象分类"}],"desc":"系统管理-权限管理-新增Acl数据项","status":0,"tags":["write"]}
++:{"_id":"6264b71fe43f5d61d3ccd592","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"serviceAggregate\",filterId,type,_StartTime,_EndTime,ServiceName,entry);\n$.result(res);\n","name":"ubsi.admin.serviceAggregate","updateTime":{"$t":"long","$v":1650769133841},"params":[{"name":"filterId","type":3,"desc":"过滤器ID，可以为null"},{"name":"type","type":2,"desc":"请求次数：1 失败统计：2"},{"name":"StartTime","type":2,"desc":"开始时间戳(可以为null)"},{"name":"EndTime","type":2,"desc":"结束时间戳(可以为null)"},{"name":"ServiceName","type":3,"desc":"服务名(多个服务名以,号连接)"},{"name":"entry","type":3,"desc":"接口名称(多个接口名称以,号连接)"}],"desc":"日志分析-服务访问日志=聚合查询","status":0,"tags":["read","xxz"]}
++:{"_id":"6264de1ae43f5d61d3cd0e7e","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"findLogList\",_StartTime,_EndTime,filterId,sort,fields,skip,limit,ServiceName,entry,type,reqID);\n$.result(res);\n","name":"ubsi.admin.findLogList","updateTime":{"$t":"long","$v":1650778957773},"params":[{"name":"StartTime","type":2,"desc":"开始时间戳(可以为null)"},{"name":"EndTime","type":2,"desc":"结束时间戳(可以为null)"},{"name":"filterId","type":3,"desc":"过滤器ID，可以为null"},{"name":"sort","type":4,"desc":"排序方式(MongoDB语法)，可以为null"},{"name":"fields","type":3,"desc":"返回的字段(MongoDB语法)，可以为null"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"},{"name":"ServiceName","type":3,"desc":"服务名(多个服务名以,号连接)"},{"name":"entry","type":3,"desc":"接口名称(多个接口名称以,号连接)"},{"name":"type","type":2,"desc":"1:所有，2:失败"},{"name":"reqID","type":3,"desc":"请求ID"}],"desc":"日志分析-服务访问日志-服务日志列表","status":0,"tags":["read","xxz"]}
++:{"_id":"6264fe0ce43f5d61d3cdb062","code":"$.timeout(0);\nvar res = $.request(\"rewin.ubsi.admin\",\"trackLogDetailsParentId\",filterId,reqId,sort,fields);\n$.result(res);","desc":"日志分析-服务访问日志-日志跟踪-获取跟节点","name":"ubsi.admin.trackLogDetailsParentId","params":[{"desc":"过滤器ID，可以为null","name":"filterId","type":3},{"desc":"请求ID","name":"reqId","type":3},{"desc":"排序方式(MongoDB语法)，可以为null","name":"sort","type":4},{"desc":"返回的字段(MongoDB语法)，可以为null","name":"fields","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1654050074794}}
++:{"_id":"62650278e43f5d61d3cde463","code":"var res = $.request(\"rewin.ubsi.admin\",\"log\",filterId,reqId,sort,fields);\n$.result(res);","name":"ubsi.admin.log","updateTime":{"$t":"long","$v":1650787237707},"params":[{"name":"filterId","type":3,"desc":"过滤器ID，可以为null"},{"name":"reqId","type":3,"desc":"请求ID"},{"name":"sort","type":4,"desc":"排序方式(MongoDB语法)，可以为null"},{"name":"fields","type":3,"desc":"返回的字段(MongoDB语法)，可以为null"}],"desc":"日志分析-服务访问日志-日志跟踪详情查询","status":0,"tags":["read","xxz"]}
++:{"_id":"626632bbe43f5d61d3cee2f0","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"continerAggregate\",filterId,type,_StartTime,_EndTime,RqName);\n$.result(res);","name":"ubsi.admin.continerAggregate","updateTime":{"$t":"long","$v":1650865261535},"params":[{"name":"filterId","type":3,"desc":"过滤器ID，可以为null"},{"name":"type","type":2,"desc":"请求次数：1 失败统计：2"},{"name":"StartTime","type":2,"desc":"开始时间戳"},{"name":"EndTime","type":2,"desc":"结束时间戳"},{"name":"RqName","type":3,"desc":"容器名(多个容器名以,号连接)"}],"desc":"日志分析-服务访问日志-容器日志查询","status":0,"tags":["read","xxz"]}
++:{"_id":"62663b12e43f5d61d3cf2ce9","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"webAppAggregate\",filterId,type,_StartTime,_EndTime,WebApp);\n$.result(res);","name":"ubsi.admin.webAppAggregate","updateTime":{"$t":"long","$v":1650867199545},"params":[{"name":"filterId","type":3,"desc":"过滤器ID，可以为null"},{"name":"type","type":2,"desc":"请求次数：1 失败统计：2"},{"name":"StartTime","type":2,"desc":"开始时间戳"},{"name":"EndTime","type":2,"desc":"结束时间戳"},{"name":"WebApp","type":3,"desc":"WebApp"}],"desc":"日志分析-服务访问日志-webapp日志查询","status":0,"tags":["read","xxz"]}
++:{"_id":"626650b3e43f5d61d3cf5649","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"findWebappLogList\",_StartTime,_EndTime,filterId,sort,fields,skip,limit,Webapp,type,reqID);\n$.result(res);\n","desc":"日志分析-服务访问日志-webapp日志列表","name":"ubsi.admin.findWebappLogList","params":[{"desc":"开始时间戳(可以为null)","name":"StartTime","type":2},{"desc":"结束时间戳(可以为null)","name":"EndTime","type":2},{"desc":"过滤器ID，可以为null","name":"filterId","type":3},{"desc":"排序方式(MongoDB语法)，可以为null","name":"sort","type":4},{"desc":"返回的字段(MongoDB语法)，可以为null","name":"fields","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2},{"desc":"Webapp(多个以,号连接)","name":"Webapp","type":3},{"desc":"1:所有，2:失败","name":"type","type":2},{"desc":"请求ID","name":"reqID","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1653362564039}}
++:{"_id":"626650b3e43f5d61d43f5649","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"findContainerLogList\",_StartTime,_EndTime,filterId,sort,fields,skip,limit,Container,type,reqID);\n$.result(res);\n","desc":"日志分析-服务访问日志-容器日志列表","name":"ubsi.admin.findContainerLogList","params":[{"desc":"开始时间戳(可以为null)","name":"StartTime","type":2},{"desc":"结束时间戳(可以为null)","name":"EndTime","type":2},{"desc":"过滤器ID，可以为null","name":"filterId","type":3},{"desc":"排序方式(MongoDB语法)，可以为null","name":"sort","type":4},{"desc":"返回的字段(MongoDB语法)，可以为null","name":"fields","type":3},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2},{"desc":"Container(多个以,号连接)","name":"Container","type":3},{"desc":"1:所有，2:失败","name":"type","type":2},{"desc":"请求ID","name":"reqID","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1653362315709}}
++:{"_id":"62665761e43f5d61d3cfa55a","code":"var _StartTime=$._long(StartTime);\n$.info(\"_StartTime:\"+_StartTime);\nvar _EndTime=$._long(EndTime);\n$.info(\"_EndTime:\"+_EndTime);\nvar res=$.request(\"rewin.ubsi.admin\",\"find\",_StartTime,_EndTime,addr,tag,type,app,tips,filterId,sort,fields,skip,limit);\n$.result(res);","name":"ubsi.admin.find","updateTime":{"$t":"long","$v":1651113604954},"params":[{"name":"StartTime","type":2,"desc":"开始时间戳"},{"name":"EndTime","type":2,"desc":"结束时间戳"},{"name":"addr","type":3,"desc":"应用位置，可以为null"},{"name":"tag","type":3,"desc":"应用分类"},{"name":"type","type":3,"desc":"日志类型"},{"name":"app","type":3,"desc":"应用ID，可以为null"},{"name":"tips","type":3,"desc":"日志说明"},{"name":"filterId","type":3,"desc":"过滤器ID，可以为null"},{"name":"sort","type":4,"desc":"排序方式(MongoDB语法)，可以为null"},{"name":"fields","type":3,"desc":"返回的字段(MongoDB语法)，可以为null"},{"name":"skip","type":2,"desc":"跳过的数量"},{"name":"limit","type":2,"desc":"返回的数量，0表示不限"}],"desc":"日志分析-服务运行日志-查询","status":0,"tags":["read","xxz"]}
++:{"_id":"62676356e43f5d61d3cfcffd","code":"var res = $.request(\"rewin.ubsi.admin\",\"checkAuth\",logintoken,key,domain);\n$.result(res);\n","name":"ubsi.admin.checkAuth","updateTime":{"$t":"long","$v":1650943687944},"params":[{"name":"logintoken","type":3,"desc":"logintoken"},{"name":"key","type":3,"desc":"key值"},{"name":"domain","type":3,"desc":"数据域"}],"desc":"检查用户权限","status":0,"tags":["read","write"]}
++:{"_id":"6296cdb97c97b20ebcf8b0a2","code":"$.timeout(0);\nvar res = $.request(\"rewin.ubsi.admin\",\"trackLogDetails\",reqId,sort);\n$.result(res);","desc":"日志分析-日志跟踪","name":"ubsi.admin.trackLogDetails","params":[{"desc":"跟节点ID","name":"reqId","type":3},{"desc":"排序方式(MongoDB语法)，可以为null","name":"sort","type":4}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1654050283673}}

@@:{"col":"script","index":[{"name":"_id_","key":["_id",1]},{"name":"name_1","key":["name",1]},{"name":"tags_1","key":["tags",1]}],"db":"ubsi_script"}
++:{"_id":"620c9d761aa1ef7d1e30aa6d","code":"var res = $.request('rewin.common.user', 'getRoles', Packages.rewin.ubsi.common.Util.toSet(nodes.toArray()), domain);\n$.result(res);","desc":"获得指定的角色","name":"user.admin.getRoles","params":[{"desc":"角色的节点ID列表","name":"nodes","type":4},{"desc":"角色所属的 \"数据域\" 或 \"应用\"","name":"domain","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1654679052692}}
++:{"_id":"6221a84bc11bf37ca044d02b","code":"var props = $._map({'passCount':$._int(0),'authTimeOK':$._long( authTimeOK )});\n$.request('rewin.common.user', 'setUser', userId,props);","name":"user.admin.setUserPassCount","updateTime":{"$t":"long","$v":1648030694001},"params":[{"name":"userId","type":3,"desc":"用户ID"},{"name":"authTimeOK","type":2,"desc":"当前时间戳"}],"desc":"修改用户user密码认证失败次数","status":0,"tags":["write","xxz"]}
++:{"_id":"6230288ec11bf37ca045b19b","code":"try{\n  var _name = name == null ? null : name;\n  $.info(\"roles:\"+roles);\n  var types_set = types == null ? null : new Packages.java.util.HashSet(types);\n  var tags_set = tags == null ? null : new Packages.java.util.HashSet(tags);\n  var roles_set = roles == null ? null : new Packages.java.util.HashSet(roles);\n  var _sortby = sortBy == null ? null : sortBy;\n  var _props = props == null ? null : props;\n  var res = $.request(\"rewin.common.user\",\"listUser\",_name,types_set,tags_set,\n                      roles_set,domain,_props,_sortby,skip,limit)\n  var length=res[0];\n  if(length > 0){\n    var listRes = new Packages.java.util.ArrayList(res[1]);\n    for (var i= 0; i < listRes.size() ; i++) {\n      var rolesmap=listRes.get(i);\n      if(rolesmap.get(\"roles\") == null ){\n        rolesmap.put(\"roles\",new Packages.java.util.ArrayList());\n      }else{\n        var roles=new Packages.java.util.ArrayList(rolesmap.get(\"roles\"));\n        $.info(\"roles:\"+roles);\n        var _rolesmap = new Packages.java.util.HashSet(roles);\n        $.info(\"_rolesmap:\"+_rolesmap);\n        var reslist = $.request(\"rewin.common.user\",\"getRoles\",_rolesmap,domain)\n        $.info(\"reslist:\"+reslist);\n        rolesmap.put(\"roles\",reslist);\n      }\n      \n    }\n    $.result(res);\n  }\n}catch(err){\n  $.error(err);\n}\n\n","desc":"系统管理-用户管理-查询用户列表","name":"user.admin.listUser","params":[{"desc":"用户名字（以\"/\"开始表示模糊查询），null表示不限","name":"name","type":3},{"desc":"用户类型，null表示不限","name":"types","type":4},{"desc":"用户标签，null表示不限 多个以,相隔","name":"tags","type":4},{"desc":"用户角色的节点ID，null表示不限 多个以,相隔","name":"roles","type":4},{"desc":"用户所属的 \"数据域\" 或 \"应用\"","name":"domain","type":3},{"desc":"用户属性的自定义查询条件（mongodb语法），null表示不限","name":"props","type":5},{"desc":"排序方式，格式：[\"field\", 1(升序)|-1(降序), ...]，null表示按照name的升序排列","name":"sortBy","type":4},{"desc":"跳过的数量","name":"skip","type":2},{"desc":"返回的数量，0表示不限","name":"limit","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1656469380367}}
++:{"_id":"623146dcc11bf37ca05c400a","code":"try{\n  var userIds_set = userIds == null ? null : new Packages.java.util.HashSet(userIds);\n  var res = $.request(\"rewin.common.user\",\"delUsers\",userIds_set);\n  $.result(res);\n}catch(err){\n  $.error(err);\n}","name":"user.admin.delUsers","updateTime":{"$t":"long","$v":1648030673430},"params":[{"name":"userIds","type":4,"desc":"用户ID的列表"}],"desc":"系统管理-用户管理-删除用户","status":0,"tags":["write","xxz"]}
++:{"_id":"6232994bc11bf37ca05c646b","code":"var _role =new Packages.java.util.HashMap(role);\n  var res = $.request(\"rewin.common.user\",\"addRole\",role);\n  $.result(res);","name":"user.admin.addRole","updateTime":{"$t":"long","$v":1648030662363},"params":[{"name":"role","type":5,"desc":"角色属性（包含预定义和自定义的扩展属性）"}],"desc":"系统管理-角色管理-新增角色","status":0,"tags":["write","xxz"]}
++:{"_id":"62329d9ec11bf37ca05c6501","code":"var _props =new Packages.java.util.HashMap(props);\n  var res = $.request(\"rewin.common.user\",\"setRole\",roleId,_props);\n  $.result(res);","name":"user.admin.setRole","updateTime":{"$t":"long","$v":1648030688493},"params":[{"name":"roleId","type":3,"desc":"角色ID"},{"name":"props","type":5,"desc":"角色属性（包含预定义和自定义的扩展属性）"}],"desc":"系统管理-角色管理-修改角色","status":0,"tags":["write","xxz"]}
++:{"_id":"6232a1c7c11bf37ca05c6592","code":"  var res = $.request(\"rewin.common.user\",\"delRole\", node,domain);\n  $.result(res);","name":"user.admin.delRole","updateTime":{"$t":"long","$v":1648030668431},"params":[{"name":"node","type":3,"desc":"角色节点"},{"name":"domain","type":3,"desc":"角色所属的 \"数据域\" 或 \"应用\""}],"desc":"系统管理-角色管理-删除角色","status":0,"tags":["write","xxz"]}
++:{"_id":"62847de0980171495b14e215","code":"var res = $.request(\"rewin.common.user\",\"listDomain\");\n  $.result(res);","desc":"获取所有的数据域","name":"user.admin.listDomain","status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1652850187637}}
++:{"_id":"62848905980171495b14e9fc","code":"var res = $.request(\"rewin.common.user\", \"listTags\",type);\n$.result(res);","desc":"获取用户/角色所属标签","name":"user.admin.listTags","params":[{"desc":"标签类别，0:全部，1:用户，2:角色","name":"type","type":2}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1652853107130}}
++:{"_id":"6287410803a99520ac1f19c6","code":"var _targetTypes= targetTypes ==null ? null : new Packages.java.util.HashSet(targetTypes);\nvar _targetIds= targetIds ==null ? null : new Packages.java.util.HashSet(targetIds);\nvar _roles= roles ==null ? null : new Packages.java.util.HashSet(roles);\nvar res=$.request(\"rewin.common.user\",\"listAcl\",_targetTypes,_targetIds,_roles,domain);\n$.result(res);","desc":"查询权限表，按_id升序排列","name":"user.admin.listAcl","params":[{"desc":"目标对象分类列表，null表示不限","name":"targetTypes","type":4},{"desc":"目标对象ID列表，null表示不限","name":"targetIds","type":4},{"desc":"指定角色的节点ID，null表示不限","name":"roles","type":4},{"desc":"数据项所属的 \"数据域\" 或 \"应用\"","name":"domain","type":3}],"status":0,"tags":["read","xxz"],"updateTime":{"$t":"long","$v":1653031999071}}
++:{"_id":"628742f503a99520ac1f1b4d","code":"var _auths= auths == null ? null : new Packages.java.util.ArrayList(auths);\nvar res= $.request(\"rewin.common.user\",\"setAcl\",aclId,_auths);\n$.result(res);","desc":"修改ACL权限表","name":"user.admin.setAcl","params":[{"desc":"ACL数据项ID","name":"aclId","type":3},{"desc":"权限表","name":"auths","type":4}],"status":0,"tags":["write","xxz"],"updateTime":{"$t":"long","$v":1653033009877}}
